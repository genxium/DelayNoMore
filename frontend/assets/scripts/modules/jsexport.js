"use strict";
(function() {

var $goVersion = "go1.18.6";
Error.stackTraceLimit=1/0;var $global,$module,$NaN=NaN;if("undefined"!=typeof window?$global=window:"undefined"!=typeof self?$global=self:"undefined"!=typeof global?($global=global).require=require:$global=this,void 0===$global||void 0===$global.Array)throw new Error("no global object found");if("undefined"!=typeof module&&($module=module),!$global.fs&&$global.require)try{var fs=$global.require("fs");"object"==typeof fs&&null!==fs&&0!==Object.keys(fs).length&&($global.fs=fs)}catch(e){}if(!$global.fs){var outputBuf="",decoder=new TextDecoder("utf-8");$global.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync:function(e,n){var r=(outputBuf+=decoder.decode(n)).lastIndexOf("\n");return-1!=r&&(console.log(outputBuf.substr(0,r)),outputBuf=outputBuf.substr(r+1)),n.length},write:function(e,n,r,t,i,a){0===r&&t===n.length&&null===i?a(null,this.writeSync(e,n)):a(enosys())}}}var $throwRuntimeError,$linknames={},$packages={},$idCounter=0,$keys=function(e){return e?Object.keys(e):[]},$flushConsole=function(){},$throwNilPointerError=function(){$throwRuntimeError("invalid memory address or nil pointer dereference")},$call=function(e,n,r){return e.apply(n,r)},$makeFunc=function(e){return function(){return $externalize(e(this,new($sliceType($jsObjectPtr))($global.Array.prototype.slice.call(arguments,[]))),$emptyInterface)}},$unused=function(e){},$print=console.log;if(void 0!==$global.process&&$global.require)try{var util=$global.require("util");$print=function(){$global.process.stderr.write(util.format.apply(this,arguments))}}catch(e){}var $println=console.log,$initAllLinknames=function(){for(var e=$keys($packages),n=0;n<e.length;n++){var r=$packages[e[n]].$initLinknames;"function"==typeof r&&r()}},$mapArray=function(e,n){for(var r=new e.constructor(e.length),t=0;t<e.length;t++)r[t]=n(e[t]);return r},$methodVal=function(e,n){var r=e.$methodVals||{};e.$methodVals=r;var t=r[n];return void 0!==t?t:(t=e[n].bind(e),r[n]=t,t)},$methodExpr=function(e,n){var r=e.prototype[n];return void 0===r.$expr&&(r.$expr=function(){$stackDepthOffset--;try{return e.wrapped&&(arguments[0]=new e(arguments[0])),Function.call.apply(r,arguments)}finally{$stackDepthOffset++}}),r.$expr},$ifaceMethodExprs={},$ifaceMethodExpr=function(e){var n=$ifaceMethodExprs["$"+e];return void 0===n&&(n=$ifaceMethodExprs["$"+e]=function(){$stackDepthOffset--;try{return Function.call.apply(arguments[0][e],arguments)}finally{$stackDepthOffset++}}),n},$subslice=function(e,n,r,t){if(void 0===r&&(r=e.$length),void 0===t&&(t=e.$capacity),(n<0||r<n||t<r||r>e.$capacity||t>e.$capacity)&&$throwRuntimeError("slice bounds out of range"),e===e.constructor.nil)return e;var i=new e.constructor(e.$array);return i.$offset=e.$offset+n,i.$length=r-n,i.$capacity=t-n,i},$substring=function(e,n,r){return(n<0||r<n||r>e.length)&&$throwRuntimeError("slice bounds out of range"),e.substring(n,r)},$sliceToNativeArray=function(e){return e.$array.constructor!==Array?e.$array.subarray(e.$offset,e.$offset+e.$length):e.$array.slice(e.$offset,e.$offset+e.$length)},$sliceToGoArray=function(e,n){var r=n.elem;return void 0!==r&&e.$length<r.len&&$throwRuntimeError("cannot convert slice with length "+e.$length+" to pointer to array with length "+r.len),e==e.constructor.nil?n.nil:e.$array.constructor!==Array?e.$array.subarray(e.$offset,e.$offset+r.len):0==e.$offset&&e.$length==e.$capacity&&e.$length==r.len?e.$array:0==r.len?new r([]):void $throwRuntimeError("gopherjs: non-numeric slice to underlying array conversion is not supported for subslices")},$convertSliceType=function(e,n){return e==e.constructor.nil?n.nil:$subslice(new n(e.$array),e.$offset,e.$offset+e.$length)},$decodeRune=function(e,n){var r=e.charCodeAt(n);if(r<128)return[r,1];if(r!=r||r<192)return[65533,1];var t=e.charCodeAt(n+1);if(t!=t||t<128||192<=t)return[65533,1];if(r<224)return(a=(31&r)<<6|63&t)<=127?[65533,1]:[a,2];var i=e.charCodeAt(n+2);if(i!=i||i<128||192<=i)return[65533,1];if(r<240)return(a=(15&r)<<12|(63&t)<<6|63&i)<=2047?[65533,1]:55296<=a&&a<=57343?[65533,1]:[a,3];var a,o=e.charCodeAt(n+3);return o!=o||o<128||192<=o?[65533,1]:r<248?(a=(7&r)<<18|(63&t)<<12|(63&i)<<6|63&o)<=65535||1114111<a?[65533,1]:[a,4]:[65533,1]},$encodeRune=function(e){return(e<0||e>1114111||55296<=e&&e<=57343)&&(e=65533),e<=127?String.fromCharCode(e):e<=2047?String.fromCharCode(192|e>>6,128|63&e):e<=65535?String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e):String.fromCharCode(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e)},$stringToBytes=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},$bytesToString=function(e){if(0===e.$length)return"";for(var n="",r=0;r<e.$length;r+=1e4)n+=String.fromCharCode.apply(void 0,e.$array.subarray(e.$offset+r,e.$offset+Math.min(e.$length,r+1e4)));return n},$stringToRunes=function(e){for(var n,r=new Int32Array(e.length),t=0,i=0;i<e.length;i+=n[1],t++)n=$decodeRune(e,i),r[t]=n[0];return r.subarray(0,t)},$runesToString=function(e){if(0===e.$length)return"";for(var n="",r=0;r<e.$length;r++)n+=$encodeRune(e.$array[e.$offset+r]);return n},$copyString=function(e,n){for(var r=Math.min(n.length,e.$length),t=0;t<r;t++)e.$array[e.$offset+t]=n.charCodeAt(t);return r},$copySlice=function(e,n){var r=Math.min(n.$length,e.$length);return $copyArray(e.$array,n.$array,e.$offset,n.$offset,r,e.constructor.elem),r},$copyArray=function(e,n,r,t,i,a){if(0!==i&&(e!==n||r!==t))if(n.subarray)e.set(n.subarray(t,t+i),r);else{switch(a.kind){case $kindArray:case $kindStruct:if(e===n&&r>t){for(var o=i-1;o>=0;o--)a.copy(e[r+o],n[t+o]);return}for(o=0;o<i;o++)a.copy(e[r+o],n[t+o]);return}if(e===n&&r>t)for(o=i-1;o>=0;o--)e[r+o]=n[t+o];else for(o=0;o<i;o++)e[r+o]=n[t+o]}},$clone=function(e,n){var r=n.zero();return n.copy(r,e),r},$pointerOfStructConversion=function(e,n){void 0===e.$proxies&&(e.$proxies={},e.$proxies[e.constructor.string]=e);var r=e.$proxies[n.string];if(void 0===r){for(var t={},i=0;i<n.elem.fields.length;i++)!function(n){t[n]={get:function(){return e[n]},set:function(r){e[n]=r}}}(n.elem.fields[i].prop);(r=Object.create(n.prototype,t)).$val=r,e.$proxies[n.string]=r,r.$proxies=e.$proxies}return r},$append=function(e){return $internalAppend(e,arguments,1,arguments.length-1)},$appendSlice=function(e,n){if(n.constructor===String){var r=$stringToBytes(n);return $internalAppend(e,r,0,r.length)}return $internalAppend(e,n.$array,n.$offset,n.$length)},$internalAppend=function(e,n,r,t){if(0===t)return e;var i=e.$array,a=e.$offset,o=e.$length+t,c=e.$capacity;if(o>c)if(a=0,c=Math.max(o,e.$capacity<1024?2*e.$capacity:Math.floor(5*e.$capacity/4)),e.$array.constructor===Array){(i=e.$array.slice(e.$offset,e.$offset+e.$length)).length=c;for(var $=e.constructor.elem.zero,u=e.$length;u<c;u++)i[u]=$()}else(i=new e.$array.constructor(c)).set(e.$array.subarray(e.$offset,e.$offset+e.$length));$copyArray(i,n,a+e.$length,r,t,e.constructor.elem);var l=new e.constructor(i);return l.$offset=a,l.$length=o,l.$capacity=c,l},$equal=function(e,n,r){if(r===$jsObjectPtr)return e===n;switch(r.kind){case $kindComplex64:case $kindComplex128:return e.$real===n.$real&&e.$imag===n.$imag;case $kindInt64:case $kindUint64:return e.$high===n.$high&&e.$low===n.$low;case $kindArray:if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!$equal(e[t],n[t],r.elem))return!1;return!0;case $kindStruct:for(t=0;t<r.fields.length;t++){var i=r.fields[t];if(!$equal(e[i.prop],n[i.prop],i.typ))return!1}return!0;case $kindInterface:return $interfaceIsEqual(e,n);default:return e===n}},$interfaceIsEqual=function(e,n){return e===$ifaceNil||n===$ifaceNil?e===n:e.constructor===n.constructor&&(e.constructor===$jsObjectPtr?e.object===n.object:(e.constructor.comparable||$throwRuntimeError("comparing uncomparable type "+e.constructor.string),$equal(e.$val,n.$val,e.constructor)))},$min=Math.min,$mod=function(e,n){return e%n},$parseInt=parseInt,$parseFloat=function(e){return void 0!==e&&null!==e&&e.constructor===Number?e:parseFloat(e)},$froundBuf=new Float32Array(1),$fround=Math.fround||function(e){return $froundBuf[0]=e,$froundBuf[0]},$imul=Math.imul||function(e,n){var r=65535&e,t=65535&n;return r*t+((e>>>16&65535)*t+r*(n>>>16&65535)<<16>>>0)>>0},$floatKey=function(e){return e!=e?"NaN$"+ ++$idCounter:String(e)},$flatten64=function(e){return 4294967296*e.$high+e.$low},$shiftLeft64=function(e,n){return 0===n?e:n<32?new e.constructor(e.$high<<n|e.$low>>>32-n,e.$low<<n>>>0):n<64?new e.constructor(e.$low<<n-32,0):new e.constructor(0,0)},$shiftRightInt64=function(e,n){return 0===n?e:n<32?new e.constructor(e.$high>>n,(e.$low>>>n|e.$high<<32-n)>>>0):n<64?new e.constructor(e.$high>>31,e.$high>>n-32>>>0):e.$high<0?new e.constructor(-1,4294967295):new e.constructor(0,0)},$shiftRightUint64=function(e,n){return 0===n?e:n<32?new e.constructor(e.$high>>>n,(e.$low>>>n|e.$high<<32-n)>>>0):n<64?new e.constructor(0,e.$high>>>n-32):new e.constructor(0,0)},$mul64=function(e,n){var r=e.$high>>>16,t=65535&e.$high,i=e.$low>>>16,a=65535&e.$low,o=n.$high>>>16,c=65535&n.$high,$=n.$low>>>16,u=65535&n.$low,l=0,s=0,f=0,d=0;f+=(d+=a*u)>>>16,s+=(f+=i*u)>>>16,f&=65535,s+=(f+=a*$)>>>16,l+=(s+=t*u)>>>16,s&=65535,l+=(s+=i*$)>>>16,s&=65535,l+=(s+=a*c)>>>16,l+=r*u+t*$+i*c+a*o;var p=((l&=65535)<<16|(s&=65535))>>>0,h=((f&=65535)<<16|(d&=65535))>>>0;return new e.constructor(p,h)},$div64=function(e,n,r){0===n.$high&&0===n.$low&&$throwRuntimeError("integer divide by zero");var t=1,i=1,a=e.$high,o=e.$low;a<0&&(t=-1,i=-1,a=-a,0!==o&&(a--,o=4294967296-o));var c=n.$high,$=n.$low;n.$high<0&&(t*=-1,c=-c,0!==$&&(c--,$=4294967296-$));for(var u=0,l=0,s=0;c<2147483648&&(a>c||a===c&&o>$);)c=(c<<1|$>>>31)>>>0,$=$<<1>>>0,s++;for(var f=0;f<=s;f++)u=u<<1|l>>>31,l=l<<1>>>0,(a>c||a===c&&o>=$)&&(a-=c,(o-=$)<0&&(a--,o+=4294967296),4294967296===++l&&(u++,l=0)),$=($>>>1|c<<31)>>>0,c>>>=1;return r?new e.constructor(a*i,o*i):new e.constructor(u*t,l*t)},$divComplex=function(e,n){var r=e.$real===1/0||e.$real===-1/0||e.$imag===1/0||e.$imag===-1/0,t=n.$real===1/0||n.$real===-1/0||n.$imag===1/0||n.$imag===-1/0,i=!r&&(e.$real!=e.$real||e.$imag!=e.$imag),a=!t&&(n.$real!=n.$real||n.$imag!=n.$imag);if(i||a)return new e.constructor(NaN,NaN);if(r&&!t)return new e.constructor(1/0,1/0);if(!r&&t)return new e.constructor(0,0);if(0===n.$real&&0===n.$imag)return 0===e.$real&&0===e.$imag?new e.constructor(NaN,NaN):new e.constructor(1/0,1/0);if(Math.abs(n.$real)<=Math.abs(n.$imag)){var o=n.$real/n.$imag,c=n.$real*o+n.$imag;return new e.constructor((e.$real*o+e.$imag)/c,(e.$imag*o-e.$real)/c)}o=n.$imag/n.$real,c=n.$imag*o+n.$real;return new e.constructor((e.$imag*o+e.$real)/c,(e.$imag-e.$real*o)/c)},$kindBool=1,$kindInt=2,$kindInt8=3,$kindInt16=4,$kindInt32=5,$kindInt64=6,$kindUint=7,$kindUint8=8,$kindUint16=9,$kindUint32=10,$kindUint64=11,$kindUintptr=12,$kindFloat32=13,$kindFloat64=14,$kindComplex64=15,$kindComplex128=16,$kindArray=17,$kindChan=18,$kindFunc=19,$kindInterface=20,$kindMap=21,$kindPtr=22,$kindSlice=23,$kindString=24,$kindStruct=25,$kindUnsafePointer=26,$methodSynthesizers=[],$addMethodSynthesizer=function(e){null!==$methodSynthesizers?$methodSynthesizers.push(e):e()},$synthesizeMethods=function(){$methodSynthesizers.forEach(function(e){e()}),$methodSynthesizers=null},$ifaceKeyFor=function(e){if(e===$ifaceNil)return"nil";var n=e.constructor;return n.string+"$"+n.keyFor(e.$val)},$identity=function(e){return e},$typeIDCounter=0,$idKey=function(e){return void 0===e.$id&&($idCounter++,e.$id=$idCounter),String(e.$id)},$arrayPtrCtor=function(){return function(e){this.$get=function(){return e},this.$set=function(e){typ.copy(this,e)},this.$val=e}},$newType=function(e,n,r,t,i,a,o){var c;switch(n){case $kindBool:case $kindInt:case $kindInt8:case $kindInt16:case $kindInt32:case $kindUint:case $kindUint8:case $kindUint16:case $kindUint32:case $kindUintptr:case $kindUnsafePointer:(c=function(e){this.$val=e}).wrapped=!0,c.keyFor=$identity;break;case $kindString:(c=function(e){this.$val=e}).wrapped=!0,c.keyFor=function(e){return"$"+e};break;case $kindFloat32:case $kindFloat64:(c=function(e){this.$val=e}).wrapped=!0,c.keyFor=function(e){return $floatKey(e)};break;case $kindInt64:(c=function(e,n){this.$high=e+Math.floor(Math.ceil(n)/4294967296)>>0,this.$low=n>>>0,this.$val=this}).keyFor=function(e){return e.$high+"$"+e.$low};break;case $kindUint64:(c=function(e,n){this.$high=e+Math.floor(Math.ceil(n)/4294967296)>>>0,this.$low=n>>>0,this.$val=this}).keyFor=function(e){return e.$high+"$"+e.$low};break;case $kindComplex64:(c=function(e,n){this.$real=$fround(e),this.$imag=$fround(n),this.$val=this}).keyFor=function(e){return e.$real+"$"+e.$imag};break;case $kindComplex128:(c=function(e,n){this.$real=e,this.$imag=n,this.$val=this}).keyFor=function(e){return e.$real+"$"+e.$imag};break;case $kindArray:(c=function(e){this.$val=e}).wrapped=!0,c.ptr=$newType(4,$kindPtr,"*"+r,!1,"",!1,$arrayPtrCtor()),c.init=function(e,n){c.elem=e,c.len=n,c.comparable=e.comparable,c.keyFor=function(n){return Array.prototype.join.call($mapArray(n,function(n){return String(e.keyFor(n)).replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}),"$")},c.copy=function(n,r){$copyArray(n,r,0,0,r.length,e)},c.ptr.init(c),Object.defineProperty(c.ptr.nil,"nilCheck",{get:$throwNilPointerError})};break;case $kindChan:(c=function(e){this.$val=e}).wrapped=!0,c.keyFor=$idKey,c.init=function(e,n,r){c.elem=e,c.sendOnly=n,c.recvOnly=r};break;case $kindFunc:(c=function(e){this.$val=e}).wrapped=!0,c.init=function(e,n,r){c.params=e,c.results=n,c.variadic=r,c.comparable=!1};break;case $kindInterface:(c={implementedBy:{},missingMethodFor:{}}).keyFor=$ifaceKeyFor,c.init=function(e){c.methods=e,e.forEach(function(e){$ifaceNil[e.prop]=$throwNilPointerError})};break;case $kindMap:(c=function(e){this.$val=e}).wrapped=!0,c.init=function(e,n){c.key=e,c.elem=n,c.comparable=!1};break;case $kindPtr:(c=o||function(e,n,r){this.$get=e,this.$set=n,this.$target=r,this.$val=this}).keyFor=$idKey,c.init=function(e){c.elem=e,c.wrapped=e.kind===$kindArray,c.nil=new c($throwNilPointerError,$throwNilPointerError)};break;case $kindSlice:(c=function(e){e.constructor!==c.nativeArray&&(e=new c.nativeArray(e)),this.$array=e,this.$offset=0,this.$length=e.length,this.$capacity=e.length,this.$val=this}).init=function(e){c.elem=e,c.comparable=!1,c.nativeArray=$nativeArray(e.kind),c.nil=new c([])};break;case $kindStruct:(c=function(e){this.$val=e}).wrapped=!0,c.ptr=$newType(4,$kindPtr,"*"+r,!1,i,a,o),c.ptr.elem=c,c.ptr.prototype.$get=function(){return this},c.ptr.prototype.$set=function(e){c.copy(this,e)},c.init=function(e,n){c.pkgPath=e,c.fields=n,n.forEach(function(e){e.typ.comparable||(c.comparable=!1)}),c.keyFor=function(e){var r=e.$val;return $mapArray(n,function(e){return String(e.typ.keyFor(r[e.prop])).replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}).join("$")},c.copy=function(e,r){for(var t=0;t<n.length;t++){var i=n[t];switch(i.typ.kind){case $kindArray:case $kindStruct:i.typ.copy(e[i.prop],r[i.prop]);continue;default:e[i.prop]=r[i.prop];continue}}};var r={};n.forEach(function(e){r[e.prop]={get:$throwNilPointerError,set:$throwNilPointerError}}),c.ptr.nil=Object.create(o.prototype,r),c.ptr.nil.$val=c.ptr.nil,$addMethodSynthesizer(function(){var e=function(e,n,r){void 0===e.prototype[n.prop]&&(e.prototype[n.prop]=function(){var e=this.$val[r.prop];return r.typ===$jsObjectPtr&&(e=new $jsObjectPtr(e)),void 0===e.$val&&(e=new r.typ(e)),e[n.prop].apply(e,arguments)})};n.forEach(function(n){n.embedded&&($methodSet(n.typ).forEach(function(r){e(c,r,n),e(c.ptr,r,n)}),$methodSet($ptrType(n.typ)).forEach(function(r){e(c.ptr,r,n)}))})})};break;default:$panic(new $String("invalid kind: "+n))}switch(n){case $kindBool:case $kindMap:c.zero=function(){return!1};break;case $kindInt:case $kindInt8:case $kindInt16:case $kindInt32:case $kindUint:case $kindUint8:case $kindUint16:case $kindUint32:case $kindUintptr:case $kindUnsafePointer:case $kindFloat32:case $kindFloat64:c.zero=function(){return 0};break;case $kindString:c.zero=function(){return""};break;case $kindInt64:case $kindUint64:case $kindComplex64:case $kindComplex128:var $=new c(0,0);c.zero=function(){return $};break;case $kindPtr:case $kindSlice:c.zero=function(){return c.nil};break;case $kindChan:c.zero=function(){return $chanNil};break;case $kindFunc:c.zero=function(){return $throwNilPointerError};break;case $kindInterface:c.zero=function(){return $ifaceNil};break;case $kindArray:c.zero=function(){var e=$nativeArray(c.elem.kind);if(e!==Array)return new e(c.len);for(var n=new Array(c.len),r=0;r<c.len;r++)n[r]=c.elem.zero();return n};break;case $kindStruct:c.zero=function(){return new c.ptr};break;default:$panic(new $String("invalid kind: "+n))}return c.id=$typeIDCounter,$typeIDCounter++,c.size=e,c.kind=n,c.string=r,c.named=t,c.pkg=i,c.exported=a,c.methods=[],c.methodSetCache=null,c.comparable=!0,c},$methodSet=function(e){if(null!==e.methodSetCache)return e.methodSetCache;var n={},r=e.kind===$kindPtr;if(r&&e.elem.kind===$kindInterface)return e.methodSetCache=[],[];for(var t=[{typ:r?e.elem:e,indirect:r}],i={};t.length>0;){var a=[],o=[];t.forEach(function(e){if(!i[e.typ.string])switch(i[e.typ.string]=!0,e.typ.named&&(o=o.concat(e.typ.methods),e.indirect&&(o=o.concat($ptrType(e.typ).methods))),e.typ.kind){case $kindStruct:e.typ.fields.forEach(function(n){if(n.embedded){var r=n.typ,t=r.kind===$kindPtr;a.push({typ:t?r.elem:r,indirect:e.indirect||t})}});break;case $kindInterface:o=o.concat(e.typ.methods)}}),o.forEach(function(e){void 0===n[e.name]&&(n[e.name]=e)}),t=a}return e.methodSetCache=[],Object.keys(n).sort().forEach(function(r){e.methodSetCache.push(n[r])}),e.methodSetCache},$Bool=$newType(1,$kindBool,"bool",!0,"",!1,null),$Int=$newType(4,$kindInt,"int",!0,"",!1,null),$Int8=$newType(1,$kindInt8,"int8",!0,"",!1,null),$Int16=$newType(2,$kindInt16,"int16",!0,"",!1,null),$Int32=$newType(4,$kindInt32,"int32",!0,"",!1,null),$Int64=$newType(8,$kindInt64,"int64",!0,"",!1,null),$Uint=$newType(4,$kindUint,"uint",!0,"",!1,null),$Uint8=$newType(1,$kindUint8,"uint8",!0,"",!1,null),$Uint16=$newType(2,$kindUint16,"uint16",!0,"",!1,null),$Uint32=$newType(4,$kindUint32,"uint32",!0,"",!1,null),$Uint64=$newType(8,$kindUint64,"uint64",!0,"",!1,null),$Uintptr=$newType(4,$kindUintptr,"uintptr",!0,"",!1,null),$Float32=$newType(4,$kindFloat32,"float32",!0,"",!1,null),$Float64=$newType(8,$kindFloat64,"float64",!0,"",!1,null),$Complex64=$newType(8,$kindComplex64,"complex64",!0,"",!1,null),$Complex128=$newType(16,$kindComplex128,"complex128",!0,"",!1,null),$String=$newType(8,$kindString,"string",!0,"",!1,null),$UnsafePointer=$newType(4,$kindUnsafePointer,"unsafe.Pointer",!0,"unsafe",!1,null),$nativeArray=function(e){switch(e){case $kindInt:return Int32Array;case $kindInt8:return Int8Array;case $kindInt16:return Int16Array;case $kindInt32:return Int32Array;case $kindUint:return Uint32Array;case $kindUint8:return Uint8Array;case $kindUint16:return Uint16Array;case $kindUint32:case $kindUintptr:return Uint32Array;case $kindFloat32:return Float32Array;case $kindFloat64:return Float64Array;default:return Array}},$toNativeArray=function(e,n){var r=$nativeArray(e);return r===Array?n:new r(n)},$arrayTypes={},$arrayType=function(e,n){var r=e.id+"$"+n,t=$arrayTypes[r];return void 0===t&&(t=$newType(12,$kindArray,"["+n+"]"+e.string,!1,"",!1,null),$arrayTypes[r]=t,t.init(e,n)),t},$chanType=function(e,n,r){var t=(r?"<-":"")+"chan"+(n?"<- ":" ");n||r||"<"!=e.string[0]?t+=e.string:t+="("+e.string+")";var i=n?"SendChan":r?"RecvChan":"Chan",a=e[i];return void 0===a&&(a=$newType(4,$kindChan,t,!1,"",!1,null),e[i]=a,a.init(e,n,r)),a},$Chan=function(e,n){(n<0||n>2147483647)&&$throwRuntimeError("makechan: size out of range"),this.$elem=e,this.$capacity=n,this.$buffer=[],this.$sendQueue=[],this.$recvQueue=[],this.$closed=!1},$chanNil=new $Chan(null,0);$chanNil.$sendQueue=$chanNil.$recvQueue={length:0,push:function(){},shift:function(){},indexOf:function(){return-1}};var $funcTypes={},$funcType=function(e,n,r){var t=$mapArray(e,function(e){return e.id}).join(",")+"$"+$mapArray(n,function(e){return e.id}).join(",")+"$"+r,i=$funcTypes[t];if(void 0===i){var a=$mapArray(e,function(e){return e.string});r&&(a[a.length-1]="..."+a[a.length-1].substr(2));var o="func("+a.join(", ")+")";1===n.length?o+=" "+n[0].string:n.length>1&&(o+=" ("+$mapArray(n,function(e){return e.string}).join(", ")+")"),i=$newType(4,$kindFunc,o,!1,"",!1,null),$funcTypes[t]=i,i.init(e,n,r)}return i},$interfaceTypes={},$interfaceType=function(e){var n=$mapArray(e,function(e){return e.pkg+","+e.name+","+e.typ.id}).join("$"),r=$interfaceTypes[n];if(void 0===r){var t="interface {}";0!==e.length&&(t="interface { "+$mapArray(e,function(e){return(""!==e.pkg?e.pkg+".":"")+e.name+e.typ.string.substr(4)}).join("; ")+" }"),r=$newType(8,$kindInterface,t,!1,"",!1,null),$interfaceTypes[n]=r,r.init(e)}return r},$emptyInterface=$interfaceType([]),$ifaceNil={},$error=$newType(8,$kindInterface,"error",!0,"",!1,null);$error.init([{prop:"Error",name:"Error",pkg:"",typ:$funcType([],[$String],!1)}]);var $panicValue,$jsObjectPtr,$jsErrorPtr,$mapTypes={},$mapType=function(e,n){var r=e.id+"$"+n.id,t=$mapTypes[r];return void 0===t&&(t=$newType(4,$kindMap,"map["+e.string+"]"+n.string,!1,"",!1,null),$mapTypes[r]=t,t.init(e,n)),t},$makeMap=function(e,n){for(var r={},t=0;t<n.length;t++){var i=n[t];r[e(i.k)]=i}return r},$ptrType=function(e){var n=e.ptr;return void 0===n&&(n=$newType(4,$kindPtr,"*"+e.string,!1,"",e.exported,null),e.ptr=n,n.init(e)),n},$newDataPointer=function(e,n){return n.elem.kind===$kindStruct?e:new n(function(){return e},function(n){e=n})},$indexPtr=function(e,n,r){if(e.buffer){var t=e.buffer.$ptr=e.buffer.$ptr||{},i=t[e.name]=t[e.name]||{},a=e.BYTES_PER_ELEMENT*n+e.byteOffset;return i[a]||(i[a]=new r(function(){return e[n]},function(r){e[n]=r}))}return e.$ptr=e.$ptr||{},e.$ptr[n]||(e.$ptr[n]=new r(function(){return e[n]},function(r){e[n]=r}))},$sliceType=function(e){var n=e.slice;return void 0===n&&(n=$newType(12,$kindSlice,"[]"+e.string,!1,"",!1,null),e.slice=n,n.init(e)),n},$makeSlice=function(e,n,r){r=r||n,(n<0||n>2147483647)&&$throwRuntimeError("makeslice: len out of range"),(r<0||r<n||r>2147483647)&&$throwRuntimeError("makeslice: cap out of range");var t=new e.nativeArray(r);if(e.nativeArray===Array)for(var i=0;i<r;i++)t[i]=e.elem.zero();var a=new e(t);return a.$length=n,a},$structTypes={},$structType=function(e,n){var r=$mapArray(n,function(e){return e.name+","+e.typ.id+","+e.tag}).join("$"),t=$structTypes[r];if(void 0===t){var i="struct { "+$mapArray(n,function(e){var n=e.typ.string+(""!==e.tag?' "'+e.tag.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':"");return e.embedded?n:e.name+" "+n}).join("; ")+" }";0===n.length&&(i="struct {}"),t=$newType(0,$kindStruct,i,!1,"",!1,function(){this.$val=this;for(var e=0;e<n.length;e++){var r=n[e];if("_"!=r.name){var t=arguments[e];this[r.prop]=void 0!==t?t:r.typ.zero()}}}),$structTypes[r]=t,t.init(e,n)}return t},$assertType=function(e,n,r){var t,i=n.kind===$kindInterface,a="";if(e===$ifaceNil)t=!1;else if(i){var o=e.constructor.string;if(void 0===(t=n.implementedBy[o])){t=!0;for(var c=$methodSet(e.constructor),$=n.methods,u=0;u<$.length;u++){for(var l=$[u],s=!1,f=0;f<c.length;f++){var d=c[f];if(d.name===l.name&&d.pkg===l.pkg&&d.typ===l.typ){s=!0;break}}if(!s){t=!1,n.missingMethodFor[o]=l.name;break}}n.implementedBy[o]=t}t||(a=n.missingMethodFor[o])}else t=e.constructor===n;if(!t){if(r)return[n.zero(),!1];$panic(new $packages.runtime.TypeAssertionError.ptr($packages.runtime._type.ptr.nil,e===$ifaceNil?$packages.runtime._type.ptr.nil:new $packages.runtime._type.ptr(e.constructor.string),new $packages.runtime._type.ptr(n.string),a))}return i||(e=e.$val),n===$jsObjectPtr&&(e=e.object),r?[e,!0]:e},$stackDepthOffset=0,$getStackDepth=function(){var e=new Error;if(void 0!==e.stack)return $stackDepthOffset+e.stack.split("\n").length},$panicStackDepth=null,$callDeferred=function(e,n,r){if(!r&&null!==e&&-1==$curGoroutine.deferStack.indexOf(e))throw n;if(null===n){if(!$curGoroutine.asleep){$stackDepthOffset--;var t=$panicStackDepth,i=$panicValue,a=$curGoroutine.panicStack.pop();void 0!==a&&($panicStackDepth=$getStackDepth(),$panicValue=a);try{for(;;){if(null===e&&void 0===(e=$curGoroutine.deferStack[$curGoroutine.deferStack.length-1])){if($panicStackDepth=null,a.Object instanceof Error)throw a.Object;var o;throw o=a.constructor===$String?a.$val:void 0!==a.Error?a.Error():void 0!==a.String?a.String():a,new Error(o)}var c=e.pop();if(void 0===c){if($curGoroutine.deferStack.pop(),void 0!==a){e=null;continue}return}var $=c[0].apply(c[2],c[1]);if($&&void 0!==$.$blk){if(e.push([$.$blk,[],$]),r)throw null;return}if(void 0!==a&&null===$panicStackDepth){if(r)throw null;return}}}catch(n){if(r)throw n;$callDeferred(e,n,r)}finally{void 0!==a&&(null!==$panicStackDepth&&$curGoroutine.panicStack.push(a),$panicStackDepth=t,$panicValue=i),$stackDepthOffset++}}}else{var u=null;try{$panic(new $jsErrorPtr(n))}catch(e){u=e}$callDeferred(e,u)}},$panic=function(e){$curGoroutine.panicStack.push(e),$callDeferred(null,null,!0)},$recover=function(){return null===$panicStackDepth||void 0!==$panicStackDepth&&$panicStackDepth!==$getStackDepth()-2?$ifaceNil:($panicStackDepth=null,$panicValue)},$throw=function(e){throw e},$noGoroutine={asleep:!1,exit:!1,deferStack:[],panicStack:[]},$curGoroutine=$noGoroutine,$totalGoroutines=0,$awakeGoroutines=0,$checkForDeadlock=!0,$exportedFunctions=0,$mainFinished=!1,$go=function(e,n){$totalGoroutines++,$awakeGoroutines++;var $goroutine=function(){try{$curGoroutine=$goroutine;var r=e.apply(void 0,n);if(r&&void 0!==r.$blk)return e=function(){return r.$blk()},void(n=[]);$goroutine.exit=!0}catch(e){if(!$goroutine.exit)throw e}finally{$curGoroutine=$noGoroutine,$goroutine.exit&&($totalGoroutines--,$goroutine.asleep=!0),$goroutine.asleep&&($awakeGoroutines--,!$mainFinished&&0===$awakeGoroutines&&$checkForDeadlock&&0===$exportedFunctions&&(console.error("fatal error: all goroutines are asleep - deadlock!"),void 0!==$global.process&&$global.process.exit(2)))}};$goroutine.asleep=!1,$goroutine.exit=!1,$goroutine.deferStack=[],$goroutine.panicStack=[],$schedule($goroutine)},$scheduled=[],$runScheduled=function(){var e=setTimeout($runScheduled);try{for(var n,r=Date.now();void 0!==(n=$scheduled.shift());){n();var t=Date.now()-r;if(t>4||t<0)break}}finally{0==$scheduled.length&&clearTimeout(e)}},$schedule=function(e){e.asleep&&(e.asleep=!1,$awakeGoroutines++),$scheduled.push(e),$curGoroutine===$noGoroutine&&$runScheduled()},$setTimeout=function(e,n){return $awakeGoroutines++,setTimeout(function(){$awakeGoroutines--,e()},n)},$block=function(){$curGoroutine===$noGoroutine&&$throwRuntimeError("cannot block in JavaScript callback, fix by wrapping code in goroutine"),$curGoroutine.asleep=!0},$restore=function(e,n){return void 0!==e&&void 0!==e.$blk?e:n},$send=function(e,n){e.$closed&&$throwRuntimeError("send on closed channel");var r=e.$recvQueue.shift();if(void 0===r){if(!(e.$buffer.length<e.$capacity)){var t,i=$curGoroutine;return e.$sendQueue.push(function(e){return t=e,$schedule(i),n}),$block(),{$blk:function(){t&&$throwRuntimeError("send on closed channel")}}}e.$buffer.push(n)}else r([n,!0])},$recv=function(e){var n=e.$sendQueue.shift();void 0!==n&&e.$buffer.push(n(!1));var r=e.$buffer.shift();if(void 0!==r)return[r,!0];if(e.$closed)return[e.$elem.zero(),!1];var t=$curGoroutine,i={$blk:function(){return this.value}};return e.$recvQueue.push(function(e){i.value=e,$schedule(t)}),$block(),i},$close=function(e){for(e.$closed&&$throwRuntimeError("close of closed channel"),e.$closed=!0;;){var n=e.$sendQueue.shift();if(void 0===n)break;n(!0)}for(;;){var r=e.$recvQueue.shift();if(void 0===r)break;r([e.$elem.zero(),!1])}},$select=function(e){for(var n=[],r=-1,t=0;t<e.length;t++){var i,a=(i=e[t])[0];switch(i.length){case 0:r=t;break;case 1:(0!==a.$sendQueue.length||0!==a.$buffer.length||a.$closed)&&n.push(t);break;case 2:a.$closed&&$throwRuntimeError("send on closed channel"),(0!==a.$recvQueue.length||a.$buffer.length<a.$capacity)&&n.push(t)}}if(0!==n.length&&(r=n[Math.floor(Math.random()*n.length)]),-1!==r)switch((i=e[r]).length){case 0:return[r];case 1:return[r,$recv(i[0])];case 2:return $send(i[0],i[1]),[r]}var o=[],c=$curGoroutine,$={$blk:function(){return this.selection}},u=function(){for(var e=0;e<o.length;e++){var n=o[e],r=n[0],t=r.indexOf(n[1]);-1!==t&&r.splice(t,1)}};for(t=0;t<e.length;t++)!function(n){var r=e[n];switch(r.length){case 1:var t=function(e){$.selection=[n,e],u(),$schedule(c)};o.push([r[0].$recvQueue,t]),r[0].$recvQueue.push(t);break;case 2:t=function(){return r[0].$closed&&$throwRuntimeError("send on closed channel"),$.selection=[n],u(),$schedule(c),r[1]};o.push([r[0].$sendQueue,t]),r[0].$sendQueue.push(t)}}(t);return $block(),$},$needsExternalization=function(e){switch(e.kind){case $kindBool:case $kindInt:case $kindInt8:case $kindInt16:case $kindInt32:case $kindUint:case $kindUint8:case $kindUint16:case $kindUint32:case $kindUintptr:case $kindFloat32:case $kindFloat64:return!1;default:return e!==$jsObjectPtr}},$externalize=function(e,n,r){if(n===$jsObjectPtr)return e;switch(n.kind){case $kindBool:case $kindInt:case $kindInt8:case $kindInt16:case $kindInt32:case $kindUint:case $kindUint8:case $kindUint16:case $kindUint32:case $kindUintptr:case $kindFloat32:case $kindFloat64:return e;case $kindInt64:case $kindUint64:return $flatten64(e);case $kindArray:return $needsExternalization(n.elem)?$mapArray(e,function(e){return $externalize(e,n.elem,r)}):e;case $kindFunc:return $externalizeFunction(e,n,!1,r);case $kindInterface:return e===$ifaceNil?null:e.constructor===$jsObjectPtr?e.$val.object:$externalize(e.$val,e.constructor,r);case $kindMap:for(var t={},i=$keys(e),a=0;a<i.length;a++){var o=e[i[a]];t[$externalize(o.k,n.key,r)]=$externalize(o.v,n.elem,r)}return t;case $kindPtr:return e===n.nil?null:$externalize(e.$get(),n.elem,r);case $kindSlice:return $needsExternalization(n.elem)?$mapArray($sliceToNativeArray(e),function(e){return $externalize(e,n.elem,r)}):$sliceToNativeArray(e);case $kindString:if($isASCII(e))return e;var c,$="";for(a=0;a<e.length;a+=c[1]){var u=(c=$decodeRune(e,a))[0];if(u>65535){var l=Math.floor((u-65536)/1024)+55296,s=(u-65536)%1024+56320;$+=String.fromCharCode(l,s)}else $+=String.fromCharCode(u)}return $;case $kindStruct:var f=$packages.time;if(void 0!==f&&e.constructor===f.Time.ptr){var d=$div64(e.UnixNano(),new $Int64(0,1e6));return new Date($flatten64(d))}var p={},h=function(e,n){if(n===$jsObjectPtr)return e;switch(n.kind){case $kindPtr:return e===n.nil?p:h(e.$get(),n.elem);case $kindStruct:var r=n.fields[0];return h(e[r.prop],r.typ);case $kindInterface:return h(e.$val,e.constructor);default:return p}},k=h(e,n);if(k!==p)return k;if(void 0!==r)return r(e);k={};for(a=0;a<n.fields.length;a++){var y=n.fields[a];y.exported&&(k[y.name]=$externalize(e[y.prop],y.typ,r))}return k}$throwRuntimeError("cannot externalize "+n.string)},$externalizeFunction=function(e,n,r,t){return e===$throwNilPointerError?null:(void 0===e.$externalizeWrapper&&($checkForDeadlock=!1,e.$externalizeWrapper=function(){for(var i=[],a=0;a<n.params.length;a++){if(n.variadic&&a===n.params.length-1){for(var o=n.params[a].elem,c=[],$=a;$<arguments.length;$++)c.push($internalize(arguments[$],o,t));i.push(new n.params[a](c));break}i.push($internalize(arguments[a],n.params[a],t))}var u=e.apply(r?this:void 0,i);switch(n.results.length){case 0:return;case 1:return $externalize($copyIfRequired(u,n.results[0]),n.results[0],t);default:for(a=0;a<n.results.length;a++)u[a]=$externalize($copyIfRequired(u[a],n.results[a]),n.results[a],t);return u}}),e.$externalizeWrapper)},$internalize=function(e,n,r,t,i){if(n===$jsObjectPtr)return e;if(n===$jsObjectPtr.elem&&$throwRuntimeError("cannot internalize js.Object, use *js.Object instead"),e&&void 0!==e.__internal_object__)return $assertType(e.__internal_object__,n,!1);var a=$packages.time;if(void 0!==a&&n===a.Time)return null!==e&&void 0!==e&&e.constructor===Date||$throwRuntimeError("cannot internalize time.Time from "+typeof e+", must be Date"),a.Unix(new $Int64(0,0),new $Int64(0,1e6*e.getTime()));if(void 0===t&&(t=new Map),t.has(n)||t.set(n,new Map),t.get(n).has(e))return t.get(n).get(e);switch(n.kind){case $kindBool:return!!e;case $kindInt:return parseInt(e);case $kindInt8:return parseInt(e)<<24>>24;case $kindInt16:return parseInt(e)<<16>>16;case $kindInt32:return parseInt(e)>>0;case $kindUint:return parseInt(e);case $kindUint8:return parseInt(e)<<24>>>24;case $kindUint16:return parseInt(e)<<16>>>16;case $kindUint32:case $kindUintptr:return parseInt(e)>>>0;case $kindInt64:case $kindUint64:return new n(0,e);case $kindFloat32:case $kindFloat64:return parseFloat(e);case $kindArray:return e.length!==n.len&&$throwRuntimeError("got array with wrong size from JavaScript native"),$mapArray(e,function(e){return $internalize(e,n.elem,i)});case $kindFunc:return function(){for(var t=[],a=0;a<n.params.length;a++){if(n.variadic&&a===n.params.length-1){for(var o=n.params[a].elem,c=arguments[a],$=0;$<c.$length;$++)t.push($externalize(c.$array[c.$offset+$],o,i));break}t.push($externalize(arguments[a],n.params[a],i))}var u=e.apply(r,t);switch(n.results.length){case 0:return;case 1:return $internalize(u,n.results[0],i);default:for(a=0;a<n.results.length;a++)u[a]=$internalize(u[a],n.results[a],i);return u}};case $kindInterface:if(0!==n.methods.length&&$throwRuntimeError("cannot internalize "+n.string),null===e)return $ifaceNil;if(void 0===e)return new $jsObjectPtr(void 0);switch(e.constructor){case Int8Array:return new($sliceType($Int8))(e);case Int16Array:return new($sliceType($Int16))(e);case Int32Array:return new($sliceType($Int))(e);case Uint8Array:return new($sliceType($Uint8))(e);case Uint16Array:return new($sliceType($Uint16))(e);case Uint32Array:return new($sliceType($Uint))(e);case Float32Array:return new($sliceType($Float32))(e);case Float64Array:return new($sliceType($Float64))(e);case Array:return $internalize(e,$sliceType($emptyInterface),i);case Boolean:return new $Bool(!!e);case Date:return void 0===a?new $jsObjectPtr(e):new a.Time($internalize(e,a.Time,i));case function(){}.constructor:var o=$funcType([$sliceType($emptyInterface)],[$jsObjectPtr],!0);return new o($internalize(e,o,i));case Number:return new $Float64(parseFloat(e));case String:return new $String($internalize(e,$String,i));default:if($global.Node&&e instanceof $global.Node)return new $jsObjectPtr(e);var c=$mapType($String,$emptyInterface);return new c($internalize(e,c,r,t,i))}case $kindMap:var $={};t.get(n).set(e,$);for(var u=$keys(e),l=0;l<u.length;l++){var s=$internalize(u[l],n.key,r,t,i);$[n.key.keyFor(s)]={k:s,v:$internalize(e[u[l]],n.elem,r,t,i)}}return $;case $kindPtr:if(n.elem.kind===$kindStruct)return $internalize(e,n.elem,i);case $kindSlice:return new n($mapArray(e,function(e){return $internalize(e,n.elem,i)}));case $kindString:if(e=String(e),$isASCII(e))return e;var f="";for(l=0;l<e.length;){var d=e.charCodeAt(l);if(55296<=d&&d<=56319){var p=e.charCodeAt(l+1);f+=$encodeRune(1024*(d-55296)+p-56320+65536),l+=2}else f+=$encodeRune(d),l++}return f;case $kindStruct:var h={},k=function(n){if(n===$jsObjectPtr)return e;switch(n===$jsObjectPtr.elem&&$throwRuntimeError("cannot internalize js.Object, use *js.Object instead"),n.kind){case $kindPtr:return k(n.elem);case $kindStruct:var r=n.fields[0],t=k(r.typ);if(t!==h){var i=new n.ptr;return i[r.prop]=t,i}return h;default:return h}},y=k(n);if(y!==h)return y}$throwRuntimeError("cannot internalize "+n.string)},$copyIfRequired=function(e,n){if(e&&e.constructor&&e.constructor.copy)return new e.constructor($clone(e.$val,e.constructor));if(n.copy){var r=n.zero();return n.copy(r,e),r}return e},$isASCII=function(e){for(var n=0;n<e.length;n++)if(e.charCodeAt(n)>=128)return!1;return!0};

$packages["github.com/gopherjs/gopherjs/js"]=(function(){var $pkg={},$init,A,B,J,K,M,O,P,Q,R,S,T,G,H,L;A=$pkg.Object=$newType(0,$kindStruct,"js.Object",true,"github.com/gopherjs/gopherjs/js",true,function(object_){this.$val=this;if(arguments.length===0){this.object=null;return;}this.object=object_;});B=$pkg.Error=$newType(0,$kindStruct,"js.Error",true,"github.com/gopherjs/gopherjs/js",true,function(Object_){this.$val=this;if(arguments.length===0){this.Object=null;return;}this.Object=Object_;});J=$pkg.M=$newType(4,$kindMap,"js.M",true,"github.com/gopherjs/gopherjs/js",true,null);K=$pkg.S=$newType(12,$kindSlice,"js.S",true,"github.com/gopherjs/gopherjs/js",true,null);M=$sliceType($emptyInterface);O=$ptrType(A);P=$sliceType(O);Q=$funcType([P],[O],true);R=$funcType([],[O],false);S=$funcType([O],[],false);T=$ptrType(B);A.ptr.prototype.Get=function(a){var a,b;b=this;return b.object[$externalize(a,$String)];};A.prototype.Get=function(a){return this.$val.Get(a);};A.ptr.prototype.Set=function(a,b){var a,b,c;c=this;c.object[$externalize(a,$String)]=$externalize(b,$emptyInterface);};A.prototype.Set=function(a,b){return this.$val.Set(a,b);};A.ptr.prototype.Delete=function(a){var a,b;b=this;delete b.object[$externalize(a,$String)];};A.prototype.Delete=function(a){return this.$val.Delete(a);};A.ptr.prototype.Length=function(){var a;a=this;return $parseInt(a.object.length);};A.prototype.Length=function(){return this.$val.Length();};A.ptr.prototype.Index=function(a){var a,b;b=this;return b.object[a];};A.prototype.Index=function(a){return this.$val.Index(a);};A.ptr.prototype.SetIndex=function(a,b){var a,b,c;c=this;c.object[a]=$externalize(b,$emptyInterface);};A.prototype.SetIndex=function(a,b){return this.$val.SetIndex(a,b);};A.ptr.prototype.Call=function(a,b){var a,b,c,d;c=this;return(d=c.object,d[$externalize(a,$String)].apply(d,$externalize(b,M)));};A.prototype.Call=function(a,b){return this.$val.Call(a,b);};A.ptr.prototype.Invoke=function(a){var a,b;b=this;return b.object.apply(undefined,$externalize(a,M));};A.prototype.Invoke=function(a){return this.$val.Invoke(a);};A.ptr.prototype.New=function(a){var a,b;b=this;return new($global.Function.prototype.bind.apply(b.object,[undefined].concat($externalize(a,M))));};A.prototype.New=function(a){return this.$val.New(a);};A.ptr.prototype.Bool=function(){var a;a=this;return!!(a.object);};A.prototype.Bool=function(){return this.$val.Bool();};A.ptr.prototype.String=function(){var a;a=this;return $internalize(a.object,$String);};A.prototype.String=function(){return this.$val.String();};A.ptr.prototype.Int=function(){var a;a=this;return $parseInt(a.object)>>0;};A.prototype.Int=function(){return this.$val.Int();};A.ptr.prototype.Int64=function(){var a;a=this;return $internalize(a.object,$Int64);};A.prototype.Int64=function(){return this.$val.Int64();};A.ptr.prototype.Uint64=function(){var a;a=this;return $internalize(a.object,$Uint64);};A.prototype.Uint64=function(){return this.$val.Uint64();};A.ptr.prototype.Float=function(){var a;a=this;return $parseFloat(a.object);};A.prototype.Float=function(){return this.$val.Float();};A.ptr.prototype.Interface=function(){var a;a=this;return $internalize(a.object,$emptyInterface);};A.prototype.Interface=function(){return this.$val.Interface();};A.ptr.prototype.Unsafe=function(){var a;a=this;return a.object;};A.prototype.Unsafe=function(){return this.$val.Unsafe();};B.ptr.prototype.Error=function(){var a;a=this;return"JavaScript error: "+$internalize(a.Object.message,$String);};B.prototype.Error=function(){return this.$val.Error();};B.ptr.prototype.Stack=function(){var a;a=this;return $internalize(a.Object.stack,$String);};B.prototype.Stack=function(){return this.$val.Stack();};G=function(a){var a,b,c,d,e,f;b=a;c=new($global.Object)();c.__internal_object__=b;d=b.constructor.methods;e=0;while(true){if(!(e<$parseInt(d.length))){break;}f=[f];f[0]=d[e];if(!($internalize(f[0].pkg,$String)==="")){e=e+(1)>>0;continue;}c[$externalize($internalize(f[0].name,$String),$String)]=$externalize((function(f){return function(g){var g;return $externalizeFunction(b[$externalize($internalize(f[0].prop,$String),$String)],f[0].typ,$externalize(true,$Bool)).apply(b,$externalize(g,P));};})(f),Q);e=e+(1)>>0;}return c;};$pkg.MakeWrapper=G;H=function(a){var{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=[b];c=[c];b[0]=a;d=b[0].constructor;c[0]=new($global.Object)();e=(function(b,c){return function(e,f){var e,f;$global.Object.defineProperty(c[0],$externalize(e,$String),$externalize(f,J));};})(b,c);$r=e("__internal_object__",$makeMap($String.keyFor,[{k:"value",v:new $jsObjectPtr(b[0])}]));$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}f=$internalize(d.string,$String);g=$internalize(d.pkg,$String);h="";if(f.charCodeAt(0)===42){h="*";}i=0;while(true){if(!(i<f.length)){break;}if(f.charCodeAt(i)===46){f=$substring(f,(i+1>>0));break;}i=i+(1)>>0;}j=g+"."+h+f;$r=e("$type",$makeMap($String.keyFor,[{k:"value",v:new $String(j)}]));$s=2;case 2:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}k=null;l=new($global.Array)();m=d.methods;if(!(m===undefined)){l=l.concat(m);}n=d.elem;if(!(n===undefined)){k=n.fields;l=l.concat(n.methods);}else{k=d.fields;}o=0;case 3:if(!(o<$parseInt(l.length))){$s=4;continue;}p=[p];p[0]=l[o];if(!($internalize(p[0].pkg,$String)==="")){o=o+(1)>>0;$s=3;continue;}$r=e($internalize(p[0].prop,$String),$makeMap($String.keyFor,[{k:"value",v:new Q((function(b,c,p){return function(q){var q;return $externalizeFunction(b[0][$externalize($internalize(p[0].prop,$String),$String)],p[0].typ,$externalize(true,$Bool),H).apply(b[0],$externalize(q,P));};})(b,c,p))}]));$s=5;case 5:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}o=o+(1)>>0;$s=3;continue;case 4:if(!(k===undefined)){$s=6;continue;}$s=7;continue;case 6:q=0;case 8:if(!(q<$parseInt(k.length))){$s=9;continue;}r=[r];r[0]=k[q];if(!!!(r[0].exported)){q=q+(1)>>0;$s=8;continue;}$r=e($internalize(r[0].prop,$String),$makeMap($String.keyFor,[{k:"get",v:new R((function(b,c,r){return function(){var s;s=$copyIfRequired(b[0].$val[$externalize($internalize(r[0].prop,$String),$String)],r[0].typ);return $externalize(s,r[0].typ,H);};})(b,c,r))},{k:"set",v:new S((function(b,c,r){return function(s){var s,t;t=$internalize(s,r[0].typ,H);b[0].$val[$externalize($internalize(r[0].prop,$String),$String)]=t;};})(b,c,r))}]));$s=10;case 10:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}q=q+(1)>>0;$s=8;continue;case 9:case 7:$s=-1;return c[0];}return;}var $f={$blk:H,$c:true,$r,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,$s};return $f;};$pkg.MakeFullWrapper=H;L=function(){var a;a=new B.ptr(null);$unused(a);};O.methods=[{prop:"Get",name:"Get",pkg:"",typ:$funcType([$String],[O],false)},{prop:"Set",name:"Set",pkg:"",typ:$funcType([$String,$emptyInterface],[],false)},{prop:"Delete",name:"Delete",pkg:"",typ:$funcType([$String],[],false)},{prop:"Length",name:"Length",pkg:"",typ:$funcType([],[$Int],false)},{prop:"Index",name:"Index",pkg:"",typ:$funcType([$Int],[O],false)},{prop:"SetIndex",name:"SetIndex",pkg:"",typ:$funcType([$Int,$emptyInterface],[],false)},{prop:"Call",name:"Call",pkg:"",typ:$funcType([$String,M],[O],true)},{prop:"Invoke",name:"Invoke",pkg:"",typ:$funcType([M],[O],true)},{prop:"New",name:"New",pkg:"",typ:$funcType([M],[O],true)},{prop:"Bool",name:"Bool",pkg:"",typ:$funcType([],[$Bool],false)},{prop:"String",name:"String",pkg:"",typ:$funcType([],[$String],false)},{prop:"Int",name:"Int",pkg:"",typ:$funcType([],[$Int],false)},{prop:"Int64",name:"Int64",pkg:"",typ:$funcType([],[$Int64],false)},{prop:"Uint64",name:"Uint64",pkg:"",typ:$funcType([],[$Uint64],false)},{prop:"Float",name:"Float",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Interface",name:"Interface",pkg:"",typ:$funcType([],[$emptyInterface],false)},{prop:"Unsafe",name:"Unsafe",pkg:"",typ:$funcType([],[$Uintptr],false)}];T.methods=[{prop:"Error",name:"Error",pkg:"",typ:$funcType([],[$String],false)},{prop:"Stack",name:"Stack",pkg:"",typ:$funcType([],[$String],false)}];A.init("github.com/gopherjs/gopherjs/js",[{prop:"object",name:"object",embedded:false,exported:false,typ:O,tag:""}]);B.init("",[{prop:"Object",name:"Object",embedded:true,exported:true,typ:O,tag:""}]);J.init($String,$emptyInterface);K.init($emptyInterface);$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:L();}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["runtime"]=(function(){var $pkg={},$init,A,C,D,AT,AZ,BD,AM,E,AU;A=$packages["github.com/gopherjs/gopherjs/js"];C=$pkg._type=$newType(0,$kindStruct,"runtime._type",true,"runtime",false,function(str_){this.$val=this;if(arguments.length===0){this.str="";return;}this.str=str_;});D=$pkg.TypeAssertionError=$newType(0,$kindStruct,"runtime.TypeAssertionError",true,"runtime",true,function(_interface_,concrete_,asserted_,missingMethod_){this.$val=this;if(arguments.length===0){this._interface=AZ.nil;this.concrete=AZ.nil;this.asserted=AZ.nil;this.missingMethod="";return;}this._interface=_interface_;this.concrete=concrete_;this.asserted=asserted_;this.missingMethod=missingMethod_;});AT=$pkg.errorString=$newType(8,$kindString,"runtime.errorString",true,"runtime",false,null);AZ=$ptrType(C);BD=$ptrType(D);C.ptr.prototype.string=function(){var a;a=this;return a.str;};C.prototype.string=function(){return this.$val.string();};C.ptr.prototype.pkgpath=function(){var a;a=this;return"";};C.prototype.pkgpath=function(){return this.$val.pkgpath();};D.ptr.prototype.RuntimeError=function(){};D.prototype.RuntimeError=function(){return this.$val.RuntimeError();};D.ptr.prototype.Error=function(){var a,b,c,d,e;a=this;b="interface";if(!(a._interface===AZ.nil)){b=a._interface.string();}c=a.asserted.string();if(a.concrete===AZ.nil){return"interface conversion: "+b+" is nil, not "+c;}d=a.concrete.string();if(a.missingMethod===""){e="interface conversion: "+b+" is "+d+", not "+c;if(d===c){if(!(a.concrete.pkgpath()===a.asserted.pkgpath())){e=e+(" (types from different packages)");}else{e=e+(" (types from different scopes)");}}return e;}return"interface conversion: "+d+" is not "+c+": missing method "+a.missingMethod;};D.prototype.Error=function(){return this.$val.Error();};E=function(){var a,b;a=$packages[$externalize("github.com/gopherjs/gopherjs/js",$String)];$jsObjectPtr=a.Object.ptr;$jsErrorPtr=a.Error.ptr;$throwRuntimeError=AU;AM=$internalize($goVersion,$String);b=$ifaceNil;b=new D.ptr(AZ.nil,AZ.nil,AZ.nil,"");$unused(b);};AT.prototype.RuntimeError=function(){var a;a=this.$val;};$ptrType(AT).prototype.RuntimeError=function(){return new AT(this.$get()).RuntimeError();};AT.prototype.Error=function(){var a;a=this.$val;return"runtime error: "+(a);};$ptrType(AT).prototype.Error=function(){return new AT(this.$get()).Error();};AU=function(a){var a;$panic(new AT((a)));};AZ.methods=[{prop:"string",name:"string",pkg:"runtime",typ:$funcType([],[$String],false)},{prop:"pkgpath",name:"pkgpath",pkg:"runtime",typ:$funcType([],[$String],false)}];BD.methods=[{prop:"RuntimeError",name:"RuntimeError",pkg:"",typ:$funcType([],[],false)},{prop:"Error",name:"Error",pkg:"",typ:$funcType([],[$String],false)}];AT.methods=[{prop:"RuntimeError",name:"RuntimeError",pkg:"",typ:$funcType([],[],false)},{prop:"Error",name:"Error",pkg:"",typ:$funcType([],[$String],false)}];C.init("runtime",[{prop:"str",name:"str",embedded:false,exported:false,typ:$String,tag:""}]);D.init("runtime",[{prop:"_interface",name:"_interface",embedded:false,exported:false,typ:AZ,tag:""},{prop:"concrete",name:"concrete",embedded:false,exported:false,typ:AZ,tag:""},{prop:"asserted",name:"asserted",embedded:false,exported:false,typ:AZ,tag:""},{prop:"missingMethod",name:"missingMethod",embedded:false,exported:false,typ:$String,tag:""}]);$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:$r=A.$init();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}AM="";E();}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["math/bits"]=(function(){var $pkg={},$init;$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["math"]=(function(){var $pkg={},$init,B,A,IT,IU,IV,IW,FL,FM,FN,FO,FP,HH,EI,EX,EY,FK,GH,GK,GL,GM,GS,GT,GW,GZ,HD,HI,HL,HM;B=$packages["github.com/gopherjs/gopherjs/js"];A=$packages["math/bits"];IT=$arrayType($Uint32,2);IU=$arrayType($Float32,2);IV=$arrayType($Float64,1);IW=$structType("math",[{prop:"uint32array",name:"uint32array",embedded:false,exported:false,typ:IT,tag:""},{prop:"float32array",name:"float32array",embedded:false,exported:false,typ:IU,tag:""},{prop:"float64array",name:"float64array",embedded:false,exported:false,typ:IV,tag:""}]);EI=function(av){var av,aw,ax,ay,az,ba,bb;aw=HL(av);ax=((($shiftRightUint64(aw,52).$low>>>0))&2047)>>>0;if(ax<1023){aw=(ay=new $Uint64(2147483648,0),new $Uint64(aw.$high&ay.$high,(aw.$low&ay.$low)>>>0));if(ax===1022){aw=(az=new $Uint64(1072693248,0),new $Uint64(aw.$high|az.$high,(aw.$low|az.$low)>>>0));}}else if(ax<1075){ax=ax-(1023)>>>0;aw=(ba=$shiftRightUint64(new $Uint64(524288,0),ax),new $Uint64(aw.$high+ba.$high,aw.$low+ba.$low));aw=(bb=$shiftRightUint64(new $Uint64(1048575,4294967295),ax),new $Uint64(aw.$high&~bb.$high,(aw.$low&~bb.$low)>>>0));}return HM(aw);};$pkg.Round=EI;EX=function(av,aw){var av,aw;if(GL(av,1)||GL(aw,1)){return GK(1);}else if(GM(av)||GM(aw)){return GW();}else if((av===0)&&(av===aw)){if(GZ(av)){return aw;}return av;}if(av>aw){return av;}return aw;};EY=function(av,aw){var av,aw;if(GL(av,-1)||GL(aw,-1)){return GK(-1);}else if(GM(av)||GM(aw)){return GW();}else if((av===0)&&(av===aw)){if(GZ(av)){return av;}return aw;}if(av<aw){return av;}return aw;};FK=function(av){var av,aw;return HM((aw=HL(av),new $Uint64(aw.$high&~2147483648,(aw.$low&~0)>>>0)));};$pkg.Abs=FK;GH=function(av){var av;return $parseFloat(FL.floor(av));};$pkg.Floor=GH;GK=function(av){var av;if(av>=0){return FN;}else{return FO;}};$pkg.Inf=GK;GL=function(av,aw){var av,aw;if(av===FN){return aw>=0;}if(av===FO){return aw<=0;}return false;};$pkg.IsInf=GL;GM=function(av){var av,aw;aw=false;aw=!((av===av));return aw;};$pkg.IsNaN=GM;GS=function(av,aw){var av,aw;return EX(av,aw);};$pkg.Max=GS;GT=function(av,aw){var av,aw;return EY(av,aw);};$pkg.Min=GT;GW=function(){return FP;};$pkg.NaN=GW;GZ=function(av){var av;return av<0||(1/av===FO);};$pkg.Signbit=GZ;HD=function(av){var av;return $parseFloat(FL.sqrt(av));};$pkg.Sqrt=HD;HI=function(){var av;av=new($global.ArrayBuffer)(8);HH.uint32array=new($global.Uint32Array)(av);HH.float32array=new($global.Float32Array)(av);HH.float64array=new($global.Float64Array)(av);};HL=function(av){var av,aw,ax;HH.float64array[0]=av;return(aw=$shiftLeft64((new $Uint64(0,HH.uint32array[1])),32),ax=(new $Uint64(0,HH.uint32array[0])),new $Uint64(aw.$high+ax.$high,aw.$low+ax.$low));};$pkg.Float64bits=HL;HM=function(av){var av;HH.uint32array[0]=((av.$low>>>0));HH.uint32array[1]=(($shiftRightUint64(av,32).$low>>>0));return HH.float64array[0];};$pkg.Float64frombits=HM;$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:$r=B.$init();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$r=A.$init();$s=2;case 2:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}HH=new IW.ptr(IT.zero(),IU.zero(),IV.zero());FL=$global.Math;FM=0;FN=1/FM;FO=-1/FM;FP=$parseFloat($NaN);HI();}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["resolv"]=(function(){var $pkg={},$init,A,B,G,I,J,L,N,R,S,U,X,Z,AB,AC,AD,AE,AF,AG,AH,AI,AJ,AK,AL,AM,AN,AO,AP,AQ,AR,AS,H,K,M,O,P,T,V,W,Y,AA;A=$packages["math"];B=$pkg.Vector=$newType(12,$kindSlice,"resolv.Vector",true,"resolv",true,null);G=$pkg.Space=$newType(0,$kindStruct,"resolv.Space",true,"resolv",true,function(Cells_,CellWidth_,CellHeight_){this.$val=this;if(arguments.length===0){this.Cells=AD.nil;this.CellWidth=0;this.CellHeight=0;return;}this.Cells=Cells_;this.CellWidth=CellWidth_;this.CellHeight=CellHeight_;});I=$pkg.Shape=$newType(8,$kindInterface,"resolv.Shape",true,"resolv",true,null);J=$pkg.Line=$newType(0,$kindStruct,"resolv.Line",true,"resolv",true,function(Start_,End_){this.$val=this;if(arguments.length===0){this.Start=B.nil;this.End=B.nil;return;}this.Start=Start_;this.End=End_;});L=$pkg.ConvexPolygon=$newType(0,$kindStruct,"resolv.ConvexPolygon",true,"resolv",true,function(Points_,X_,Y_,Closed_){this.$val=this;if(arguments.length===0){this.Points=AH.nil;this.X=0;this.Y=0;this.Closed=false;return;}this.Points=Points_;this.X=X_;this.Y=Y_;this.Closed=Closed_;});N=$pkg.ContactSet=$newType(0,$kindStruct,"resolv.ContactSet",true,"resolv",true,function(Points_,MTV_,Center_){this.$val=this;if(arguments.length===0){this.Points=AL.nil;this.MTV=B.nil;this.Center=B.nil;return;}this.Points=Points_;this.MTV=MTV_;this.Center=Center_;});R=$pkg.AnyObj=$newType(8,$kindInterface,"resolv.AnyObj",true,"resolv",true,null);S=$pkg.RingBuffer=$newType(0,$kindStruct,"resolv.RingBuffer",true,"resolv",true,function(Ed_,St_,EdFrameId_,StFrameId_,N_,Cnt_,Eles_){this.$val=this;if(arguments.length===0){this.Ed=0;this.St=0;this.EdFrameId=0;this.StFrameId=0;this.N=0;this.Cnt=0;this.Eles=AO.nil;return;}this.Ed=Ed_;this.St=St_;this.EdFrameId=EdFrameId_;this.StFrameId=StFrameId_;this.N=N_;this.Cnt=Cnt_;this.Eles=Eles_;});U=$pkg.Object=$newType(0,$kindStruct,"resolv.Object",true,"resolv",true,function(Shape_,Space_,X_,Y_,W_,H_,TouchingCells_,Data_,ignoreList_,tags_){this.$val=this;if(arguments.length===0){this.Shape=$ifaceNil;this.Space=AE.nil;this.X=0;this.Y=0;this.W=0;this.H=0;this.TouchingCells=AH.nil;this.Data=$ifaceNil;this.ignoreList=false;this.tags=AP.nil;return;}this.Shape=Shape_;this.Space=Space_;this.X=X_;this.Y=Y_;this.W=W_;this.H=H_;this.TouchingCells=TouchingCells_;this.Data=Data_;this.ignoreList=ignoreList_;this.tags=tags_;});X=$pkg.Collision=$newType(0,$kindStruct,"resolv.Collision",true,"resolv",true,function(checkingObject_,dx_,dy_,Objects_,Cells_){this.$val=this;if(arguments.length===0){this.checkingObject=AF.nil;this.dx=0;this.dy=0;this.Objects=AH.nil;this.Cells=AH.nil;return;}this.checkingObject=checkingObject_;this.dx=dx_;this.dy=dy_;this.Objects=Objects_;this.Cells=Cells_;});Z=$pkg.Cell=$newType(0,$kindStruct,"resolv.Cell",true,"resolv",true,function(X_,Y_,Objects_){this.$val=this;if(arguments.length===0){this.X=0;this.Y=0;this.Objects=AH.nil;return;}this.X=X_;this.Y=Y_;this.Objects=Objects_;});AB=$ptrType(Z);AC=$sliceType(AB);AD=$sliceType(AC);AE=$ptrType(G);AF=$ptrType(U);AG=$sliceType(AF);AH=$ptrType(S);AI=$sliceType($Float64);AJ=$ptrType(J);AK=$sliceType(AJ);AL=$sliceType(B);AM=$ptrType(L);AN=$ptrType(N);AO=$sliceType(R);AP=$sliceType($String);AQ=$ptrType(I);AR=$ptrType(X);AS=$mapType(AF,$Bool);B.prototype.Clone=function(){var a,b;a=this;b=$makeSlice(B,a.$length);$copySlice(b,a);return b;};$ptrType(B).prototype.Clone=function(){return this.$get().Clone();};B.prototype.Magnitude=function(){var a;a=this;return A.Sqrt(a.Magnitude2());};$ptrType(B).prototype.Magnitude=function(){return this.$get().Magnitude();};B.prototype.Magnitude2=function(){var a,b,c,d,e;a=this;b=0;c=a;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);b=b+(e*e);d++;}return b;};$ptrType(B).prototype.Magnitude2=function(){return this.$get().Magnitude2();};B.prototype.Unit=function(){var a,b,c;a=this;b=a.Magnitude();if(b<1e-08){return a;}c=0;while(true){if(!(c<a.$length)){break;}((c<0||c>=a.$length)?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+c]=((c<0||c>=a.$length)?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+c])/b);c=c+(1)>>0;}return a;};$ptrType(B).prototype.Unit=function(){return this.$get().Unit();};B.prototype.X=function(){var a;a=this;if(a.$length<1){return 0;}return(0>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+0]);};$ptrType(B).prototype.X=function(){return this.$get().X();};B.prototype.Y=function(){var a;a=this;if(a.$length<2){return 0;}return(1>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+1]);};$ptrType(B).prototype.Y=function(){return this.$get().Y();};B.prototype.Z=function(){var a;a=this;if(a.$length<3){return 0;}return(2>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+2]);};$ptrType(B).prototype.Z=function(){return this.$get().Z();};H=function(a,b,c,d){var a,b,c,d,e,f,g;e=new G.ptr(AD.nil,0,0);e.CellWidth=c;e.CellHeight=d;e.Resize((f=a/c,(f===f&&f!==1/0&&f!==-1/0)?f>>0:$throwRuntimeError("integer divide by zero")),(g=b/d,(g===g&&g!==1/0&&g!==-1/0)?g>>0:$throwRuntimeError("integer divide by zero")));return e;};$pkg.NewSpace=H;G.ptr.prototype.AddSingle=function(a){var{a,b,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=this;if(b===AE.nil){$panic(new $String("ERROR: space is nil"));}a.Space=b;$r=a.Update();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$s=-1;return;}return;}var $f={$blk:G.ptr.prototype.AddSingle,$c:true,$r,a,b,$s};return $f;};G.prototype.AddSingle=function(a){return this.$val.AddSingle(a);};G.ptr.prototype.Add=function(a){var{a,b,c,d,e,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=this;if(b===AE.nil){$panic(new $String("ERROR: space is nil"));}c=a;d=0;case 1:if(!(d<c.$length)){$s=2;continue;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);e.Space=b;$r=e.Update();$s=3;case 3:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}d++;$s=1;continue;case 2:$s=-1;return;}return;}var $f={$blk:G.ptr.prototype.Add,$c:true,$r,a,b,c,d,e,$s};return $f;};G.prototype.Add=function(a){return this.$val.Add(a);};G.ptr.prototype.RemoveSingle=function(a){var a,b,c;b=this;if(b===AE.nil){$panic(new $String("ERROR: space is nil"));}while(true){if(!(0<a.TouchingCells.Cnt)){break;}c=$assertType(a.TouchingCells.Pop(),AB);c.unregister(a);}a.Space=AE.nil;};G.prototype.RemoveSingle=function(a){return this.$val.RemoveSingle(a);};G.ptr.prototype.Remove=function(a){var a,b,c,d,e,f;b=this;if(b===AE.nil){$panic(new $String("ERROR: space is nil"));}c=a;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);while(true){if(!(0<e.TouchingCells.Cnt)){break;}f=$assertType(e.TouchingCells.Pop(),AB);f.unregister(e);}e.Space=AE.nil;d++;}};G.prototype.Remove=function(a){return this.$val.Remove(a);};G.ptr.prototype.Objects=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a=this;b=$makeMap(AF.keyFor,[]);c=new AG([]);d=a.Cells.$length;e=0;while(true){if(!(e<d)){break;}g=(f=a.Cells,((e<0||e>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+e])).$length;h=0;while(true){if(!(h<g)){break;}k=(i=(j=a.Cells,((e<0||e>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+e])),((h<0||h>=i.$length)?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+h])).Objects;l=k.StFrameId;while(true){if(!(l<k.EdFrameId)){break;}m=$assertType(k.GetByFrameId(l),AF);n=(o=b[AF.keyFor(m)],o!==undefined?[o.v,true]:[false,false]);p=n[1];if(!p){c=$append(c,m);q=m;(b||$throwRuntimeError("assignment to entry in nil map"))[AF.keyFor(q)]={k:q,v:true};}l=l+(1)>>0;}h=h+(1)>>0;}e=e+(1)>>0;}return c;};G.prototype.Objects=function(){return this.$val.Objects();};G.ptr.prototype.Resize=function(a,b){var a,b,c,d,e,f,g,h;c=this;c.Cells=$makeSlice(AD,b);d=0;while(true){if(!(d<b)){break;}(e=c.Cells,((d<0||d>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+d]=$makeSlice(AC,a)));f=0;while(true){if(!(f<a)){break;}(g=(h=c.Cells,((d<0||d>=h.$length)?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+d])),((f<0||f>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+f]=AA(f,d)));f=f+(1)>>0;}d=d+(1)>>0;}};G.prototype.Resize=function(a,b){return this.$val.Resize(a,b);};G.ptr.prototype.Cell=function(a,b){var a,b,c,d,e,f;c=this;if(b>=0&&b<c.Cells.$length&&a>=0&&a<(d=c.Cells,((b<0||b>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+b])).$length){return(e=(f=c.Cells,((b<0||b>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+b])),((a<0||a>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+a]));}return AB.nil;};G.prototype.Cell=function(a,b){return this.$val.Cell(a,b);};G.ptr.prototype.CheckCells=function(a,b,c,d,e){var a,b,c,d,e,f,g,h,i,j,k,l;f=this;g=a;while(true){if(!(g<(a+c>>0))){break;}h=b;while(true){if(!(h<(b+d>>0))){break;}i=f.Cell(g,h);if(!(i===AB.nil)){j=i.Objects;if(e.$length>0){if(i.ContainsTags(e)){k=j.StFrameId;while(true){if(!(k<j.EdFrameId)){break;}l=$assertType(j.GetByFrameId(k),AF);if(l.HasTags(e)){return l;}k=k+(1)>>0;}}}else if(i.Occupied()){return $assertType(j.GetByFrameId(j.StFrameId),AF);}}h=h+(1)>>0;}g=g+(1)>>0;}return AF.nil;};G.prototype.CheckCells=function(a,b,c,d,e){return this.$val.CheckCells(a,b,c,d,e);};G.ptr.prototype.CheckCellsWorld=function(a,b,c,d,e){var a,b,c,d,e,f,g,h,i,j,k,l;f=this;g=f.WorldToSpace(a,b);h=g[0];i=g[1];j=f.WorldToSpace(c,d);k=j[0];l=j[1];return f.CheckCells(h,i,k,l,e);};G.prototype.CheckCellsWorld=function(a,b,c,d,e){return this.$val.CheckCellsWorld(a,b,c,d,e);};G.ptr.prototype.UnregisterAllObjects=function(){var a,b,c,d,e,f,g,h,i,j;a=this;b=0;while(true){if(!(b<a.Cells.$length)){break;}c=0;while(true){if(!(c<(d=a.Cells,((b<0||b>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+b])).$length)){break;}g=(e=(f=a.Cells,((b<0||b>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+b])),((c<0||c>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+c]));h=g.Objects;i=h.StFrameId;while(true){if(!(i<h.EdFrameId)){break;}j=$assertType(h.GetByFrameId(i),AF);a.RemoveSingle(j);i=i+(1)>>0;}c=c+(1)>>0;}b=b+(1)>>0;}};G.prototype.UnregisterAllObjects=function(){return this.$val.UnregisterAllObjects();};G.ptr.prototype.WorldToSpace=function(a,b){var a,b,c,d,e;c=this;d=((A.Floor(a/(c.CellWidth))>>0));e=((A.Floor(b/(c.CellHeight))>>0));return[d,e];};G.prototype.WorldToSpace=function(a,b){return this.$val.WorldToSpace(a,b);};G.ptr.prototype.SpaceToWorld=function(a,b){var a,b,c,d,e;c=this;d=(($imul(a,c.CellWidth)));e=(($imul(b,c.CellHeight)));return[d,e];};G.prototype.SpaceToWorld=function(a,b){return this.$val.SpaceToWorld(a,b);};G.ptr.prototype.Height=function(){var a;a=this;return a.Cells.$length;};G.prototype.Height=function(){return this.$val.Height();};G.ptr.prototype.Width=function(){var a,b;a=this;if(a.Cells.$length>0){return(b=a.Cells,(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0])).$length;}return 0;};G.prototype.Width=function(){return this.$val.Width();};G.ptr.prototype.CellsInLine=function(a,b,c,d){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;e=this;f=new AC([]);g=e.Cell(a,b);h=e.Cell(c,d);if(!(g===AB.nil)&&!(h===AB.nil)){i=new B([((c-a>>0)),((d-b>>0))]).Unit();(0>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+0]=(0>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+0])*(((j=e.CellWidth/2,(j===j&&j!==1/0&&j!==-1/0)?j>>0:$throwRuntimeError("integer divide by zero")))));(1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1]=(1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1])*(((k=e.CellHeight/2,(k===k&&k!==1/0&&k!==-1/0)?k>>0:$throwRuntimeError("integer divide by zero")))));l=e.SpaceToWorld(a,b);m=l[0];n=l[1];q=new B([m+((o=e.CellWidth/2,(o===o&&o!==1/0&&o!==-1/0)?o>>0:$throwRuntimeError("integer divide by zero"))),n+((p=e.CellHeight/2,(p===p&&p!==1/0&&p!==-1/0)?p>>0:$throwRuntimeError("integer divide by zero")))]);r=false;while(true){if(!(!(g===AB.nil))){break;}if(g===h){f=$append(f,g);break;}f=$append(f,g);if(r){(1>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+1]=(1>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+1])+((1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1])));}else{(0>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+0]=(0>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+0])+((0>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+0])));}s=e.WorldToSpace((0>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+0]),(1>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+1]));t=s[0];u=s[1];v=e.Cell(t,u);if(!(v===g)){g=v;}r=!r;}}return f;};G.prototype.CellsInLine=function(a,b,c,d){return this.$val.CellsInLine(a,b,c,d);};K=function(a,b,c,d){var a,b,c,d,e;e=new J.ptr(B.nil,B.nil);e.Start=new B([a,b]);e.End=new B([c,d]);return e;};$pkg.NewLine=K;J.ptr.prototype.Normal=function(){var a,b,c,d,e,f,g;a=this;d=(b=a.End,(1>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+1]))-(c=a.Start,(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]));g=(e=a.End,(0>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+0]))-(f=a.Start,(0>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+0]));return new B([d,-g]).Unit();};J.prototype.Normal=function(){return this.$val.Normal();};J.ptr.prototype.IntersectionPointsLine=function(a){var a,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;b=this;k=((c=b.End,(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0]))-(d=b.Start,(0>=d.$length?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+0])))*((e=a.End,(1>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+1]))-(f=a.Start,(1>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+1])))-((g=a.End,(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0]))-(h=a.Start,(0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0])))*((i=b.End,(1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1]))-(j=b.Start,(1>=j.$length?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+1])));if(!((k===0))){t=((((l=b.Start,(1>=l.$length?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+1]))-(m=a.Start,(1>=m.$length?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+1])))*((n=a.End,(0>=n.$length?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+0]))-(o=a.Start,(0>=o.$length?($throwRuntimeError("index out of range"),undefined):o.$array[o.$offset+0]))))-(((p=b.Start,(0>=p.$length?($throwRuntimeError("index out of range"),undefined):p.$array[p.$offset+0]))-(q=a.Start,(0>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+0])))*((r=a.End,(1>=r.$length?($throwRuntimeError("index out of range"),undefined):r.$array[r.$offset+1]))-(s=a.Start,(1>=s.$length?($throwRuntimeError("index out of range"),undefined):s.$array[s.$offset+1]))))+1)/k;ac=((((u=b.Start,(1>=u.$length?($throwRuntimeError("index out of range"),undefined):u.$array[u.$offset+1]))-(v=a.Start,(1>=v.$length?($throwRuntimeError("index out of range"),undefined):v.$array[v.$offset+1])))*((w=b.End,(0>=w.$length?($throwRuntimeError("index out of range"),undefined):w.$array[w.$offset+0]))-(x=b.Start,(0>=x.$length?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+0]))))-(((y=b.Start,(0>=y.$length?($throwRuntimeError("index out of range"),undefined):y.$array[y.$offset+0]))-(z=a.Start,(0>=z.$length?($throwRuntimeError("index out of range"),undefined):z.$array[z.$offset+0])))*((aa=b.End,(1>=aa.$length?($throwRuntimeError("index out of range"),undefined):aa.$array[aa.$offset+1]))-(ab=b.Start,(1>=ab.$length?($throwRuntimeError("index out of range"),undefined):ab.$array[ab.$offset+1]))))+1)/k;if((0<t&&t<1)&&(0<ac&&ac<1)){af=(ad=b.End,(0>=ad.$length?($throwRuntimeError("index out of range"),undefined):ad.$array[ad.$offset+0]))-(ae=b.Start,(0>=ae.$length?($throwRuntimeError("index out of range"),undefined):ae.$array[ae.$offset+0]));ai=(ag=b.End,(1>=ag.$length?($throwRuntimeError("index out of range"),undefined):ag.$array[ag.$offset+1]))-(ah=b.Start,(1>=ah.$length?($throwRuntimeError("index out of range"),undefined):ah.$array[ah.$offset+1]));return new B([(aj=b.Start,(0>=aj.$length?($throwRuntimeError("index out of range"),undefined):aj.$array[aj.$offset+0]))+(t*af),(ak=b.Start,(1>=ak.$length?($throwRuntimeError("index out of range"),undefined):ak.$array[ak.$offset+1]))+(t*ai)]);}}return B.nil;};J.prototype.IntersectionPointsLine=function(a){return this.$val.IntersectionPointsLine(a);};M=function(a){var a,b;b=new L.ptr(AH.nil,0,0,false);b.Points=T(6);b.Closed=true;b.AddPoints(a);return b;};$pkg.NewConvexPolygon=M;L.ptr.prototype.GetPointByOffset=function(a){var a,b;b=this;if(b.Points.Cnt<=a){return B.nil;}return $assertType(b.Points.GetByFrameId(b.Points.StFrameId+a>>0),B);};L.prototype.GetPointByOffset=function(a){return this.$val.GetPointByOffset(a);};L.ptr.prototype.Clone=function(){var a,b,c;a=this;b=M(AI.nil);b.X=a.X;b.Y=a.Y;c=0;while(true){if(!(c<a.Points.Cnt)){break;}b.Points.Put(a.GetPointByOffset(c));c=c+(1)>>0;}b.Closed=a.Closed;return b;};L.prototype.Clone=function(){return this.$val.Clone();};L.ptr.prototype.AddPoints=function(a){var a,b,c,d;b=this;c=0;while(true){if(!(c<a.$length)){break;}b.Points.Put(new B([((c<0||c>=a.$length)?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+c]),(d=c+1>>0,((d<0||d>=a.$length)?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+d]))]));c=c+(2)>>0;}};L.prototype.AddPoints=function(a){return this.$val.AddPoints(a);};L.ptr.prototype.UpdateAsRectangle=function(a,b,c,d){var a,b,c,d,e,f,g,h;e=this;if(!((4===e.Points.Cnt))){$panic(new $String("ConvexPolygon not having exactly 4 vertices to form a rectangle#1!"));}f=0;while(true){if(!(f<e.Points.Cnt)){break;}g=e.GetPointByOffset(f);if(B.nil===g){$panic(new $String("ConvexPolygon not having exactly 4 vertices to form a rectangle#2!"));}h=f;if(h===(0)){(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0]=a);(1>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+1]=b);}else if(h===(1)){(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0]=a+c);(1>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+1]=b);}else if(h===(2)){(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0]=a+c);(1>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+1]=b+d);}else if(h===(3)){(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0]=a);(1>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+1]=b+d);}f=f+(1)>>0;}return true;};L.prototype.UpdateAsRectangle=function(a,b,c,d){return this.$val.UpdateAsRectangle(a,b,c,d);};L.ptr.prototype.Lines=function(){var a,b,c,d,e,f,g,h,i,j,k;a=this;b=a.Transformed();c=b.$length;if(!a.Closed){c=c-(1)>>0;}d=$makeSlice(AK,c);e=0;while(true){if(!(e<c)){break;}f=((e<0||e>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+e]);g=(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0]);h=f;i=g;if(e<(b.$length-1>>0)){i=(j=e+1>>0,((j<0||j>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+j]));}k=K((0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0]),(1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1]),(0>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+0]),(1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1]));((e<0||e>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+e]=k);e=e+(1)>>0;}return d;};L.prototype.Lines=function(){return this.$val.Lines();};L.ptr.prototype.Transformed=function(){var a,b,c,d;a=this;b=$makeSlice(AL,a.Points.Cnt);c=0;while(true){if(!(c<a.Points.Cnt)){break;}d=a.GetPointByOffset(c);((c<0||c>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+c]=new B([(0>=d.$length?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+0])+a.X,(1>=d.$length?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+1])+a.Y]));c=c+(1)>>0;}return b;};L.prototype.Transformed=function(){return this.$val.Transformed();};L.ptr.prototype.Bounds=function(){var a,b,c,d,e,f,g,h;a=this;b=a.Transformed();e=new B([(c=(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0]),(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0])),(d=(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0]),(1>=d.$length?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+1]))]);f=e.Clone();g=0;while(true){if(!(g<b.$length)){break;}h=((g<0||g>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+g]);if((0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0])<(0>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+0])){(0>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+0]=(0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0]));}else if((0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0])>(0>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+0])){(0>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+0]=(0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0]));}if((1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1])<(1>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+1])){(1>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+1]=(1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1]));}else if((1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1])>(1>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+1])){(1>=f.$length?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+1]=(1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1]));}g=g+(1)>>0;}return[e,f];};L.prototype.Bounds=function(){return this.$val.Bounds();};L.ptr.prototype.Position=function(){var a;a=this;return[a.X,a.Y];};L.prototype.Position=function(){return this.$val.Position();};L.ptr.prototype.SetPosition=function(a,b){var a,b,c;c=this;c.X=a;c.Y=b;};L.prototype.SetPosition=function(a,b){return this.$val.SetPosition(a,b);};L.ptr.prototype.SetPositionVec=function(a){var a,b;b=this;b.X=a.X();b.Y=a.Y();};L.prototype.SetPositionVec=function(a){return this.$val.SetPositionVec(a);};L.ptr.prototype.Move=function(a,b){var a,b,c;c=this;c.X=c.X+(a);c.Y=c.Y+(b);};L.prototype.Move=function(a,b){return this.$val.Move(a,b);};L.ptr.prototype.MoveVec=function(a){var a,b;b=this;b.X=b.X+(a.X());b.Y=b.Y+(a.Y());};L.prototype.MoveVec=function(a){return this.$val.MoveVec(a);};L.ptr.prototype.SATAxes=function(){var a,b,c,d,e,f,g;a=this;b=a.Lines();c=$makeSlice(AL,b.$length);d=b;e=0;while(true){if(!(e<d.$length)){break;}f=e;g=((e<0||e>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+e]);((f<0||f>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+f]=g.Normal());e++;}return c;};L.prototype.SATAxes=function(){return this.$val.SATAxes();};L.ptr.prototype.PointInside=function(a){var a,b,c,d,e,f,g;b=this;c=K((0>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+0]),(1>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+1]),(0>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+0])+9.99999999999e+11,(1>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+1]));d=0;e=b.Lines();f=0;while(true){if(!(f<e.$length)){break;}g=((f<0||f>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+f]);if(!(g.IntersectionPointsLine(c)===B.nil)){d=d+(1)>>0;}f++;}return d===1;};L.prototype.PointInside=function(a){return this.$val.PointInside(a);};O=function(){var a;a=new N.ptr(AL.nil,B.nil,B.nil);a.Points=new AL([]);a.MTV=new B([0,0]);a.Center=new B([]);return a;};$pkg.NewContactSet=O;N.ptr.prototype.LeftmostPoint=function(){var a,b,c,d,e;a=this;b=B.nil;c=a.Points;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);if(b===B.nil||(0>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+0])<(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0])){b=e;}d++;}return b;};N.prototype.LeftmostPoint=function(){return this.$val.LeftmostPoint();};N.ptr.prototype.RightmostPoint=function(){var a,b,c,d,e;a=this;b=B.nil;c=a.Points;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);if(b===B.nil||(0>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+0])>(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0])){b=e;}d++;}return b;};N.prototype.RightmostPoint=function(){return this.$val.RightmostPoint();};N.ptr.prototype.TopmostPoint=function(){var a,b,c,d,e;a=this;b=B.nil;c=a.Points;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);if(b===B.nil||(1>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+1])<(1>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+1])){b=e;}d++;}return b;};N.prototype.TopmostPoint=function(){return this.$val.TopmostPoint();};N.ptr.prototype.BottommostPoint=function(){var a,b,c,d,e;a=this;b=B.nil;c=a.Points;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);if(b===B.nil||(1>=e.$length?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+1])>(1>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+1])){b=e;}d++;}return b;};N.prototype.BottommostPoint=function(){return this.$val.BottommostPoint();};L.ptr.prototype.Intersection=function(a,b,c){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;d=this;e=O();f=d.X;g=d.Y;d.X=d.X+(a);d.Y=d.Y+(b);h=$assertType(c,AM,true);i=h[0];j=h[1];if(j){k=d.Lines();l=0;while(true){if(!(l<k.$length)){break;}m=((l<0||l>=k.$length)?($throwRuntimeError("index out of range"),undefined):k.$array[k.$offset+l]);n=i.Lines();o=0;while(true){if(!(o<n.$length)){break;}p=((o<0||o>=n.$length)?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+o]);q=m.IntersectionPointsLine(p);if(!(q===B.nil)){e.Points=$append(e.Points,q);}o++;}l++;}}if(e.Points.$length>0){}else{e=AN.nil;}d.X=f;d.Y=g;return e;};L.prototype.Intersection=function(a,b,c){return this.$val.Intersection(a,b,c);};P=function(a,b,c,d){var a,b,c,d;return M(new AI([a,b,a+c,b,a+c,b+d,a,b+d]));};$pkg.NewRectangle=P;T=function(a){var a,b;b=new S.ptr(0,0,0,0,0,0,AO.nil);b.Ed=0;b.St=0;b.EdFrameId=0;b.StFrameId=0;b.N=a;b.Cnt=0;b.Eles=$makeSlice(AO,a);return b;};$pkg.NewRingBuffer=T;S.ptr.prototype.DryPut=function(){var a;a=this;while(true){if(!(0<a.Cnt&&a.Cnt>=a.N)){break;}a.Pop();}a.EdFrameId=a.EdFrameId+(1)>>0;a.Cnt=a.Cnt+(1)>>0;a.Ed=a.Ed+(1)>>0;if(a.Ed>=a.N){a.Ed=a.Ed-(a.N)>>0;}};S.prototype.DryPut=function(){return this.$val.DryPut();};S.ptr.prototype.Put=function(a){var a,b,c,d;b=this;while(true){if(!(0<b.Cnt&&b.Cnt>=b.N)){break;}b.Pop();}(c=b.Eles,d=b.Ed,((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]=a));b.EdFrameId=b.EdFrameId+(1)>>0;b.Cnt=b.Cnt+(1)>>0;b.Ed=b.Ed+(1)>>0;if(b.Ed>=b.N){b.Ed=b.Ed-(b.N)>>0;}};S.prototype.Put=function(a){return this.$val.Put(a);};S.ptr.prototype.Pop=function(){var a,b,c,d;a=this;if(0===a.Cnt){return $ifaceNil;}d=(b=a.Eles,c=a.St,((c<0||c>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+c]));a.StFrameId=a.StFrameId+(1)>>0;a.Cnt=a.Cnt-(1)>>0;a.St=a.St+(1)>>0;if(a.St>=a.N){a.St=a.St-(a.N)>>0;}return d;};S.prototype.Pop=function(){return this.$val.Pop();};S.ptr.prototype.GetArrIdxByOffset=function(a){var a,b,c;b=this;if((0===b.Cnt)||0>a){return-1;}c=b.St+a>>0;if(b.St<b.Ed){if(b.St<=c&&c<b.Ed){return c;}}else{if(c>=b.N){c=c-(b.N)>>0;}if(c>=b.St||c<b.Ed){return c;}}return-1;};S.prototype.GetArrIdxByOffset=function(a){return this.$val.GetArrIdxByOffset(a);};S.ptr.prototype.GetByOffset=function(a){var a,b,c,d;b=this;c=b.GetArrIdxByOffset(a);if(-1===c){return $ifaceNil;}return(d=b.Eles,((c<0||c>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+c]));};S.prototype.GetByOffset=function(a){return this.$val.GetByOffset(a);};S.ptr.prototype.GetByFrameId=function(a){var a,b;b=this;if(a>=b.EdFrameId||a<b.StFrameId){return $ifaceNil;}return b.GetByOffset(a-b.StFrameId>>0);};S.prototype.GetByFrameId=function(a){return this.$val.GetByFrameId(a);};S.ptr.prototype.SetByFrameId=function(a,b){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;c=this;d=c.StFrameId;e=c.EdFrameId;f=d;g=e;if(b<f){return[2,f,g];}if(g>b){h=c.GetArrIdxByOffset(b-c.StFrameId>>0);if(!((-1===h))){(i=c.Eles,((h<0||h>=i.$length)?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+h]=a));return[0,f,g];}}j=0;if(g<b){k=0;l=0;c.St=k;c.Ed=l;m=b;n=b;c.StFrameId=m;c.EdFrameId=n;c.Cnt=0;j=1;}c.Put(a);return[j,f,g];};S.prototype.SetByFrameId=function(a,b){return this.$val.SetByFrameId(a,b);};S.ptr.prototype.Clear=function(){var a;a=this;while(true){if(!(0<a.Cnt)){break;}a.Pop();}a.St=0;a.Ed=0;a.StFrameId=0;a.EdFrameId=0;};S.prototype.Clear=function(){return this.$val.Clear();};S.ptr.prototype.GetStFrameId=function(){var a;a=this;return a.StFrameId;};S.prototype.GetStFrameId=function(){return this.$val.GetStFrameId();};S.ptr.prototype.GetEdFrameId=function(){var a;a=this;return a.EdFrameId;};S.prototype.GetEdFrameId=function(){return this.$val.GetEdFrameId();};S.ptr.prototype.GetCnt=function(){var a;a=this;return a.Cnt;};S.prototype.GetCnt=function(){return this.$val.GetCnt();};V=function(a,b,c,d,e){var a,b,c,d,e,f;f=new U.ptr($ifaceNil,AE.nil,0,0,0,0,AH.nil,$ifaceNil,false,AP.nil);f.X=a;f.Y=b;f.W=c;f.H=d;f.TouchingCells=T(512);f.tags=new AP([e]);f.ignoreList={};return f;};$pkg.NewObjectSingleTag=V;W=function(a,b,c,d,e){var a,b,c,d,e,f;f=new U.ptr($ifaceNil,AE.nil,0,0,0,0,AH.nil,$ifaceNil,false,AP.nil);f.X=a;f.Y=b;f.W=c;f.H=d;f.TouchingCells=T(512);f.tags=new AP([]);f.ignoreList={};if(e.$length>0){f.AddTags(e);}return f;};$pkg.NewObject=W;U.ptr.prototype.GetData=function(){var a;a=this;return a.Data;};U.prototype.GetData=function(){return this.$val.GetData();};U.ptr.prototype.GetShape=function(){var a;a=this;return(a.$ptr_Shape||(a.$ptr_Shape=new AQ(function(){return this.$target.Shape;},function($v){this.$target.Shape=$v;},a)));};U.prototype.GetShape=function(){return this.$val.GetShape();};U.ptr.prototype.Position=function(){var a;a=this;return[a.X,a.Y];};U.prototype.Position=function(){return this.$val.Position();};U.ptr.prototype.Clone=function(){var{a,b,c,d,e,f,g,h,$s,$r,$c}=$restore(this,{});$s=$s||0;s:while(true){switch($s){case 0:a=this;b=W(a.X,a.Y,a.W,a.H,a.Tags());b.Data=a.Data;if(!($interfaceIsEqual(a.Shape,$ifaceNil))){$s=1;continue;}$s=2;continue;case 1:c=a.Shape.Clone();$s=3;case 3:if($c){$c=false;c=c.$blk();}if(c&&c.$blk!==undefined){break s;}$r=b.SetShape(c);$s=4;case 4:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}case 2:d=a.ignoreList;e=0;f=$keys(d);while(true){if(!(e<f.length)){break;}g=d[f[e]];if(g===undefined){e++;continue;}h=g.k;b.AddToIgnoreList(h);e++;}$s=-1;return b;}return;}var $f={$blk:U.ptr.prototype.Clone,$c:true,$r,a,b,c,d,e,f,g,h,$s};return $f;};U.prototype.Clone=function(){return this.$val.Clone();};U.ptr.prototype.Update=function(){var{a,b,c,d,e,f,g,h,i,j,$s,$r,$c}=$restore(this,{});$s=$s||0;s:while(true){switch($s){case 0:a=this;if(!(a.Space===AE.nil)){b=a.Space;a.Space.RemoveSingle(a);a.Space=b;c=a.BoundsToSpace(0,0);d=c[0];e=c[1];f=c[2];g=c[3];h=e;while(true){if(!(h<=g)){break;}i=d;while(true){if(!(i<=f)){break;}j=a.Space.Cell(i,h);if(!(j===AB.nil)){j.register(a);a.TouchingCells.Put(j);}i=i+(1)>>0;}h=h+(1)>>0;}}if(!($interfaceIsEqual(a.Shape,$ifaceNil))){$s=1;continue;}$s=2;continue;case 1:$r=a.Shape.SetPosition(a.X,a.Y);$s=3;case 3:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}case 2:$s=-1;return;}return;}var $f={$blk:U.ptr.prototype.Update,$c:true,$r,a,b,c,d,e,f,g,h,i,j,$s};return $f;};U.prototype.Update=function(){return this.$val.Update();};U.ptr.prototype.AddTags=function(a){var a,b;b=this;b.tags=$appendSlice(b.tags,a);};U.prototype.AddTags=function(a){return this.$val.AddTags(a);};U.ptr.prototype.RemoveTags=function(a){var a,b,c,d,e,f,g,h,i;b=this;c=a;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);f=b.tags;g=0;while(true){if(!(g<f.$length)){break;}h=g;i=((g<0||g>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+g]);if(i===e){b.tags=$appendSlice($subslice(b.tags,0,h),$subslice(b.tags,(h+1>>0)));break;}g++;}d++;}};U.prototype.RemoveTags=function(a){return this.$val.RemoveTags(a);};U.ptr.prototype.HasTags=function(a){var a,b,c,d,e,f,g,h;b=this;c=a;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);f=b.tags;g=0;while(true){if(!(g<f.$length)){break;}h=((g<0||g>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+g]);if(h===e){return true;}g++;}d++;}return false;};U.prototype.HasTags=function(a){return this.$val.HasTags(a);};U.ptr.prototype.Tags=function(){var a;a=this;return $appendSlice(new AP([]),a.tags);};U.prototype.Tags=function(){return this.$val.Tags();};U.ptr.prototype.SetShape=function(a){var{a,b,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=this;if(!($interfaceIsEqual(b.Shape,a))){$s=1;continue;}$s=2;continue;case 1:b.Shape=a;$r=b.Update();$s=3;case 3:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}case 2:$s=-1;return;}return;}var $f={$blk:U.ptr.prototype.SetShape,$c:true,$r,a,b,$s};return $f;};U.prototype.SetShape=function(a){return this.$val.SetShape(a);};U.ptr.prototype.BoundsToSpace=function(a,b){var a,b,c,d,e,f,g,h,i;c=this;d=c.Space.WorldToSpace(c.X+a,c.Y+b);e=d[0];f=d[1];g=c.Space.WorldToSpace(c.X+c.W+a-1,c.Y+c.H+b-1);h=g[0];i=g[1];return[e,f,h,i];};U.prototype.BoundsToSpace=function(a,b){return this.$val.BoundsToSpace(a,b);};U.ptr.prototype.SharesCells=function(a){var a,b,c,d,e;b=this;c=b.TouchingCells;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AB);if(e.Contains(a)){return true;}d=d+(1)>>0;}return false;};U.prototype.SharesCells=function(a){return this.$val.SharesCells(a);};U.ptr.prototype.SharesCellsTags=function(a){var a,b,c,d,e;b=this;c=b.TouchingCells;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AB);if(e.ContainsTags(a)){return true;}d=d+(1)>>0;}return false;};U.prototype.SharesCellsTags=function(a){return this.$val.SharesCellsTags(a);};U.ptr.prototype.Center=function(){var a;a=this;return[a.X+(a.W/2),a.Y+(a.H/2)];};U.prototype.Center=function(){return this.$val.Center();};U.ptr.prototype.SetCenter=function(a,b){var a,b,c;c=this;c.X=a-(c.W/2);c.Y=b-(c.H/2);};U.prototype.SetCenter=function(a,b){return this.$val.SetCenter(a,b);};U.ptr.prototype.CellPosition=function(){var a,b;a=this;b=a.Center();return a.Space.WorldToSpace(b[0],b[1]);};U.prototype.CellPosition=function(){return this.$val.CellPosition();};U.ptr.prototype.SetRight=function(a){var a,b;b=this;b.X=a-b.W;};U.prototype.SetRight=function(a){return this.$val.SetRight(a);};U.ptr.prototype.SetBottom=function(a){var a,b;b=this;b.Y=a-b.H;};U.prototype.SetBottom=function(a){return this.$val.SetBottom(a);};U.ptr.prototype.Bottom=function(){var a;a=this;return a.Y+a.H;};U.prototype.Bottom=function(){return this.$val.Bottom();};U.ptr.prototype.Right=function(){var a;a=this;return a.X+a.W;};U.prototype.Right=function(){return this.$val.Right();};U.ptr.prototype.SetBounds=function(a,b){var a,b,c;c=this;c.X=(0>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+0]);c.Y=(1>=a.$length?($throwRuntimeError("index out of range"),undefined):a.$array[a.$offset+1]);c.W=(0>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+0])-c.X;c.H=(1>=b.$length?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+1])-c.Y;};U.prototype.SetBounds=function(a,b){return this.$val.SetBounds(a,b);};U.ptr.prototype.CheckAllWithHolder=function(a,b,c){var a,aa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;d=this;if(d.Space===AE.nil){return false;}c.Clear();c.checkingObject=d;if(a<0){a=A.Min(a,-1);}else if(a>0){a=A.Max(a,1);}if(b<0){b=A.Min(b,-1);}else if(b>0){b=A.Max(b,1);}c.dx=a;c.dy=b;e=d.BoundsToSpace(a,b);f=e[0];g=e[1];h=e[2];i=e[3];j=$makeMap(AF.keyFor,[]);k=$makeMap(AB.keyFor,[]);l=g;while(true){if(!(l<=i)){break;}m=f;while(true){if(!(m<=h)){break;}n=d.Space.Cell(m,l);if(!(n===AB.nil)){o=n.Objects;p=o.StFrameId;while(true){if(!(p<o.EdFrameId)){break;}q=$assertType(o.GetByFrameId(p),AF);s=(r=d.ignoreList[AF.keyFor(q)],r!==undefined?r.v:false);if(q===d||s){p=p+(1)>>0;continue;}t=(u=j[AF.keyFor(q)],u!==undefined?[u.v,true]:[false,false]);v=t[1];if(!v){c.Objects.Put(q);w=q;(j||$throwRuntimeError("assignment to entry in nil map"))[AF.keyFor(w)]={k:w,v:true};x=(y=k[AB.keyFor(n)],y!==undefined?[y.v,true]:[false,false]);z=x[1];if(!z){c.Cells.Put(n);aa=n;(k||$throwRuntimeError("assignment to entry in nil map"))[AB.keyFor(aa)]={k:aa,v:true};}p=p+(1)>>0;continue;}p=p+(1)>>0;}}m=m+(1)>>0;}l=l+(1)>>0;}if(0>=c.Objects.Cnt){return false;}return true;};U.prototype.CheckAllWithHolder=function(a,b,c){return this.$val.CheckAllWithHolder(a,b,c);};U.ptr.prototype.Overlaps=function(a){var a,b;b=this;return a.X<=b.X+b.W&&a.X+a.W>=b.X&&a.Y<=b.Y+b.H&&a.Y+a.H>=b.Y;};U.prototype.Overlaps=function(a){return this.$val.Overlaps(a);};U.ptr.prototype.AddToIgnoreList=function(a){var a,b,c;b=this;c=a;(b.ignoreList||$throwRuntimeError("assignment to entry in nil map"))[AF.keyFor(c)]={k:c,v:true};};U.prototype.AddToIgnoreList=function(a){return this.$val.AddToIgnoreList(a);};U.ptr.prototype.RemoveFromIgnoreList=function(a){var a,b;b=this;delete b.ignoreList[AF.keyFor(a)];};U.prototype.RemoveFromIgnoreList=function(a){return this.$val.RemoveFromIgnoreList(a);};Y=function(){var a;a=new X.ptr(AF.nil,0,0,AH.nil,AH.nil);a.Objects=T(16);a.Cells=T(16);return a;};$pkg.NewCollision=Y;X.ptr.prototype.Clear=function(){var a;a=this;a.checkingObject=AF.nil;a.dx=0;a.dy=0;a.Objects.Clear();a.Cells.Clear();};X.prototype.Clear=function(){return this.$val.Clear();};X.ptr.prototype.PopFirstCollidedObject=function(){var a;a=this;if(0>=a.Objects.Cnt){return AF.nil;}return $assertType(a.Objects.Pop(),AF);};X.prototype.PopFirstCollidedObject=function(){return this.$val.PopFirstCollidedObject();};X.ptr.prototype.HasTags=function(a){var a,b,c,d,e;b=this;c=b.Objects;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AF);if(e===b.checkingObject){d=d+(1)>>0;continue;}if(e.HasTags(a)){return true;}d=d+(1)>>0;}return false;};X.prototype.HasTags=function(a){return this.$val.HasTags(a);};X.ptr.prototype.ObjectsByTags=function(a){var a,b,c,d,e,f;b=this;c=new AG([]);d=b.Objects;e=d.StFrameId;while(true){if(!(e<d.EdFrameId)){break;}f=$assertType(d.GetByFrameId(e),AF);if(f===b.checkingObject){e=e+(1)>>0;continue;}if(f.HasTags(a)){c=$append(c,f);}e=e+(1)>>0;}return c;};X.prototype.ObjectsByTags=function(a){return this.$val.ObjectsByTags(a);};X.ptr.prototype.ContactWithObject=function(a){var a,b,c;b=this;c=new B([0,0]);if(b.dx<0){(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0]=a.X+a.W-b.checkingObject.X);}else if(b.dx>0){(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0]=a.X-b.checkingObject.W-b.checkingObject.X);}if(b.dy<0){(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]=a.Y+a.H-b.checkingObject.Y);}else if(b.dy>0){(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]=a.Y-b.checkingObject.H-b.checkingObject.Y);}return c;};X.prototype.ContactWithObject=function(a){return this.$val.ContactWithObject(a);};X.ptr.prototype.ContactWithCell=function(a){var a,b,c,d,e;b=this;c=new B([0,0]);d=(($imul(a.X,b.checkingObject.Space.CellWidth)));e=(($imul(a.Y,b.checkingObject.Space.CellHeight)));if(b.dx<0){(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0]=d+(b.checkingObject.Space.CellWidth)-b.checkingObject.X);}else if(b.dx>0){(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0]=d-b.checkingObject.W-b.checkingObject.X);}if(b.dy<0){(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]=e+(b.checkingObject.Space.CellHeight)-b.checkingObject.Y);}else if(b.dy>0){(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]=e-b.checkingObject.H-b.checkingObject.Y);}return c;};X.prototype.ContactWithCell=function(a){return this.$val.ContactWithCell(a);};X.ptr.prototype.SlideAgainstCell=function(a,b){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;c=this;d=c.checkingObject.Space;e=$assertType(c.Cells.GetByFrameId(c.Cells.StFrameId),AB);f=d.SpaceToWorld(e.X,e.Y);g=f[0];h=f[1];i=(d.CellWidth)/2;j=(d.CellHeight)/2;g=g+(i);h=h+(j);k=c.checkingObject.Center();l=k[0];m=k[1];n=l-g;o=m-h;p=d.Cell(e.X-1>>0,e.Y);q=d.Cell(e.X+1>>0,e.Y);r=d.Cell(e.X,e.Y-1>>0);s=d.Cell(e.X,e.Y+1>>0);t=new B([0,0]);if(!((c.dy===0))){if(n>0&&(q===AB.nil||!q.ContainsTags(b))){(0>=t.$length?($throwRuntimeError("index out of range"),undefined):t.$array[t.$offset+0]=g+i-c.checkingObject.X);}else if(n<0&&(p===AB.nil||!p.ContainsTags(b))){(0>=t.$length?($throwRuntimeError("index out of range"),undefined):t.$array[t.$offset+0]=g-i-(c.checkingObject.X+c.checkingObject.W));}else{return B.nil;}}if(!((c.dx===0))){if(o>0&&(s===AB.nil||!s.ContainsTags(b))){(1>=t.$length?($throwRuntimeError("index out of range"),undefined):t.$array[t.$offset+1]=h+j-c.checkingObject.Y);}else if(o<0&&(r===AB.nil||!r.ContainsTags(b))){(1>=t.$length?($throwRuntimeError("index out of range"),undefined):t.$array[t.$offset+1]=h-j-(c.checkingObject.Y+c.checkingObject.H));}else{return B.nil;}}return t;};X.prototype.SlideAgainstCell=function(a,b){return this.$val.SlideAgainstCell(a,b);};AA=function(a,b){var a,b,c;c=new Z.ptr(0,0,AH.nil);c.X=a;c.Y=b;c.Objects=T(16);return c;};Z.ptr.prototype.register=function(a){var a,b;b=this;if(!b.Contains(a)){b.Objects.Put(a);}};Z.prototype.register=function(a){return this.$val.register(a);};Z.ptr.prototype.unregister=function(a){var a,b,c,d,e;b=this;c=b.Objects;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AF);if(e===a){c.SetByFrameId(c.GetByFrameId(c.StFrameId),d);c.Pop();break;}d=d+(1)>>0;}};Z.prototype.unregister=function(a){return this.$val.unregister(a);};Z.ptr.prototype.Contains=function(a){var a,b,c,d,e;b=this;c=b.Objects;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AF);if(e===a){return true;}d=d+(1)>>0;}return false;};Z.prototype.Contains=function(a){return this.$val.Contains(a);};Z.ptr.prototype.ContainsTags=function(a){var a,b,c,d,e;b=this;c=b.Objects;d=c.StFrameId;while(true){if(!(d<c.EdFrameId)){break;}e=$assertType(c.GetByFrameId(d),AF);if(e.HasTags(a)){return true;}d=d+(1)>>0;}return false;};Z.prototype.ContainsTags=function(a){return this.$val.ContainsTags(a);};Z.ptr.prototype.Occupied=function(){var a;a=this;return 0<a.Objects.Cnt;};Z.prototype.Occupied=function(){return this.$val.Occupied();};B.methods=[{prop:"Clone",name:"Clone",pkg:"",typ:$funcType([],[B],false)},{prop:"Magnitude",name:"Magnitude",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Magnitude2",name:"Magnitude2",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Unit",name:"Unit",pkg:"",typ:$funcType([],[B],false)},{prop:"X",name:"X",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Y",name:"Y",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Z",name:"Z",pkg:"",typ:$funcType([],[$Float64],false)}];AE.methods=[{prop:"AddSingle",name:"AddSingle",pkg:"",typ:$funcType([AF],[],false)},{prop:"Add",name:"Add",pkg:"",typ:$funcType([AG],[],true)},{prop:"RemoveSingle",name:"RemoveSingle",pkg:"",typ:$funcType([AF],[],false)},{prop:"Remove",name:"Remove",pkg:"",typ:$funcType([AG],[],true)},{prop:"Objects",name:"Objects",pkg:"",typ:$funcType([],[AG],false)},{prop:"Resize",name:"Resize",pkg:"",typ:$funcType([$Int,$Int],[],false)},{prop:"Cell",name:"Cell",pkg:"",typ:$funcType([$Int,$Int],[AB],false)},{prop:"CheckCells",name:"CheckCells",pkg:"",typ:$funcType([$Int,$Int,$Int,$Int,AP],[AF],true)},{prop:"CheckCellsWorld",name:"CheckCellsWorld",pkg:"",typ:$funcType([$Float64,$Float64,$Float64,$Float64,AP],[AF],true)},{prop:"UnregisterAllObjects",name:"UnregisterAllObjects",pkg:"",typ:$funcType([],[],false)},{prop:"WorldToSpace",name:"WorldToSpace",pkg:"",typ:$funcType([$Float64,$Float64],[$Int,$Int],false)},{prop:"SpaceToWorld",name:"SpaceToWorld",pkg:"",typ:$funcType([$Int,$Int],[$Float64,$Float64],false)},{prop:"Height",name:"Height",pkg:"",typ:$funcType([],[$Int],false)},{prop:"Width",name:"Width",pkg:"",typ:$funcType([],[$Int],false)},{prop:"CellsInLine",name:"CellsInLine",pkg:"",typ:$funcType([$Int,$Int,$Int,$Int],[AC],false)}];AJ.methods=[{prop:"Normal",name:"Normal",pkg:"",typ:$funcType([],[B],false)},{prop:"IntersectionPointsLine",name:"IntersectionPointsLine",pkg:"",typ:$funcType([AJ],[B],false)}];AM.methods=[{prop:"GetPointByOffset",name:"GetPointByOffset",pkg:"",typ:$funcType([$Int32],[B],false)},{prop:"Clone",name:"Clone",pkg:"",typ:$funcType([],[I],false)},{prop:"AddPoints",name:"AddPoints",pkg:"",typ:$funcType([AI],[],true)},{prop:"UpdateAsRectangle",name:"UpdateAsRectangle",pkg:"",typ:$funcType([$Float64,$Float64,$Float64,$Float64],[$Bool],false)},{prop:"Lines",name:"Lines",pkg:"",typ:$funcType([],[AK],false)},{prop:"Transformed",name:"Transformed",pkg:"",typ:$funcType([],[AL],false)},{prop:"Bounds",name:"Bounds",pkg:"",typ:$funcType([],[B,B],false)},{prop:"Position",name:"Position",pkg:"",typ:$funcType([],[$Float64,$Float64],false)},{prop:"SetPosition",name:"SetPosition",pkg:"",typ:$funcType([$Float64,$Float64],[],false)},{prop:"SetPositionVec",name:"SetPositionVec",pkg:"",typ:$funcType([B],[],false)},{prop:"Move",name:"Move",pkg:"",typ:$funcType([$Float64,$Float64],[],false)},{prop:"MoveVec",name:"MoveVec",pkg:"",typ:$funcType([B],[],false)},{prop:"SATAxes",name:"SATAxes",pkg:"",typ:$funcType([],[AL],false)},{prop:"PointInside",name:"PointInside",pkg:"",typ:$funcType([B],[$Bool],false)},{prop:"Intersection",name:"Intersection",pkg:"",typ:$funcType([$Float64,$Float64,I],[AN],false)}];AN.methods=[{prop:"LeftmostPoint",name:"LeftmostPoint",pkg:"",typ:$funcType([],[B],false)},{prop:"RightmostPoint",name:"RightmostPoint",pkg:"",typ:$funcType([],[B],false)},{prop:"TopmostPoint",name:"TopmostPoint",pkg:"",typ:$funcType([],[B],false)},{prop:"BottommostPoint",name:"BottommostPoint",pkg:"",typ:$funcType([],[B],false)}];AH.methods=[{prop:"DryPut",name:"DryPut",pkg:"",typ:$funcType([],[],false)},{prop:"Put",name:"Put",pkg:"",typ:$funcType([R],[],false)},{prop:"Pop",name:"Pop",pkg:"",typ:$funcType([],[R],false)},{prop:"GetArrIdxByOffset",name:"GetArrIdxByOffset",pkg:"",typ:$funcType([$Int32],[$Int32],false)},{prop:"GetByOffset",name:"GetByOffset",pkg:"",typ:$funcType([$Int32],[R],false)},{prop:"GetByFrameId",name:"GetByFrameId",pkg:"",typ:$funcType([$Int32],[R],false)},{prop:"SetByFrameId",name:"SetByFrameId",pkg:"",typ:$funcType([R,$Int32],[$Int32,$Int32,$Int32],false)},{prop:"Clear",name:"Clear",pkg:"",typ:$funcType([],[],false)},{prop:"GetStFrameId",name:"GetStFrameId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetEdFrameId",name:"GetEdFrameId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetCnt",name:"GetCnt",pkg:"",typ:$funcType([],[$Int32],false)}];AF.methods=[{prop:"GetData",name:"GetData",pkg:"",typ:$funcType([],[$emptyInterface],false)},{prop:"GetShape",name:"GetShape",pkg:"",typ:$funcType([],[AQ],false)},{prop:"Position",name:"Position",pkg:"",typ:$funcType([],[$Float64,$Float64],false)},{prop:"Clone",name:"Clone",pkg:"",typ:$funcType([],[AF],false)},{prop:"Update",name:"Update",pkg:"",typ:$funcType([],[],false)},{prop:"AddTags",name:"AddTags",pkg:"",typ:$funcType([AP],[],true)},{prop:"RemoveTags",name:"RemoveTags",pkg:"",typ:$funcType([AP],[],true)},{prop:"HasTags",name:"HasTags",pkg:"",typ:$funcType([AP],[$Bool],true)},{prop:"Tags",name:"Tags",pkg:"",typ:$funcType([],[AP],false)},{prop:"SetShape",name:"SetShape",pkg:"",typ:$funcType([I],[],false)},{prop:"BoundsToSpace",name:"BoundsToSpace",pkg:"",typ:$funcType([$Float64,$Float64],[$Int,$Int,$Int,$Int],false)},{prop:"SharesCells",name:"SharesCells",pkg:"",typ:$funcType([AF],[$Bool],false)},{prop:"SharesCellsTags",name:"SharesCellsTags",pkg:"",typ:$funcType([AP],[$Bool],true)},{prop:"Center",name:"Center",pkg:"",typ:$funcType([],[$Float64,$Float64],false)},{prop:"SetCenter",name:"SetCenter",pkg:"",typ:$funcType([$Float64,$Float64],[],false)},{prop:"CellPosition",name:"CellPosition",pkg:"",typ:$funcType([],[$Int,$Int],false)},{prop:"SetRight",name:"SetRight",pkg:"",typ:$funcType([$Float64],[],false)},{prop:"SetBottom",name:"SetBottom",pkg:"",typ:$funcType([$Float64],[],false)},{prop:"Bottom",name:"Bottom",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"Right",name:"Right",pkg:"",typ:$funcType([],[$Float64],false)},{prop:"SetBounds",name:"SetBounds",pkg:"",typ:$funcType([B,B],[],false)},{prop:"CheckAllWithHolder",name:"CheckAllWithHolder",pkg:"",typ:$funcType([$Float64,$Float64,AR],[$Bool],false)},{prop:"Overlaps",name:"Overlaps",pkg:"",typ:$funcType([AF],[$Bool],false)},{prop:"AddToIgnoreList",name:"AddToIgnoreList",pkg:"",typ:$funcType([AF],[],false)},{prop:"RemoveFromIgnoreList",name:"RemoveFromIgnoreList",pkg:"",typ:$funcType([AF],[],false)}];AR.methods=[{prop:"Clear",name:"Clear",pkg:"",typ:$funcType([],[],false)},{prop:"PopFirstCollidedObject",name:"PopFirstCollidedObject",pkg:"",typ:$funcType([],[AF],false)},{prop:"HasTags",name:"HasTags",pkg:"",typ:$funcType([AP],[$Bool],true)},{prop:"ObjectsByTags",name:"ObjectsByTags",pkg:"",typ:$funcType([AP],[AG],true)},{prop:"ContactWithObject",name:"ContactWithObject",pkg:"",typ:$funcType([AF],[B],false)},{prop:"ContactWithCell",name:"ContactWithCell",pkg:"",typ:$funcType([AB],[B],false)},{prop:"SlideAgainstCell",name:"SlideAgainstCell",pkg:"",typ:$funcType([AB,AP],[B],true)}];AB.methods=[{prop:"register",name:"register",pkg:"resolv",typ:$funcType([AF],[],false)},{prop:"unregister",name:"unregister",pkg:"resolv",typ:$funcType([AF],[],false)},{prop:"Contains",name:"Contains",pkg:"",typ:$funcType([AF],[$Bool],false)},{prop:"ContainsTags",name:"ContainsTags",pkg:"",typ:$funcType([AP],[$Bool],true)},{prop:"Occupied",name:"Occupied",pkg:"",typ:$funcType([],[$Bool],false)}];B.init($Float64);G.init("",[{prop:"Cells",name:"Cells",embedded:false,exported:true,typ:AD,tag:""},{prop:"CellWidth",name:"CellWidth",embedded:false,exported:true,typ:$Int,tag:""},{prop:"CellHeight",name:"CellHeight",embedded:false,exported:true,typ:$Int,tag:""}]);I.init([{prop:"Bounds",name:"Bounds",pkg:"",typ:$funcType([],[B,B],false)},{prop:"Clone",name:"Clone",pkg:"",typ:$funcType([],[I],false)},{prop:"Intersection",name:"Intersection",pkg:"",typ:$funcType([$Float64,$Float64,I],[AN],false)},{prop:"Position",name:"Position",pkg:"",typ:$funcType([],[$Float64,$Float64],false)},{prop:"SetPosition",name:"SetPosition",pkg:"",typ:$funcType([$Float64,$Float64],[],false)}]);J.init("",[{prop:"Start",name:"Start",embedded:false,exported:true,typ:B,tag:""},{prop:"End",name:"End",embedded:false,exported:true,typ:B,tag:""}]);L.init("",[{prop:"Points",name:"Points",embedded:false,exported:true,typ:AH,tag:""},{prop:"X",name:"X",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"Y",name:"Y",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"Closed",name:"Closed",embedded:false,exported:true,typ:$Bool,tag:""}]);N.init("",[{prop:"Points",name:"Points",embedded:false,exported:true,typ:AL,tag:""},{prop:"MTV",name:"MTV",embedded:false,exported:true,typ:B,tag:""},{prop:"Center",name:"Center",embedded:false,exported:true,typ:B,tag:""}]);R.init([]);S.init("",[{prop:"Ed",name:"Ed",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"St",name:"St",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"EdFrameId",name:"EdFrameId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"StFrameId",name:"StFrameId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"N",name:"N",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Cnt",name:"Cnt",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Eles",name:"Eles",embedded:false,exported:true,typ:AO,tag:""}]);U.init("resolv",[{prop:"Shape",name:"Shape",embedded:false,exported:true,typ:I,tag:""},{prop:"Space",name:"Space",embedded:false,exported:true,typ:AE,tag:""},{prop:"X",name:"X",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"Y",name:"Y",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"W",name:"W",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"H",name:"H",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"TouchingCells",name:"TouchingCells",embedded:false,exported:true,typ:AH,tag:""},{prop:"Data",name:"Data",embedded:false,exported:true,typ:$emptyInterface,tag:""},{prop:"ignoreList",name:"ignoreList",embedded:false,exported:false,typ:AS,tag:""},{prop:"tags",name:"tags",embedded:false,exported:false,typ:AP,tag:""}]);X.init("resolv",[{prop:"checkingObject",name:"checkingObject",embedded:false,exported:false,typ:AF,tag:""},{prop:"dx",name:"dx",embedded:false,exported:false,typ:$Float64,tag:""},{prop:"dy",name:"dy",embedded:false,exported:false,typ:$Float64,tag:""},{prop:"Objects",name:"Objects",embedded:false,exported:true,typ:AH,tag:""},{prop:"Cells",name:"Cells",embedded:false,exported:true,typ:AH,tag:""}]);Z.init("",[{prop:"X",name:"X",embedded:false,exported:true,typ:$Int,tag:""},{prop:"Y",name:"Y",embedded:false,exported:true,typ:$Int,tag:""},{prop:"Objects",name:"Objects",embedded:false,exported:true,typ:AH,tag:""}]);$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:$r=A.$init();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["jsexport/battle"]=(function(){var $pkg={},$init,A,B,C,D,E,F,G,I,J,K,L,M,N,O,P,Q,S,AH,BN,BO,BP,BQ,BR,BS,BT,BU,BV,BW,BX,BY,BZ,CA,CB,CC,CD,CE,CF,CG,CH,CI,CJ,CK,CL,CM,U,V,W,X,Y,T,Z,AB,AC,AD,AE,AF,AG,AI,AJ,AK,AL,AM,AN,AO,AP,AQ,AR,AS,AT,AU,AW,AX,AY,AZ,BA,BB,BC,BD,BE,BF,BG,BH,BI,BJ,BK,BL,BM;A=$packages["math"];B=$packages["resolv"];C=$pkg.AnyBullet=$newType(8,$kindInterface,"battle.AnyBullet",true,"jsexport/battle",true,null);D=$pkg.Vec2D=$newType(0,$kindStruct,"battle.Vec2D",true,"jsexport/battle",true,function(X_,Y_){this.$val=this;if(arguments.length===0){this.X=0;this.Y=0;return;}this.X=X_;this.Y=Y_;});E=$pkg.Polygon2D=$newType(0,$kindStruct,"battle.Polygon2D",true,"jsexport/battle",true,function(Anchor_,Points_){this.$val=this;if(arguments.length===0){this.Anchor=CE.nil;this.Points=CF.nil;return;}this.Anchor=Anchor_;this.Points=Points_;});F=$pkg.PlayerDownsync=$newType(0,$kindStruct,"battle.PlayerDownsync",true,"jsexport/battle",true,function(Id_,VirtualGridX_,VirtualGridY_,DirX_,DirY_,VelX_,VelY_,Speed_,BattleState_,JoinIndex_,ColliderRadius_,Removed_,Score_,LastMoveGmtMillis_,FramesToRecover_,FramesInChState_,Hp_,MaxHp_,CharacterState_,InAir_,OnWall_,OnWallNormX_,OnWallNormY_,CapturedByInertia_,ActiveSkillId_,ActiveSkillHit_,FramesInvinsible_,BulletTeamId_,ChCollisionTeamId_,RevivalVirtualGridX_,RevivalVirtualGridY_){this.$val=this;if(arguments.length===0){this.Id=0;this.VirtualGridX=0;this.VirtualGridY=0;this.DirX=0;this.DirY=0;this.VelX=0;this.VelY=0;this.Speed=0;this.BattleState=0;this.JoinIndex=0;this.ColliderRadius=0;this.Removed=false;this.Score=0;this.LastMoveGmtMillis=0;this.FramesToRecover=0;this.FramesInChState=0;this.Hp=0;this.MaxHp=0;this.CharacterState=0;this.InAir=false;this.OnWall=false;this.OnWallNormX=0;this.OnWallNormY=0;this.CapturedByInertia=false;this.ActiveSkillId=0;this.ActiveSkillHit=0;this.FramesInvinsible=0;this.BulletTeamId=0;this.ChCollisionTeamId=0;this.RevivalVirtualGridX=0;this.RevivalVirtualGridY=0;return;}this.Id=Id_;this.VirtualGridX=VirtualGridX_;this.VirtualGridY=VirtualGridY_;this.DirX=DirX_;this.DirY=DirY_;this.VelX=VelX_;this.VelY=VelY_;this.Speed=Speed_;this.BattleState=BattleState_;this.JoinIndex=JoinIndex_;this.ColliderRadius=ColliderRadius_;this.Removed=Removed_;this.Score=Score_;this.LastMoveGmtMillis=LastMoveGmtMillis_;this.FramesToRecover=FramesToRecover_;this.FramesInChState=FramesInChState_;this.Hp=Hp_;this.MaxHp=MaxHp_;this.CharacterState=CharacterState_;this.InAir=InAir_;this.OnWall=OnWall_;this.OnWallNormX=OnWallNormX_;this.OnWallNormY=OnWallNormY_;this.CapturedByInertia=CapturedByInertia_;this.ActiveSkillId=ActiveSkillId_;this.ActiveSkillHit=ActiveSkillHit_;this.FramesInvinsible=FramesInvinsible_;this.BulletTeamId=BulletTeamId_;this.ChCollisionTeamId=ChCollisionTeamId_;this.RevivalVirtualGridX=RevivalVirtualGridX_;this.RevivalVirtualGridY=RevivalVirtualGridY_;});G=$pkg.InputFrameDecoded=$newType(0,$kindStruct,"battle.InputFrameDecoded",true,"jsexport/battle",true,function(Dx_,Dy_,BtnALevel_,BtnBLevel_){this.$val=this;if(arguments.length===0){this.Dx=0;this.Dy=0;this.BtnALevel=0;this.BtnBLevel=0;return;}this.Dx=Dx_;this.Dy=Dy_;this.BtnALevel=BtnALevel_;this.BtnBLevel=BtnBLevel_;});I=$pkg.Barrier=$newType(0,$kindStruct,"battle.Barrier",true,"jsexport/battle",true,function(Boundary_){this.$val=this;if(arguments.length===0){this.Boundary=CJ.nil;return;}this.Boundary=Boundary_;});J=$pkg.BulletConfig=$newType(0,$kindStruct,"battle.BulletConfig",true,"jsexport/battle",true,function(StartupFrames_,CancellableStFrame_,CancellableEdFrame_,ActiveFrames_,HitStunFrames_,BlockStunFrames_,PushbackVelX_,PushbackVelY_,Damage_,SelfLockVelX_,SelfLockVelY_,HitboxOffsetX_,HitboxOffsetY_,HitboxSizeX_,HitboxSizeY_,BlowUp_,ExplosionFrames_,SpeciesId_,CancelTransit_){this.$val=this;if(arguments.length===0){this.StartupFrames=0;this.CancellableStFrame=0;this.CancellableEdFrame=0;this.ActiveFrames=0;this.HitStunFrames=0;this.BlockStunFrames=0;this.PushbackVelX=0;this.PushbackVelY=0;this.Damage=0;this.SelfLockVelX=0;this.SelfLockVelY=0;this.HitboxOffsetX=0;this.HitboxOffsetY=0;this.HitboxSizeX=0;this.HitboxSizeY=0;this.BlowUp=false;this.ExplosionFrames=0;this.SpeciesId=0;this.CancelTransit=false;return;}this.StartupFrames=StartupFrames_;this.CancellableStFrame=CancellableStFrame_;this.CancellableEdFrame=CancellableEdFrame_;this.ActiveFrames=ActiveFrames_;this.HitStunFrames=HitStunFrames_;this.BlockStunFrames=BlockStunFrames_;this.PushbackVelX=PushbackVelX_;this.PushbackVelY=PushbackVelY_;this.Damage=Damage_;this.SelfLockVelX=SelfLockVelX_;this.SelfLockVelY=SelfLockVelY_;this.HitboxOffsetX=HitboxOffsetX_;this.HitboxOffsetY=HitboxOffsetY_;this.HitboxSizeX=HitboxSizeX_;this.HitboxSizeY=HitboxSizeY_;this.BlowUp=BlowUp_;this.ExplosionFrames=ExplosionFrames_;this.SpeciesId=SpeciesId_;this.CancelTransit=CancelTransit_;});K=$pkg.BulletBattleAttr=$newType(0,$kindStruct,"battle.BulletBattleAttr",true,"jsexport/battle",true,function(BulletLocalId_,OriginatedRenderFrameId_,OffenderJoinIndex_,TeamId_){this.$val=this;if(arguments.length===0){this.BulletLocalId=0;this.OriginatedRenderFrameId=0;this.OffenderJoinIndex=0;this.TeamId=0;return;}this.BulletLocalId=BulletLocalId_;this.OriginatedRenderFrameId=OriginatedRenderFrameId_;this.OffenderJoinIndex=OffenderJoinIndex_;this.TeamId=TeamId_;});L=$pkg.MeleeBullet=$newType(0,$kindStruct,"battle.MeleeBullet",true,"jsexport/battle",true,function(BlState_,FramesInBlState_,BattleAttr_,Bullet_){this.$val=this;if(arguments.length===0){this.BlState=0;this.FramesInBlState=0;this.BattleAttr=BQ.nil;this.Bullet=BR.nil;return;}this.BlState=BlState_;this.FramesInBlState=FramesInBlState_;this.BattleAttr=BattleAttr_;this.Bullet=Bullet_;});M=$pkg.FireballBullet=$newType(0,$kindStruct,"battle.FireballBullet",true,"jsexport/battle",true,function(VirtualGridX_,VirtualGridY_,DirX_,DirY_,VelX_,VelY_,Speed_,BlState_,FramesInBlState_,BattleAttr_,Bullet_){this.$val=this;if(arguments.length===0){this.VirtualGridX=0;this.VirtualGridY=0;this.DirX=0;this.DirY=0;this.VelX=0;this.VelY=0;this.Speed=0;this.BlState=0;this.FramesInBlState=0;this.BattleAttr=BQ.nil;this.Bullet=BR.nil;return;}this.VirtualGridX=VirtualGridX_;this.VirtualGridY=VirtualGridY_;this.DirX=DirX_;this.DirY=DirY_;this.VelX=VelX_;this.VelY=VelY_;this.Speed=Speed_;this.BlState=BlState_;this.FramesInBlState=FramesInBlState_;this.BattleAttr=BattleAttr_;this.Bullet=Bullet_;});N=$pkg.Skill=$newType(0,$kindStruct,"battle.Skill",true,"jsexport/battle",true,function(BattleLocalId_,RecoveryFrames_,RecoveryFramesOnBlock_,RecoveryFramesOnHit_,ReleaseTriggerType_,BoundChState_,Hits_){this.$val=this;if(arguments.length===0){this.BattleLocalId=0;this.RecoveryFrames=0;this.RecoveryFramesOnBlock=0;this.RecoveryFramesOnHit=0;this.ReleaseTriggerType=0;this.BoundChState=0;this.Hits=BP.nil;return;}this.BattleLocalId=BattleLocalId_;this.RecoveryFrames=RecoveryFrames_;this.RecoveryFramesOnBlock=RecoveryFramesOnBlock_;this.RecoveryFramesOnHit=RecoveryFramesOnHit_;this.ReleaseTriggerType=ReleaseTriggerType_;this.BoundChState=BoundChState_;this.Hits=Hits_;});O=$pkg.RoomDownsyncFrame=$newType(0,$kindStruct,"battle.RoomDownsyncFrame",true,"jsexport/battle",true,function(Id_,PlayersArr_,CountdownNanos_,MeleeBullets_,FireballBullets_,BackendUnconfirmedMask_,ShouldForceResync_,BulletLocalIdCounter_){this.$val=this;if(arguments.length===0){this.Id=0;this.PlayersArr=CG.nil;this.CountdownNanos=new $Int64(0,0);this.MeleeBullets=CH.nil;this.FireballBullets=CI.nil;this.BackendUnconfirmedMask=new $Uint64(0,0);this.ShouldForceResync=false;this.BulletLocalIdCounter=0;return;}this.Id=Id_;this.PlayersArr=PlayersArr_;this.CountdownNanos=CountdownNanos_;this.MeleeBullets=MeleeBullets_;this.FireballBullets=FireballBullets_;this.BackendUnconfirmedMask=BackendUnconfirmedMask_;this.ShouldForceResync=ShouldForceResync_;this.BulletLocalIdCounter=BulletLocalIdCounter_;});P=$pkg.InputFrameDownsync=$newType(0,$kindStruct,"battle.InputFrameDownsync",true,"jsexport/battle",true,function(InputFrameId_,InputList_,ConfirmedList_){this.$val=this;if(arguments.length===0){this.InputFrameId=0;this.InputList=CA.nil;this.ConfirmedList=new $Uint64(0,0);return;}this.InputFrameId=InputFrameId_;this.InputList=InputList_;this.ConfirmedList=ConfirmedList_;});Q=$pkg.NpcPatrolCue=$newType(0,$kindStruct,"battle.NpcPatrolCue",true,"jsexport/battle",true,function(FlAct_,FrAct_,X_,Y_){this.$val=this;if(arguments.length===0){this.FlAct=new $Uint64(0,0);this.FrAct=new $Uint64(0,0);this.X=0;this.Y=0;return;}this.FlAct=FlAct_;this.FrAct=FrAct_;this.X=X_;this.Y=Y_;});S=$pkg.CharacterConfig=$newType(0,$kindStruct,"battle.CharacterConfig",true,"jsexport/battle",true,function(SpeciesId_,SpeciesName_,InAirIdleFrameIdxTurningPoint_,InAirIdleFrameIdxTurnedCycle_,LayDownFrames_,LayDownFramesToRecover_,GetUpInvinsibleFrames_,GetUpFramesToRecover_,Speed_,JumpingInitVelY_,JumpingFramesToRecover_,DashingEnabled_,OnWallEnabled_,WallJumpingFramesToRecover_,WallJumpingInitVelX_,WallJumpingInitVelY_,WallSlidingVelY_,InertiaFramesToRecover_,SkillMapper_){this.$val=this;if(arguments.length===0){this.SpeciesId=0;this.SpeciesName="";this.InAirIdleFrameIdxTurningPoint=0;this.InAirIdleFrameIdxTurnedCycle=0;this.LayDownFrames=0;this.LayDownFramesToRecover=0;this.GetUpInvinsibleFrames=0;this.GetUpFramesToRecover=0;this.Speed=0;this.JumpingInitVelY=0;this.JumpingFramesToRecover=0;this.DashingEnabled=false;this.OnWallEnabled=false;this.WallJumpingFramesToRecover=0;this.WallJumpingInitVelX=0;this.WallJumpingInitVelY=0;this.WallSlidingVelY=0;this.InertiaFramesToRecover=0;this.SkillMapper=$throwNilPointerError;return;}this.SpeciesId=SpeciesId_;this.SpeciesName=SpeciesName_;this.InAirIdleFrameIdxTurningPoint=InAirIdleFrameIdxTurningPoint_;this.InAirIdleFrameIdxTurnedCycle=InAirIdleFrameIdxTurnedCycle_;this.LayDownFrames=LayDownFrames_;this.LayDownFramesToRecover=LayDownFramesToRecover_;this.GetUpInvinsibleFrames=GetUpInvinsibleFrames_;this.GetUpFramesToRecover=GetUpFramesToRecover_;this.Speed=Speed_;this.JumpingInitVelY=JumpingInitVelY_;this.JumpingFramesToRecover=JumpingFramesToRecover_;this.DashingEnabled=DashingEnabled_;this.OnWallEnabled=OnWallEnabled_;this.WallJumpingFramesToRecover=WallJumpingFramesToRecover_;this.WallJumpingInitVelX=WallJumpingInitVelX_;this.WallJumpingInitVelY=WallJumpingInitVelY_;this.WallSlidingVelY=WallSlidingVelY_;this.InertiaFramesToRecover=InertiaFramesToRecover_;this.SkillMapper=SkillMapper_;});AH=$pkg.SatResult=$newType(0,$kindStruct,"battle.SatResult",true,"jsexport/battle",true,function(Overlap_,OverlapX_,OverlapY_,AContainedInB_,BContainedInA_,Axis_){this.$val=this;if(arguments.length===0){this.Overlap=0;this.OverlapX=0;this.OverlapY=0;this.AContainedInB=false;this.BContainedInA=false;this.Axis=B.Vector.nil;return;}this.Overlap=Overlap_;this.OverlapX=OverlapX_;this.OverlapY=OverlapY_;this.AContainedInB=AContainedInB_;this.BContainedInA=BContainedInA_;this.Axis=Axis_;});BN=$sliceType($Int32);BO=$sliceType(BN);BP=$sliceType(C);BQ=$ptrType(K);BR=$ptrType(J);BS=$ptrType(N);BT=$ptrType(L);BU=$ptrType(AH);BV=$ptrType(B.Object);BW=$ptrType(F);BX=$ptrType(M);BY=$ptrType(B.ConvexPolygon);BZ=$ptrType(P);CA=$sliceType($Uint64);CB=$ptrType(O);CC=$sliceType($Float64);CD=$sliceType($String);CE=$ptrType(D);CF=$sliceType(CE);CG=$sliceType(BW);CH=$sliceType(BT);CI=$sliceType(BX);CJ=$ptrType(E);CK=$mapType($Int,$Int);CL=$ptrType(S);CM=$funcType([$Int,BW,$Int],[$Int],false);S.ptr.prototype.GetSpeed=function(){var a;a=this;return a.Speed;};S.prototype.GetSpeed=function(){return this.$val.GetSpeed();};S.ptr.prototype.GetSpeciesId=function(){var a;a=this;return a.SpeciesId;};S.prototype.GetSpeciesId=function(){return this.$val.GetSpeciesId();};S.ptr.prototype.GetSpeciesName=function(){var a;a=this;return a.SpeciesName;};S.prototype.GetSpeciesName=function(){return this.$val.GetSpeciesName();};P.ptr.prototype.GetInputFrameId=function(){var a;a=this;return a.InputFrameId;};P.prototype.GetInputFrameId=function(){return this.$val.GetInputFrameId();};P.ptr.prototype.GetInputList=function(){var a;a=this;return a.InputList;};P.prototype.GetInputList=function(){return this.$val.GetInputList();};P.ptr.prototype.GetConfirmedList=function(){var a;a=this;return a.ConfirmedList;};P.prototype.GetConfirmedList=function(){return this.$val.GetConfirmedList();};F.ptr.prototype.GetId=function(){var a;a=this;return a.Id;};F.prototype.GetId=function(){return this.$val.GetId();};F.ptr.prototype.GetJoinIndex=function(){var a;a=this;return a.JoinIndex;};F.prototype.GetJoinIndex=function(){return this.$val.GetJoinIndex();};F.ptr.prototype.GetVirtualGridX=function(){var a;a=this;return a.VirtualGridX;};F.prototype.GetVirtualGridX=function(){return this.$val.GetVirtualGridX();};F.ptr.prototype.GetVirtualGridY=function(){var a;a=this;return a.VirtualGridY;};F.prototype.GetVirtualGridY=function(){return this.$val.GetVirtualGridY();};F.ptr.prototype.GetDirX=function(){var a;a=this;return a.DirX;};F.prototype.GetDirX=function(){return this.$val.GetDirX();};F.ptr.prototype.GetDirY=function(){var a;a=this;return a.DirY;};F.prototype.GetDirY=function(){return this.$val.GetDirY();};F.ptr.prototype.GetVelX=function(){var a;a=this;return a.VelX;};F.prototype.GetVelX=function(){return this.$val.GetVelX();};F.ptr.prototype.GetVelY=function(){var a;a=this;return a.VelY;};F.prototype.GetVelY=function(){return this.$val.GetVelY();};F.ptr.prototype.GetSpeed=function(){var a;a=this;return a.Speed;};F.prototype.GetSpeed=function(){return this.$val.GetSpeed();};F.ptr.prototype.GetHp=function(){var a;a=this;return a.Hp;};F.prototype.GetHp=function(){return this.$val.GetHp();};F.ptr.prototype.GetMaxHp=function(){var a;a=this;return a.MaxHp;};F.prototype.GetMaxHp=function(){return this.$val.GetMaxHp();};F.ptr.prototype.GetCharacterState=function(){var a;a=this;return a.CharacterState;};F.prototype.GetCharacterState=function(){return this.$val.GetCharacterState();};F.ptr.prototype.GetFramesToRecover=function(){var a;a=this;return a.FramesToRecover;};F.prototype.GetFramesToRecover=function(){return this.$val.GetFramesToRecover();};F.ptr.prototype.GetFramesInChState=function(){var a;a=this;return a.FramesInChState;};F.prototype.GetFramesInChState=function(){return this.$val.GetFramesInChState();};F.ptr.prototype.GetInAir=function(){var a;a=this;return a.InAir;};F.prototype.GetInAir=function(){return this.$val.GetInAir();};F.ptr.prototype.GetOnWall=function(){var a;a=this;return a.OnWall;};F.prototype.GetOnWall=function(){return this.$val.GetOnWall();};F.ptr.prototype.GetOnWallNormX=function(){var a;a=this;return a.OnWallNormX;};F.prototype.GetOnWallNormX=function(){return this.$val.GetOnWallNormX();};F.ptr.prototype.GetColliderRadius=function(){var a;a=this;return a.ColliderRadius;};F.prototype.GetColliderRadius=function(){return this.$val.GetColliderRadius();};L.ptr.prototype.GetBlState=function(){var a;a=this;return a.BlState;};L.prototype.GetBlState=function(){return this.$val.GetBlState();};L.ptr.prototype.GetFramesInBlState=function(){var a;a=this;return a.FramesInBlState;};L.prototype.GetFramesInBlState=function(){return this.$val.GetFramesInBlState();};L.ptr.prototype.GetBulletLocalId=function(){var a;a=this;return a.BattleAttr.BulletLocalId;};L.prototype.GetBulletLocalId=function(){return this.$val.GetBulletLocalId();};L.ptr.prototype.GetOffenderJoinIndex=function(){var a;a=this;return a.BattleAttr.OffenderJoinIndex;};L.prototype.GetOffenderJoinIndex=function(){return this.$val.GetOffenderJoinIndex();};L.ptr.prototype.GetOriginatedRenderFrameId=function(){var a;a=this;return a.BattleAttr.OriginatedRenderFrameId;};L.prototype.GetOriginatedRenderFrameId=function(){return this.$val.GetOriginatedRenderFrameId();};L.ptr.prototype.GetStartupFrames=function(){var a;a=this;return a.Bullet.StartupFrames;};L.prototype.GetStartupFrames=function(){return this.$val.GetStartupFrames();};L.ptr.prototype.GetActiveFrames=function(){var a;a=this;return a.Bullet.ActiveFrames;};L.prototype.GetActiveFrames=function(){return this.$val.GetActiveFrames();};L.ptr.prototype.GetHitboxSizeX=function(){var a;a=this;return a.Bullet.HitboxSizeX;};L.prototype.GetHitboxSizeX=function(){return this.$val.GetHitboxSizeX();};L.ptr.prototype.GetHitboxSizeY=function(){var a;a=this;return a.Bullet.HitboxSizeY;};L.prototype.GetHitboxSizeY=function(){return this.$val.GetHitboxSizeY();};L.ptr.prototype.GetHitboxOffsetX=function(){var a;a=this;return a.Bullet.HitboxOffsetX;};L.prototype.GetHitboxOffsetX=function(){return this.$val.GetHitboxOffsetX();};L.ptr.prototype.GetHitboxOffsetY=function(){var a;a=this;return a.Bullet.HitboxOffsetY;};L.prototype.GetHitboxOffsetY=function(){return this.$val.GetHitboxOffsetY();};L.ptr.prototype.GetExplosionFrames=function(){var a;a=this;return a.Bullet.ExplosionFrames;};L.prototype.GetExplosionFrames=function(){return this.$val.GetExplosionFrames();};L.ptr.prototype.GetSpeciesId=function(){var a;a=this;return a.Bullet.SpeciesId;};L.prototype.GetSpeciesId=function(){return this.$val.GetSpeciesId();};M.ptr.prototype.GetVirtualGridX=function(){var a;a=this;return a.VirtualGridX;};M.prototype.GetVirtualGridX=function(){return this.$val.GetVirtualGridX();};M.ptr.prototype.GetVirtualGridY=function(){var a;a=this;return a.VirtualGridY;};M.prototype.GetVirtualGridY=function(){return this.$val.GetVirtualGridY();};M.ptr.prototype.GetDirX=function(){var a;a=this;return a.DirX;};M.prototype.GetDirX=function(){return this.$val.GetDirX();};M.ptr.prototype.GetDirY=function(){var a;a=this;return a.DirY;};M.prototype.GetDirY=function(){return this.$val.GetDirY();};M.ptr.prototype.GetVelX=function(){var a;a=this;return a.VelX;};M.prototype.GetVelX=function(){return this.$val.GetVelX();};M.ptr.prototype.GetVelY=function(){var a;a=this;return a.VelY;};M.prototype.GetVelY=function(){return this.$val.GetVelY();};M.ptr.prototype.GetSpeed=function(){var a;a=this;return a.Speed;};M.prototype.GetSpeed=function(){return this.$val.GetSpeed();};M.ptr.prototype.GetBlState=function(){var a;a=this;return a.BlState;};M.prototype.GetBlState=function(){return this.$val.GetBlState();};M.ptr.prototype.GetFramesInBlState=function(){var a;a=this;return a.FramesInBlState;};M.prototype.GetFramesInBlState=function(){return this.$val.GetFramesInBlState();};M.ptr.prototype.GetBulletLocalId=function(){var a;a=this;return a.BattleAttr.BulletLocalId;};M.prototype.GetBulletLocalId=function(){return this.$val.GetBulletLocalId();};M.ptr.prototype.GetOffenderJoinIndex=function(){var a;a=this;return a.BattleAttr.OffenderJoinIndex;};M.prototype.GetOffenderJoinIndex=function(){return this.$val.GetOffenderJoinIndex();};M.ptr.prototype.GetOriginatedRenderFrameId=function(){var a;a=this;return a.BattleAttr.OriginatedRenderFrameId;};M.prototype.GetOriginatedRenderFrameId=function(){return this.$val.GetOriginatedRenderFrameId();};M.ptr.prototype.GetStartupFrames=function(){var a;a=this;return a.Bullet.StartupFrames;};M.prototype.GetStartupFrames=function(){return this.$val.GetStartupFrames();};M.ptr.prototype.GetActiveFrames=function(){var a;a=this;return a.Bullet.ActiveFrames;};M.prototype.GetActiveFrames=function(){return this.$val.GetActiveFrames();};M.ptr.prototype.GetHitboxSizeX=function(){var a;a=this;return a.Bullet.HitboxSizeX;};M.prototype.GetHitboxSizeX=function(){return this.$val.GetHitboxSizeX();};M.ptr.prototype.GetHitboxSizeY=function(){var a;a=this;return a.Bullet.HitboxSizeY;};M.prototype.GetHitboxSizeY=function(){return this.$val.GetHitboxSizeY();};M.ptr.prototype.GetHitboxOffsetX=function(){var a;a=this;return a.Bullet.HitboxOffsetX;};M.prototype.GetHitboxOffsetX=function(){return this.$val.GetHitboxOffsetX();};M.ptr.prototype.GetHitboxOffsetY=function(){var a;a=this;return a.Bullet.HitboxOffsetY;};M.prototype.GetHitboxOffsetY=function(){return this.$val.GetHitboxOffsetY();};M.ptr.prototype.GetExplosionFrames=function(){var a;a=this;return a.Bullet.ExplosionFrames;};M.prototype.GetExplosionFrames=function(){return this.$val.GetExplosionFrames();};M.ptr.prototype.GetSpeciesId=function(){var a;a=this;return a.Bullet.SpeciesId;};M.prototype.GetSpeciesId=function(){return this.$val.GetSpeciesId();};O.ptr.prototype.GetId=function(){var a;a=this;return a.Id;};O.prototype.GetId=function(){return this.$val.GetId();};O.ptr.prototype.GetCountdownNanos=function(){var a;a=this;return a.CountdownNanos;};O.prototype.GetCountdownNanos=function(){return this.$val.GetCountdownNanos();};O.ptr.prototype.GetBackendUnconfirmedMask=function(){var a;a=this;return a.BackendUnconfirmedMask;};O.prototype.GetBackendUnconfirmedMask=function(){return this.$val.GetBackendUnconfirmedMask();};O.ptr.prototype.GetBulletLocalIdCounter=function(){var a;a=this;return a.BulletLocalIdCounter;};O.prototype.GetBulletLocalIdCounter=function(){return this.$val.GetBulletLocalIdCounter();};O.ptr.prototype.GetShouldForceResync=function(){var a;a=this;return a.ShouldForceResync;};O.prototype.GetShouldForceResync=function(){return this.$val.GetShouldForceResync();};O.ptr.prototype.GetPlayersArr=function(){var a;a=this;return a.PlayersArr;};O.prototype.GetPlayersArr=function(){return this.$val.GetPlayersArr();};O.ptr.prototype.GetMeleeBullets=function(){var a;a=this;return a.MeleeBullets;};O.prototype.GetMeleeBullets=function(){return this.$val.GetMeleeBullets();};O.ptr.prototype.GetFireballBullets=function(){var a;a=this;return a.FireballBullets;};O.prototype.GetFireballBullets=function(){return this.$val.GetFireballBullets();};T=function(a,b,c){var a,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;d=c;if(d===(0)){if(1===a){if(0===b.FramesToRecover){if(b.InAir){return 255;}else{return 1;}}else{e=(f=U[$Int.keyFor(((b.ActiveSkillId>>0)))],f!==undefined?[f.v,true]:[BS.nil,false]);g=e[0];h=e[1];if(h){i=(j=g.Hits,k=b.ActiveSkillHit,((k<0||k>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+k]));if($assertType(i,BT,true)[1]){l=i.$val;if(l.Bullet.CancellableStFrame<=b.FramesInChState&&b.FramesInChState<l.Bullet.CancellableEdFrame){m=(n=l.Bullet.CancelTransit[$Int.keyFor(a)],n!==undefined?[n.v,true]:[0,false]);o=m[0];p=m[1];if(p){return o;}}}}}}else if(3===a){if((0===b.FramesToRecover)&&!b.InAir){return 15;}}else if(5===a){if(!b.InAir){return 12;}}return-1;}else if(d===(1)){if(1===a){if(0===b.FramesToRecover){if(b.InAir){return 256;}else{return 4;}}else{q=(r=U[$Int.keyFor(((b.ActiveSkillId>>0)))],r!==undefined?[r.v,true]:[BS.nil,false]);s=q[0];t=q[1];if(t){u=(v=s.Hits,w=b.ActiveSkillHit,((w<0||w>=v.$length)?($throwRuntimeError("index out of range"),undefined):v.$array[v.$offset+w]));if($assertType(u,BT,true)[1]){x=u.$val;if(x.Bullet.CancellableStFrame<=b.FramesInChState&&b.FramesInChState<x.Bullet.CancellableEdFrame){y=(z=x.Bullet.CancelTransit[$Int.keyFor(a)],z!==undefined?[z.v,true]:[0,false]);aa=y[0];ab=y[1];if(ab){return aa;}}}}}}else if(3===a){if((0===b.FramesToRecover)&&!b.InAir){return 16;}}else if(5===a){return 13;}return-1;}else if(d===(4096)){if(1===a){if(0===b.FramesToRecover){if(b.InAir){return 257;}else{return 7;}}else{ac=(ad=U[$Int.keyFor(((b.ActiveSkillId>>0)))],ad!==undefined?[ad.v,true]:[BS.nil,false]);ae=ac[0];af=ac[1];if(af){ag=(ah=ae.Hits,ai=b.ActiveSkillHit,((ai<0||ai>=ah.$length)?($throwRuntimeError("index out of range"),undefined):ah.$array[ah.$offset+ai]));if($assertType(ag,BT,true)[1]){aj=ag.$val;if(aj.Bullet.CancellableStFrame<=b.FramesInChState&&b.FramesInChState<aj.Bullet.CancellableEdFrame){ak=(al=aj.Bullet.CancelTransit[$Int.keyFor(a)],al!==undefined?[al.v,true]:[0,false]);am=ak[0];an=ak[1];if(an){return am;}}}}}}else if(2===a){if((0===b.FramesToRecover)&&!b.InAir){return 11;}}else if(3===a){if((0===b.FramesToRecover)&&!b.InAir){return 10;}}else if(5===a){if(!b.InAir){return 14;}}return-1;}return-1;};Z=function(a){var a;if(a<0){return-a;}return a;};AB=function(a){var a;return(((a&3))===0);};$pkg.ShouldGenerateInputFrameUpsync=AB;AC=function(a){var a;if(a<4){return 0;}return(((a-4>>0))>>2>>0);};$pkg.ConvertToDelayedInputFrameId=AC;AD=function(a){var a;return(a>>2>>0);};$pkg.ConvertToNoDelayInputFrameId=AD;AE=function(a){var a;return(((a<<2>>0))+4>>0);};$pkg.ConvertToFirstUsedRenderFrameId=AE;AF=function(a){var a;return(((((a<<2>>0))+4>>0)+4>>0)-1>>0);};$pkg.ConvertToLastUsedRenderFrameId=AF;AG=function(a){var a,b,c,d,e,f,g,h;b=new $Uint64(a.$high&0,(a.$low&15)>>>0);d=(((c=$shiftRightUint64(a,4),new $Uint64(c.$high&0,(c.$low&1)>>>0)).$low>>0));f=(((e=$shiftRightUint64(a,5),new $Uint64(e.$high&0,(e.$low&1)>>>0)).$low>>0));return new G.ptr((g=(($flatten64(b)<0||$flatten64(b)>=$pkg.DIRECTION_DECODER.$length)?($throwRuntimeError("index out of range"),undefined):$pkg.DIRECTION_DECODER.$array[$pkg.DIRECTION_DECODER.$offset+$flatten64(b)]),(0>=g.$length?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+0])),(h=(($flatten64(b)<0||$flatten64(b)>=$pkg.DIRECTION_DECODER.$length)?($throwRuntimeError("index out of range"),undefined):$pkg.DIRECTION_DECODER.$array[$pkg.DIRECTION_DECODER.$offset+$flatten64(b)]),(1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1])),d,f);};AI=function(a,b,c,d){var{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,$s,$deferred,$r,$c}=$restore(this,{a,b,c,d});$s=$s||0;var $err=null;try{s:while(true){switch($s){case 0:$deferred=[];$curGoroutine.deferStack.push($deferred);c=[c];e=[e];f=[f];g=c[0].Position();e[0]=g[0];f[0]=g[1];$deferred.push([(function(c,e,f){return function(){c[0].SetPosition(e[0],f[0]);};})(c,e,f),[]]);c[0].SetPosition(e[0]+a,f[0]+b);h=new AH.ptr(0,0,0,true,true,new B.Vector([0,0]));i=AJ(c[0],d,h);if(i){$s=1;continue;}$s=2;continue;case 1:j=h.Overlap*h.OverlapX;k=h.Overlap*h.OverlapY;l=j;m=k;n=[true,l,m,h];$s=4;case 4:return n;case 2:o=[false,0,0,h];$s=5;case 5:return o;case 3:$s=-1;return[false,0,0,BU.nil];}return;}}catch(err){$err=err;$s=-1;return[false,0,0,BU.nil];}finally{$callDeferred($deferred,$err);if($curGoroutine.asleep){var $f={$blk:AI,$c:true,$r,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,$s,$deferred};return $f;}}};AJ=function(a,b,c){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;d=a.Points.Cnt;e=b.Points.Cnt;f=d;g=e;if((1===f)&&(1===g)){if(!(BU.nil===c)){c.Overlap=0;}h=a.GetPointByOffset(0);i=b.GetPointByOffset(0);return((0>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+0])===(0>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+0]))&&((1>=h.$length?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+1])===(1>=i.$length?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+1]));}if(1<f){j=0;while(true){if(!(j<a.Points.Cnt)){break;}k=a.GetPointByOffset(j);l=a.GetPointByOffset(0);m=k;n=l;if(!((j===(a.Points.Cnt-1>>0)))){n=a.GetPointByOffset(j+1>>0);}o=(1>=n.$length?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+1])-(1>=m.$length?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+1]);p=(0>=n.$length?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+0])-(0>=m.$length?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+0]);q=new B.Vector([o,-p]).Unit();if(AP(a,b,q,c)){return false;}j=j+(1)>>0;}}if(1<g){r=0;while(true){if(!(r<b.Points.Cnt)){break;}s=b.GetPointByOffset(r);t=b.GetPointByOffset(0);u=s;v=t;if(!((r===(b.Points.Cnt-1>>0)))){v=b.GetPointByOffset(r+1>>0);}w=(1>=v.$length?($throwRuntimeError("index out of range"),undefined):v.$array[v.$offset+1])-(1>=u.$length?($throwRuntimeError("index out of range"),undefined):u.$array[u.$offset+1]);x=(0>=v.$length?($throwRuntimeError("index out of range"),undefined):v.$array[v.$offset+0])-(0>=u.$length?($throwRuntimeError("index out of range"),undefined):u.$array[u.$offset+0]);y=new B.Vector([w,-x]).Unit();if(AP(a,b,y,c)){return false;}r=r+(1)>>0;}}return true;};AK=function(a,b,c,d,e){var a,b,c,d,e;if(2===a){return false;}return((b+c>>0)<e)&&(((b+c>>0)+d>>0)>e);};$pkg.IsGeneralBulletActive=AK;AL=function(a,b){var a,b;return AK(a.BlState,a.BattleAttr.OriginatedRenderFrameId,a.Bullet.StartupFrames,a.Bullet.ActiveFrames,b.Id);};$pkg.IsMeleeBulletActive=AL;AM=function(a,b){var a,b;if(2===a.BlState){return a.FramesInBlState<a.Bullet.ExplosionFrames;}return((a.BattleAttr.OriginatedRenderFrameId+a.Bullet.StartupFrames>>0)+a.Bullet.ActiveFrames>>0)>b.Id;};$pkg.IsMeleeBulletAlive=AM;AN=function(a,b){var a,b;return AK(a.BlState,a.BattleAttr.OriginatedRenderFrameId,a.Bullet.StartupFrames,a.Bullet.ActiveFrames,b.Id);};$pkg.IsFireballBulletActive=AN;AO=function(a,b){var a,b;if(2===a.BlState){return a.FramesInBlState<a.Bullet.ExplosionFrames;}return((a.BattleAttr.OriginatedRenderFrameId+a.Bullet.StartupFrames>>0)+a.Bullet.ActiveFrames>>0)>b.Id;};$pkg.IsFireballBulletAlive=AO;AP=function(a,b,c,d){var a,aa,ab,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;e=1.7e+308;f=-1.7e+308;g=1.7e+308;h=-1.7e+308;i=e;j=f;k=g;l=h;m=0;while(true){if(!(m<a.Points.Cnt)){break;}n=a.GetPointByOffset(m);o=((0>=n.$length?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+0])+a.X)*(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0])+((1>=n.$length?($throwRuntimeError("index out of range"),undefined):n.$array[n.$offset+1])+a.Y)*(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]);if(i>o){i=o;}if(j<o){j=o;}m=m+(1)>>0;}p=0;while(true){if(!(p<b.Points.Cnt)){break;}q=b.GetPointByOffset(p);r=((0>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+0])+b.X)*(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0])+((1>=q.$length?($throwRuntimeError("index out of range"),undefined):q.$array[q.$offset+1])+b.Y)*(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1]);if(k>r){k=r;}if(l<r){l=r;}p=p+(1)>>0;}if(i>l||j<k){return true;}if(!(BU.nil===d)){s=0;if(i<k){d.AContainedInB=false;if(j<l){s=j-k;d.BContainedInA=false;}else{t=j-k;u=l-i;if(t<u){s=t;}else{s=-u;}}}else{d.BContainedInA=false;if(j>l){s=i-l;d.AContainedInB=false;}else{v=j-k;w=l-i;if(v<w){s=v;}else{s=-w;}}}x=d.Overlap;y=s;if(s<0){y=-s;}if(((0===(z=d.Axis,(0>=z.$length?($throwRuntimeError("index out of range"),undefined):z.$array[z.$offset+0])))&&(0===(aa=d.Axis,(1>=aa.$length?($throwRuntimeError("index out of range"),undefined):aa.$array[aa.$offset+1]))))||x>y){ab=1;if(s<0){ab=-1;}d.Overlap=y;d.OverlapX=(0>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+0])*ab;d.OverlapY=(1>=c.$length?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+1])*ab;}d.Axis=c;}return false;};AQ=function(a,b){var a,b,c,d;c=((A.Round(a*10)>>0));d=((A.Round(b*10)>>0));return[c,d];};$pkg.WorldToVirtualGridPos=AQ;AR=function(a,b){var a,b,c,d;c=(a)*0.1;d=(b)*0.1;return[c,d];};$pkg.VirtualGridToWorldPos=AR;AS=function(a,b,c,d,e,f,g,h,i,j){var a,b,c,d,e,f,g,h,i,j;return[a-c-g+i,b-d-f+j];};$pkg.WorldToPolygonColliderBLPos=AS;AT=function(a,b,c,d,e,f,g,h,i,j){var a,b,c,d,e,f,g,h,i,j;return[a+c+g-i,b+d+f-j];};$pkg.PolygonColliderBLToWorldPos=AT;AU=function(a,b,c,d,e,f,g,h,i,j){var a,b,c,d,e,f,g,h,i,j,k,l,m;k=AT(a,b,c,d,e,f,g,h,i,j);l=k[0];m=k[1];return AQ(l,m);};$pkg.PolygonColliderBLToVirtualGridPos=AU;AW=function(a,b,c,d,e,f,g,h,i){var{a,aa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,$s,$r,$c}=$restore(this,{a,b,c,d,e,f,g,h,i});$s=$s||0;s:while(true){switch($s){case 0:j=0;if((16===b.CharacterState)&&(0===c.VelX)&&(b.DirX===c.DirX)){k=1;if(0>c.DirX){k=-k;}j=k*(b.Speed)*0.1;}l=0;m=d.CheckAllWithHolder(j,0,i);if(!m){$s=-1;return l;}case 1:n=i.PopFirstCollidedObject();if(BV.nil===n){$s=2;continue;}o=false;p=n.Data;if($assertType(p,BW,true)[1]||$assertType(p,BT,true)[1]||$assertType(p,BX,true)[1]){}else{o=true;}if(!o){$s=1;continue;}q=$assertType(n.Shape,BY);s=AI(0,0,e,q);$s=3;case 3:if($c){$c=false;s=s.$blk();}if(s&&s.$blk!==undefined){break s;}r=s;t=r[0];u=r[1];v=r[2];w=r[3];if(!t){$s=1;continue;}x=(w.Overlap-f)*w.OverlapX;y=(w.Overlap-f)*w.OverlapY;u=x;v=y;z=w.OverlapX;aa=w.OverlapY;((l<0||l>=h.$length)?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+l]).X=z;((l<0||l>=h.$length)?($throwRuntimeError("index out of range"),undefined):h.$array[h.$offset+l]).Y=aa;g.X=g.X+(u);g.Y=g.Y+(v);l=l+(1)>>0;$s=1;continue;case 2:$s=-1;return l;}return;}var $f={$blk:AW,$c:true,$r,a,aa,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,$s};return $f;};AX=function(a,b,c,d,e,f,g){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;h=false;i=0;while(true){if(!(i<b)){break;}if((((i+1>>0)>>0))===g){i=i+(1)>>0;continue;}if((j=(k=$shiftLeft64(new $Uint64(0,1),((i>>>0))),new $Uint64(c.$high&k.$high,(c.$low&k.$low)>>>0)),(0<j.$high||(0===j.$high&&0<j.$low)))){i=i+(1)>>0;continue;}if(((i<0||i>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+i])>=a){i=i+(1)>>0;continue;}m=(l=((i<0||i>=f.$length)?($throwRuntimeError("index out of range"),undefined):f.$array[f.$offset+i]),new $Uint64(l.$high&0,(l.$low&15)>>>0));if(!((n=((i<0||i>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+i]),(m.$high===n.$high&&m.$low===n.$low)))){((i<0||i>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+i]=m);h=true;}i=i+(1)>>0;}return h;};$pkg.UpdateInputFrameInPlaceUponDynamics=AX;AY=function(a,b,c,d,e){var a,aa,ab,ac,ad,ae,af,ag,ah,ai,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;f=AC(c.Id);g=AC(c.Id-1>>0);if(0>=f){return[-2,false,0,0];}h=(i=W[$Int32.keyFor(a.CharacterState)],i!==undefined?[i.v,true]:[false,false]);j=h[1];if(j){return[-2,false,0,0];}k=$assertType(e.GetByFrameId(f),BZ);l=k.InputList;m=CA.nil;if(0<g){n=$assertType(e.GetByFrameId(g),BZ);m=n.InputList;}o=false;p=a.JoinIndex;r=AG((q=p-1>>0,((q<0||q>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+q])));s=0;t=0;u=s;v=t;w=0;x=0;y=w;z=x;if(!(CA.nil===m)){ab=AG((aa=p-1>>0,((aa<0||aa>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+aa])));y=ab.BtnALevel;z=ab.BtnBLevel;}if(0===a.FramesToRecover){ac=r.Dx;ad=r.Dy;u=ac;v=ad;}ae=-1;af=a.CapturedByInertia&&(((d.InertiaFramesToRecover>>1>>0))>a.FramesToRecover);if((0===a.FramesToRecover)||af){if(r.BtnBLevel>z){if(d.DashingEnabled&&0>r.Dy&&!((15===a.CharacterState))){ae=5;}else{ag=(ah=V[$Int32.keyFor(a.CharacterState)],ah!==undefined?[ah.v,true]:[false,false]);ai=ag[1];if(!ai){o=true;}else if(16===a.CharacterState){o=true;}}}}if(-1===ae){if(0<r.BtnALevel){if(r.BtnALevel>y){if(0>r.Dy){ae=3;}else if(0<r.Dy){ae=2;}else{ae=1;}}else{ae=4;}}}return[ae,o,u,v];};AZ=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var{a,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,b,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,c,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,d,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,e,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,f,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,g,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw,gx,gy,gz,h,ha,hb,hc,hd,he,hf,hg,hh,hi,hj,hk,hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,i,ia,ib,ic,id,ie,ig,ih,ii,ij,ik,il,im,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,j,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,$s,$r,$c}=$restore(this,{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q});$s=$s||0;s:while(true){switch($s){case 0:r=false;s=$assertType(h.GetByFrameId(b),CB);t=b+1>>0;u=s.PlayersArr.$length;v=CB.nil;w=h.GetByFrameId(t);if($interfaceIsEqual($ifaceNil,w)){if(t===h.EdFrameId){h.DryPut();w=h.GetByFrameId(t);if($interfaceIsEqual($ifaceNil,w)){v=BM(u,64,64);h.SetByFrameId(v,t);}else{v=$assertType(w,CB);}}else{$panic(new $String("Invalid nextRenderFrameId="+($encodeRune(t))+"!"));}}else{v=$assertType(w,CB);}x=v.PlayersArr;y=s.PlayersArr;z=0;while(true){if(!(z<y.$length)){break;}aa=z;ab=((z<0||z>=y.$length)?($throwRuntimeError("index out of range"),undefined):y.$array[y.$offset+z]);ac=ab.FramesToRecover-1>>0;ad=ab.FramesInChState+1>>0;ae=ab.FramesInvinsible-1>>0;if(ac<0){ac=0;}if(ae<0){ae=0;}BK(ab.Id,ab.VirtualGridX,ab.VirtualGridY,ab.DirX,ab.DirY,ab.VelX,ab.VelY,ac,ad,ab.ActiveSkillId,ab.ActiveSkillHit,ae,ab.Speed,ab.BattleState,ab.CharacterState,ab.JoinIndex,ab.Hp,ab.MaxHp,ab.ColliderRadius,true,false,ab.OnWallNormX,ab.OnWallNormY,ab.CapturedByInertia,ab.BulletTeamId,ab.ChCollisionTeamId,ab.RevivalVirtualGridX,ab.RevivalVirtualGridY,((aa<0||aa>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+aa]));z++;}af=0;ag=v.MeleeBullets;ah=0;ai=v.FireballBullets;aj=s.BulletLocalIdCounter;ak=AC(s.Id);if(0<ak){al=$assertType(a.GetByFrameId(ak),BZ);am=al.InputList;an=am.$length;if(p){r=AX(ak,an,al.ConfirmedList,am,n,o,q);}}ao=s.PlayersArr;ap=0;case 1:if(!(ap<ao.$length)){$s=2;continue;}aq=ap;ar=((ap<0||ap>=ao.$length)?($throwRuntimeError("index out of range"),undefined):ao.$array[ao.$offset+ap]);as=((aq<0||aq>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+aq]);at=((aq<0||aq>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+aq]);au=AY(ar,at,s,as,a);av=au[0];aw=au[1];ax=au[2];ay=au[3];((aq<0||aq>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+aq]=aw);az=ar.JoinIndex;ba=as.SkillMapper(av,ar,as.SpeciesId);$s=3;case 3:if($c){$c=false;ba=ba.$blk();}if(ba&&ba.$blk!==undefined){break s;}bb=ba;bc=(bd=U[$Int.keyFor(bb)],bd!==undefined?[bd.v,true]:[BS.nil,false]);be=bc[0];bf=bc[1];if(bf){at.ActiveSkillId=((bb>>0));at.ActiveSkillHit=0;at.FramesToRecover=be.RecoveryFrames;bg=1;if(0>at.DirX){bg=-bg;}bh=false;bi=(bj=be.Hits,bk=at.ActiveSkillHit,((bk<0||bk>=bj.$length)?($throwRuntimeError("index out of range"),undefined):bj.$array[bj.$offset+bk]));if($assertType(bi,BT,true)[1]){bl=bi.$val;BI(0,0,aj,b,az,ar.BulletTeamId,bl.Bullet,((af<0||af>=ag.$length)?($throwRuntimeError("index out of range"),undefined):ag.$array[ag.$offset+af]));aj=aj+(1)>>0;af=af+(1)>>0;if(!((-1===bl.Bullet.SelfLockVelX))){bh=true;at.VelX=$imul(bg,bl.Bullet.SelfLockVelX);}if(!((-1===bl.Bullet.SelfLockVelY))){bh=true;at.VelY=bl.Bullet.SelfLockVelY;}}else if($assertType(bi,BX,true)[1]){bm=bi.$val;BJ(0,0,ar.VirtualGridX+($imul(bg,bm.Bullet.HitboxOffsetX))>>0,ar.VirtualGridY+bm.Bullet.HitboxOffsetY>>0,bg,0,$imul(bm.Speed,bg),0,bm.Speed,aj,b,az,ar.BulletTeamId,bm.Bullet,((ah<0||ah>=ai.$length)?($throwRuntimeError("index out of range"),undefined):ai.$array[ai.$offset+ah]));aj=aj+(1)>>0;ah=ah+(1)>>0;if(!((-1===bm.Bullet.SelfLockVelX))){bh=true;at.VelX=$imul(bg,bm.Bullet.SelfLockVelX);}if(!((-1===bm.Bullet.SelfLockVelY))){bh=true;at.VelY=bm.Bullet.SelfLockVelY;}}if(false===bh&&false===ar.InAir){at.VelX=0;}at.CharacterState=be.BoundChState;ap++;$s=1;continue;}if(0===ar.FramesToRecover){bn=ar.CapturedByInertia;bo=as.OnWallEnabled&&(as.WallJumpingInitVelX===Z(ar.VelX));bp=true;bq=false;br=false;if(!((0===ax))&&(0===at.VelX)){bp=false;}else if((0===ax)&&!((0===at.VelX))){bp=false;br=true;}else if(0>($imul(ax,at.VelX))){bp=false;bq=true;}if(!aw&&!bo&&!bn&&!bp){at.CapturedByInertia=true;if(bq){at.CharacterState=17;at.FramesToRecover=as.InertiaFramesToRecover;}else if(br){at.FramesToRecover=as.InertiaFramesToRecover;}else{at.CharacterState=1;at.FramesToRecover=(as.InertiaFramesToRecover>>1>>0);}}else{at.CapturedByInertia=false;if(!((0===ax))){bs=1;if(0>ax){bs=-bs;}at.DirX=ax;at.DirY=ay;if(bo){at.VelX=$imul(bs,Z(ar.VelX));}else{at.VelX=$imul(bs,ar.Speed);}at.CharacterState=1;}else{at.CharacterState=0;at.VelX=0;}}}ap++;$s=1;continue;case 2:bt=0;bu=s.PlayersArr;bv=0;case 4:if(!(bv<bu.$length)){$s=5;continue;}bw=bv;bx=((bv<0||bv>=bu.$length)?($throwRuntimeError("index out of range"),undefined):bu.$array[bu.$offset+bv]);by=bx.JoinIndex;bz=0;ca=0;(cb=by-1>>0,((cb<0||cb>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+cb])).X=bz;(cc=by-1>>0,((cc<0||cc>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+cc])).Y=ca;cd=((bw<0||bw>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+bw]);ce=((bw<0||bw>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+bw]);cf=bx.VirtualGridX+bx.VelX>>0;cg=bx.VirtualGridY+bx.VelY>>0;ch=cf;ci=cg;if(0>=cd.Hp&&(0===cd.FramesToRecover)){cj=bx.RevivalVirtualGridX;ck=bx.RevivalVirtualGridY;ch=cj;ci=ck;cd.CharacterState=10;cd.FramesInChState=10;cd.FramesToRecover=ce.GetUpFramesToRecover;cd.FramesInvinsible=ce.GetUpInvinsibleFrames;cd.Hp=bx.MaxHp;if(0===((cl=cd.JoinIndex%2,cl===cl?cl:$throwRuntimeError("integer divide by zero")))){cd.DirX=-2;cd.DirY=0;}else{cd.DirX=2;cd.DirY=0;}}if(((bw<0||bw>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+bw])){if(16===bx.CharacterState){if(0<($imul(bx.VelX,bx.OnWallNormX))){ch=ch-(bx.VelX)>>0;}cm=-1;if(0>bx.OnWallNormX){cm=-cm;}ch=ch+(($imul(cm,ce.WallJumpingInitVelX)))>>0;ci=ci+(ce.WallJumpingInitVelY)>>0;cd.VelX=(($imul(cm,ce.WallJumpingInitVelX)));cd.VelY=(ce.WallJumpingInitVelY);cd.FramesToRecover=ce.WallJumpingFramesToRecover;}else{cd.VelY=(ce.JumpingInitVelY);ci=ci+(ce.JumpingInitVelY)>>0;}}cn=AR(ch,ci);co=cn[0];cp=cn[1];cq=$imul(bx.ColliderRadius,2);cr=$imul(bx.ColliderRadius,4);cs=cq;ct=cr;cu=bx.CharacterState;if(cu===(9)){cv=$imul(bx.ColliderRadius,4);cw=$imul(bx.ColliderRadius,2);cs=cv;ct=cw;}else if((cu===(8))||(cu===(4))||(cu===(5))||(cu===(16))){cx=$imul(bx.ColliderRadius,2);cy=$imul(bx.ColliderRadius,2);cs=cx;ct=cy;}cz=AR(cs,ct);da=cz[0];db=cz[1];dc=((bt<0||bt>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+bt]);BC(dc,co,cp,da,db,0.1,0.1,0.1,0.1,e,f,bx,"Player");bt=bt+(1)>>0;$r=c.AddSingle(dc);$s=6;case 6:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}if(bx.InAir){if((16===bx.CharacterState)&&!((bw<0||bw>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+bw])){cd.VelX=cd.VelX+(0)>>0;cd.VelY=ce.WallSlidingVelY;}else if(15===bx.CharacterState){cd.VelX=cd.VelX+(0)>>0;}else{cd.VelX=cd.VelX+(0)>>0;cd.VelY=cd.VelY+(-5)>>0;}}bv++;$s=4;continue;case 5:dd=s.FireballBullets;de=0;case 7:if(!(de<dd.$length)){$s=8;continue;}df=((de<0||de>=dd.$length)?($throwRuntimeError("index out of range"),undefined):dd.$array[dd.$offset+de]);if(-1===df.BattleAttr.BulletLocalId){$s=8;continue;}dg=((ah<0||ah>=ai.$length)?($throwRuntimeError("index out of range"),undefined):ai.$array[ai.$offset+ah]);BJ(df.BlState,df.FramesInBlState+1>>0,df.VirtualGridX,df.VirtualGridY,df.DirX,df.DirY,df.VelX,df.VelY,df.Speed,df.BattleAttr.BulletLocalId,df.BattleAttr.OriginatedRenderFrameId,df.BattleAttr.OffenderJoinIndex,df.BattleAttr.TeamId,df.Bullet,dg);if(AO(dg,s)){$s=9;continue;}$s=10;continue;case 9:if(AN(dg,s)){$s=11;continue;}$s=12;continue;case 11:dh=AR(dg.VirtualGridX,dg.VirtualGridY);di=dh[0];dj=dh[1];dk=AR(dg.Bullet.HitboxSizeX,dg.Bullet.HitboxSizeY);dl=dk[0];dm=dk[1];dn=((bt<0||bt>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+bt]);BC(dn,di,dj,dl,dm,0.1,0.1,0.1,0.1,e,f,dg,"FireballBullet");bt=bt+(1)>>0;$r=c.AddSingle(dn);$s=14;case 14:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}dg.BlState=1;if(!((dg.BlState===df.BlState))){dg.FramesInBlState=0;}dp=dg.VirtualGridX+dg.VelX>>0;dq=dg.VirtualGridY+dg.VelY>>0;dg.VirtualGridX=dp;dg.VirtualGridY=dq;$s=13;continue;case 12:dt=(dr=s.PlayersArr,ds=dg.BattleAttr.OffenderJoinIndex-1>>0,((ds<0||ds>=dr.$length)?($throwRuntimeError("index out of range"),undefined):dr.$array[dr.$offset+ds]));du=(dv=W[$Int32.keyFor(dt.CharacterState)],dv!==undefined?[dv.v,true]:[false,false]);dw=du[1];if(dw){de++;$s=7;continue;}case 13:ah=ah+(1)>>0;case 10:de++;$s=7;continue;case 8:((ah<0||ah>=ai.$length)?($throwRuntimeError("index out of range"),undefined):ai.$array[ai.$offset+ah]).BattleAttr.BulletLocalId=-1;dx=s.MeleeBullets;dy=0;case 15:if(!(dy<dx.$length)){$s=16;continue;}dz=((dy<0||dy>=dx.$length)?($throwRuntimeError("index out of range"),undefined):dx.$array[dx.$offset+dy]);if(-1===dz.BattleAttr.BulletLocalId){$s=16;continue;}ea=((af<0||af>=ag.$length)?($throwRuntimeError("index out of range"),undefined):ag.$array[ag.$offset+af]);BI(dz.BlState,dz.FramesInBlState+1>>0,dz.BattleAttr.BulletLocalId,dz.BattleAttr.OriginatedRenderFrameId,dz.BattleAttr.OffenderJoinIndex,dz.BattleAttr.TeamId,dz.Bullet,ea);if(AM(ea,s)){$s=17;continue;}$s=18;continue;case 17:ed=(eb=s.PlayersArr,ec=ea.BattleAttr.OffenderJoinIndex-1>>0,((ec<0||ec>=eb.$length)?($throwRuntimeError("index out of range"),undefined):eb.$array[eb.$offset+ec]));ee=(ef=W[$Int32.keyFor(ed.CharacterState)],ef!==undefined?[ef.v,true]:[false,false]);eg=ee[1];if(eg){dy++;$s=15;continue;}if(AL(ea,s)){$s=19;continue;}$s=20;continue;case 19:eh=1;if(0>ed.DirX){eh=-eh;}ei=AR(ed.VirtualGridX+($imul(eh,ea.Bullet.HitboxOffsetX))>>0,ed.VirtualGridY);ej=ei[0];ek=ei[1];el=AR(ea.Bullet.HitboxSizeX,ea.Bullet.HitboxSizeY);em=el[0];en=el[1];eo=((bt<0||bt>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+bt]);BC(eo,ej,ek,em,en,0.1,0.1,0.1,0.1,e,f,ea,"MeleeBullet");bt=bt+(1)>>0;$r=c.AddSingle(eo);$s=21;case 21:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}ea.BlState=1;if(!((ea.BlState===dz.BlState))){ea.FramesInBlState=0;}case 20:af=af+(1)>>0;case 18:dy++;$s=15;continue;case 16:((af<0||af>=ag.$length)?($throwRuntimeError("index out of range"),undefined):ag.$array[ag.$offset+af]).BattleAttr.BulletLocalId=-1;ep=s.PlayersArr;eq=0;case 22:if(!(eq<ep.$length)){$s=23;continue;}er=eq;es=((eq<0||eq>=ep.$length)?($throwRuntimeError("index out of range"),undefined):ep.$array[ep.$offset+eq]);et=es.JoinIndex;eu=((er<0||er>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+er]);ev=$assertType(eu.Shape,BY);ew=((er<0||er>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+er]);ez=AW(et,es,ew,eu,ev,0.1,(ex=et-1>>0,((ex<0||ex>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+ex])),(ey=et-1>>0,((ey<0||ey>=k.$length)?($throwRuntimeError("index out of range"),undefined):k.$array[k.$offset+ey])),i);$s=24;case 24:if($c){$c=false;ez=ez.$blk();}if(ez&&ez.$blk!==undefined){break s;}fa=ez;fb=((er<0||er>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+er]);fc=false;fd=eu.CheckAllWithHolder(0,0,i);if(fd){$s=25;continue;}$s=26;continue;case 25:case 27:fe=i.PopFirstCollidedObject();if(BV.nil===fe){$s=28;continue;}ff=false;fg=false;fh=false;fi=ff;fj=fg;fk=fh;fl=fe.Data;if($assertType(fl,BW,true)[1]){fm=fl.$val;if(18===fm.CharacterState){$s=27;continue;}fj=true;}else if($assertType(fl,BT,true)[1]||$assertType(fl,BX,true)[1]){fn=fl;fk=true;}else{fo=fl;fi=true;}if(fk){$s=27;continue;}fp=$assertType(fe.Shape,BY);fr=AI(0,0,ev,fp);$s=29;case 29:if($c){$c=false;fr=fr.$blk();}if(fr&&fr.$blk!==undefined){break s;}fq=fr;fs=fq[0];ft=fq[1];fu=fq[2];fv=fq[3];if(!fs){$s=27;continue;}fw=fv.OverlapX*0+fv.OverlapY*-1;if(fj){fx=(fv.Overlap-0.2)*fv.OverlapX;fy=(fv.Overlap-0.2)*fv.OverlapY;ft=fx;fu=fy;}fz=0;while(true){if(!(fz<fa)){break;}gc=(ga=(gb=et-1>>0,((gb<0||gb>=k.$length)?($throwRuntimeError("index out of range"),undefined):k.$array[k.$offset+gb])),((fz<0||fz>=ga.$length)?($throwRuntimeError("index out of range"),undefined):ga.$array[ga.$offset+fz]));gd=ft*gc.X+fu*gc.Y;if(fi||(fj&&0>gd)){ft=ft-(gd*gc.X);fu=fu-(gd*gc.Y);}fz=fz+(1)>>0;}ge=et-1>>0;((ge<0||ge>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+ge]).X=((ge<0||ge>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+ge]).X+(ft);gf=et-1>>0;((gf<0||gf>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+gf]).Y=((gf<0||gf>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+gf]).Y+(fu);if(0.5<fw){fc=true;}$s=27;continue;case 28:case 26:if(fc){ew.InAir=false;gg=es.InAir&&0>=es.VelY;if(gg){ew.VelY=0;ew.VelX=0;if(18===ew.CharacterState){}else if(8===ew.CharacterState){ew.CharacterState=9;ew.FramesToRecover=fb.LayDownFramesToRecover;}else{gh=es.CharacterState;if((gh===(8))||(gh===(4))||(gh===(5))||(gh===(16))){gi=0;gj=es.ColliderRadius;gk=gi;gl=gj;gm=AR(gk,gl);gn=gm[1];go=et-1>>0;((go<0||go>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+go]).Y=((go<0||go>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+go]).Y-(gn);}ew.CharacterState=0;ew.FramesToRecover=0;}}else{gp=(gq=Y[$Int32.keyFor(ew.CharacterState)],gq!==undefined?[gq.v,true]:[false,false]);gr=gp[1];if(gr){if(18===ew.CharacterState){ew.VelY=0;ew.VelX=0;}else if(9===ew.CharacterState){if(0===ew.FramesToRecover){ew.CharacterState=10;ew.FramesToRecover=fb.GetUpFramesToRecover;}}else if(10===ew.CharacterState){if(0===ew.FramesToRecover){ew.CharacterState=0;ew.FramesInvinsible=fb.GetUpInvinsibleFrames;}}}}}if(fb.OnWallEnabled){if(ew.InAir){gs=(gt=W[$Int32.keyFor(es.CharacterState)],gt!==undefined?[gt.v,true]:[false,false]);gu=gs[1];if(!gu){gv=0;while(true){if(!(gv<fa)){break;}gy=(gw=(gx=et-1>>0,((gx<0||gx>=k.$length)?($throwRuntimeError("index out of range"),undefined):k.$array[k.$offset+gx])),((gv<0||gv>=gw.$length)?($throwRuntimeError("index out of range"),undefined):gw.$array[gw.$offset+gv]));gz=gy.X*1+gy.Y*0;ha=gy.X*-1+gy.Y*0;if(0.9<gz){ew.OnWall=true;hb=((gy.X>>0));hc=((gy.Y>>0));ew.OnWallNormX=hb;ew.OnWallNormY=hc;break;}if(0.9<ha){ew.OnWall=true;hd=((gy.X>>0));he=((gy.Y>>0));ew.OnWallNormX=hd;ew.OnWallNormY=he;break;}gv=gv+(1)>>0;}}}if(!ew.OnWall){hf=0;hg=0;ew.OnWallNormX=hf;ew.OnWallNormY=hg;}}eq++;$s=22;continue;case 23:hh=x.$length;case 30:if(!(hh<bt)){$s=31;continue;}hi=((hh<0||hh>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+hh]);hj=hi.CheckAllWithHolder(0,0,i);if(!hj){hh=hh+(1)>>0;$s=30;continue;}hk=false;hl=false;hm=BR.nil;hn=BQ.nil;ho=hi.Data;if($assertType(ho,BT,true)[1]){hp=ho.$val;hm=hp.Bullet;hn=hp.BattleAttr;}else if($assertType(ho,BX,true)[1]){hq=ho.$val;hm=hq.Bullet;hn=hq.BattleAttr;}hr=$assertType(hi.Shape,BY);hu=(hs=s.PlayersArr,ht=hn.OffenderJoinIndex-1>>0,((ht<0||ht>=hs.$length)?($throwRuntimeError("index out of range"),undefined):hs.$array[hs.$offset+ht]));case 32:hv=i.PopFirstCollidedObject();if(BV.nil===hv){$s=33;continue;}hw=$assertType(hv.Shape,BY);hx=hv.Data;if($assertType(hx,BW,true)[1]){$s=34;continue;}$s=35;continue;case 34:hy=hx.$val;if(hn.OffenderJoinIndex===hy.JoinIndex){$s=32;continue;}ib=AI(0,0,hr,hw);$s=37;case 37:if($c){$c=false;ib=ib.$blk();}if(ib&&ib.$blk!==undefined){break s;}ia=ib;ic=ia[0];if(!ic){$s=32;continue;}id=(ie=X[$Int32.keyFor(hy.CharacterState)],ie!==undefined?[ie.v,true]:[false,false]);ig=id[1];if(ig){$s=32;continue;}if(0<hy.FramesInvinsible){$s=32;continue;}hk=true;hl=true;ih=1;if(0>hu.DirX){ih=-ih;}ij=(ii=hy.JoinIndex-1>>0,((ii<0||ii>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+ii]));ij.Hp=ij.Hp-(hm.Damage)>>0;ik=$imul(ih,hm.PushbackVelX);il=hm.PushbackVelY;im=ik;io=il;ij.VelX=im;ij.VelY=io;if(0>=ij.Hp){ij.Hp=0;ij.CharacterState=18;ij.FramesToRecover=60;}else{if(hm.BlowUp){ij.CharacterState=8;}else{ij.CharacterState=3;}iq=(ip=hy.JoinIndex-1>>0,((ip<0||ip>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+ip])).FramesToRecover;if(hm.HitStunFrames>iq){ij.FramesToRecover=hm.HitStunFrames;}}$s=36;continue;case 35:hz=hx;hk=true;case 36:$s=32;continue;case 33:if(hk){ir=hi.Data;if($assertType(ir,BT,true)[1]){is=ir.$val;is.BlState=2;if(hl){is.FramesInBlState=0;}else{is.FramesInBlState=is.Bullet.ExplosionFrames+1>>0;}}else if($assertType(ir,BX,true)[1]){it=ir.$val;it.BlState=2;it.FramesInBlState=0;}}hh=hh+(1)>>0;$s=30;continue;case 31:iu=s.PlayersArr;iv=0;while(true){if(!(iv<iu.$length)){break;}iw=iv;ix=((iv<0||iv>=iu.$length)?($throwRuntimeError("index out of range"),undefined):iu.$array[iu.$offset+iv]);iy=ix.JoinIndex;iz=((iw<0||iw>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+iw]);ja=((iw<0||iw>=x.$length)?($throwRuntimeError("index out of range"),undefined):x.$array[x.$offset+iw]);jb=AU(iz.X-(jc=iy-1>>0,((jc<0||jc>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+jc])).X,iz.Y-(jd=iy-1>>0,((jd<0||jd>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+jd])).Y,iz.W*0.5,iz.H*0.5,0,0,0,0,e,f);ja.VirtualGridX=jb[0];ja.VirtualGridY=jb[1];if(ja.InAir){je=ja.CharacterState;jf=je;if((jf===(0))||(jf===(1))||(jf===(17))){if(((iw<0||iw>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+iw])||(5===ix.CharacterState)){ja.CharacterState=5;}else{ja.CharacterState=4;}}else if(jf===(2)){ja.CharacterState=6;}else if(jf===(3)){ja.CharacterState=7;}}if(ja.OnWall){jg=ja.CharacterState;if((jg===(1))||(jg===(5))||(jg===(4))){jh=(16===ix.CharacterState);ji=ix.OnWall&&12<=ja.FramesInChState;if(jh||ji){ja.CharacterState=16;}}}if(!((ja.CharacterState===ix.CharacterState))){ja.FramesInChState=0;}jj=(jk=Y[$Int32.keyFor(ja.CharacterState)],jk!==undefined?[jk.v,true]:[false,false]);jl=jj[1];if(jl){ja.ActiveSkillId=-1;ja.ActiveSkillHit=-1;}iv++;}jm=0;while(true){if(!(jm<bt)){break;}jn=((jm<0||jm>=m.$length)?($throwRuntimeError("index out of range"),undefined):m.$array[m.$offset+jm]);jn.Space.RemoveSingle(jn);jm=jm+(1)>>0;}v.Id=t;v.BulletLocalIdCounter=aj;$s=-1;return r;}return;}var $f={$blk:AZ,$c:true,$r,a,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,b,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,c,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,d,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,e,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,f,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,g,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw,gx,gy,gz,h,ha,hb,hc,hd,he,hf,hg,hh,hi,hj,hk,hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,i,ia,ib,ic,id,ie,ig,ih,ii,ij,ik,il,im,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,j,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,$s};return $f;};$pkg.ApplyInputFrameDownsyncDynamicsOnSingleRenderFrame=AZ;BA=function(a,b,c,d,e,f,g,h,i,j,k,l){var{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,$s,$r,$c}=$restore(this,{a,b,c,d,e,f,g,h,i,j,k,l});$s=$s||0;s:while(true){switch($s){case 0:m=AS(a,b,c*0.5,d*0.5,e,f,g,h,i,j);n=m[0];o=m[1];p=BB(n,o,g+c+h,f+d+e,k,l);$s=1;case 1:if($c){$c=false;p=p.$blk();}if(p&&p.$blk!==undefined){break s;}q=p;$s=2;case 2:return q;}return;}var $f={$blk:BA,$c:true,$r,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,$s};return $f;};$pkg.GenerateRectCollider=BA;BB=function(a,b,c,d,e,f){var{a,b,c,d,e,f,g,h,$s,$r,$c}=$restore(this,{a,b,c,d,e,f});$s=$s||0;s:while(true){switch($s){case 0:g=B.NewObjectSingleTag(a,b,c,d,f);h=B.NewRectangle(0,0,c,d);$r=g.SetShape(h);$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}g.Data=e;$s=-1;return g;}return;}var $f={$blk:BB,$c:true,$r,a,b,c,d,e,f,g,h,$s};return $f;};BC=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;n=AS(b,c,d*0.5,e*0.5,f,g,h,i,j,k);o=n[0];p=n[1];q=h+d+i;r=g+e+f;s=q;t=r;u=o;v=p;w=s;x=t;a.X=u;a.Y=v;a.W=w;a.H=x;y=$assertType(a.Shape,BY);y.UpdateAsRectangle(0,0,s,t);a.Data=l;};$pkg.UpdateRectCollider=BC;BD=function(a,b,c,d,e){var{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,$s,$r,$c}=$restore(this,{a,b,c,d,e});$s=$s||0;s:while(true){switch($s){case 0:f=BE(a);g=0;h=0;i=g;j=h;k=B.NewConvexPolygon(CC.nil);l=f.Points;m=0;while(true){if(!(m<l.$length)){break;}n=m;o=((m<0||m>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+m]);p=f.Points;q=0;while(true){if(!(q<p.$length)){break;}r=q;s=((q<0||q>=p.$length)?($throwRuntimeError("index out of range"),undefined):p.$array[p.$offset+q]);if(n===r){q++;continue;}if(A.Abs(s.X-o.X)>i){i=A.Abs(s.X-o.X);}if(A.Abs(s.Y-o.Y)>j){j=A.Abs(s.Y-o.Y);}q++;}m++;}t=0;while(true){if(!(t<f.Points.$length)){break;}v=(u=f.Points,((t<0||t>=u.$length)?($throwRuntimeError("index out of range"),undefined):u.$array[u.$offset+t]));k.AddPoints(new CC([v.X,v.Y]));t=t+(1)>>0;}w=B.NewObject(f.Anchor.X+b,f.Anchor.Y+c,i,j,new CD([e]));$r=w.SetShape(k);$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}w.Data=d;$s=-1;return w;}return;}var $f={$blk:BD,$c:true,$r,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,$s};return $f;};$pkg.GenerateConvexPolygonCollider=BD;BE=function(a){var a,b,c,d,e,f,g,h,i,j,k;b=new D.ptr(1.7e+308,1.7e+308);c=a.Points;d=0;while(true){if(!(d<c.$length)){break;}e=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);if(e.X<b.X){b.X=e.X;}if(e.Y<b.Y){b.Y=e.Y;}d++;}f=new E.ptr(new D.ptr(a.Anchor.X+b.X,a.Anchor.Y+b.Y),$makeSlice(CF,a.Points.$length));g=a.Points;h=0;while(true){if(!(h<g.$length)){break;}i=h;j=((h<0||h>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+h]);(k=f.Points,((i<0||i>=k.$length)?($throwRuntimeError("index out of range"),undefined):k.$array[k.$offset+i]=new D.ptr(j.X-b.X,j.Y-b.Y)));h++;}return f;};$pkg.AlignPolygon2DToBoundingBox=BE;BF=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return new L.ptr(u,v,new K.ptr(a,b,c,t),new J.ptr(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,w,x,false));};$pkg.NewMeleeBullet=BF;BG=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad,ae){var a,aa,ab,ac,ad,ae,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return new M.ptr(u,v,w,x,y,z,aa,ab,ac,new K.ptr(a,b,c,t),new J.ptr(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,ad,ae,false));};$pkg.NewFireballBullet=BG;BH=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab){var a,aa,ab,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return new F.ptr(a,b,c,d,e,f,g,m,n,p,s,false,0,0,h,i,q,r,o,t,u,v,w,x,j,k,l,y,z,aa,ab);};$pkg.NewPlayerDownsync=BH;BI=function(a,b,c,d,e,f,g,h){var a,b,c,d,e,f,g,h;h.BlState=a;h.FramesInBlState=b;h.BattleAttr.BulletLocalId=c;h.BattleAttr.OriginatedRenderFrameId=d;h.BattleAttr.OffenderJoinIndex=e;h.BattleAttr.TeamId=f;h.Bullet=g;};$pkg.CloneMeleeBullet=BI;BJ=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;o.BlState=a;o.FramesInBlState=b;o.VirtualGridX=c;o.VirtualGridY=d;o.DirX=e;o.DirY=f;o.VelX=g;o.VelY=h;o.Speed=i;o.BattleAttr.BulletLocalId=j;o.BattleAttr.OriginatedRenderFrameId=k;o.BattleAttr.OffenderJoinIndex=l;o.BattleAttr.TeamId=m;o.Bullet=n;};$pkg.CloneFireballBullet=BJ;BK=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac){var a,aa,ab,ac,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;ac.Id=a;ac.VirtualGridX=b;ac.VirtualGridY=c;ac.DirX=d;ac.DirY=e;ac.VelX=f;ac.VelY=g;ac.FramesToRecover=h;ac.FramesInChState=i;ac.ActiveSkillId=j;ac.ActiveSkillHit=k;ac.FramesInvinsible=l;ac.Speed=m;ac.BattleState=n;ac.CharacterState=o;ac.JoinIndex=p;ac.Hp=q;ac.MaxHp=r;ac.ColliderRadius=s;ac.InAir=t;ac.OnWall=u;ac.OnWallNormX=v;ac.OnWallNormY=w;ac.CapturedByInertia=x;ac.BulletTeamId=y;ac.ChCollisionTeamId=z;ac.RevivalVirtualGridX=aa;ac.RevivalVirtualGridY=ab;};$pkg.ClonePlayerDownsync=BK;BL=function(a,b,c,d,e,f){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;f.Id=a;f.BulletLocalIdCounter=c;g=0;while(true){if(!(g<b.$length)){break;}h=((g<0||g>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+g]);if(BW.nil===h||(-1===h.Id)){break;}BK(h.Id,h.VirtualGridX,h.VirtualGridY,h.DirX,h.DirY,h.VelX,h.VelY,h.FramesToRecover,h.FramesInChState,h.ActiveSkillId,h.ActiveSkillHit,h.FramesInvinsible,h.Speed,h.BattleState,h.CharacterState,h.JoinIndex,h.Hp,h.MaxHp,h.ColliderRadius,h.InAir,h.OnWall,h.OnWallNormX,h.OnWallNormY,h.CapturedByInertia,h.BulletTeamId,h.ChCollisionTeamId,h.RevivalVirtualGridX,h.RevivalVirtualGridY,(i=f.PlayersArr,((g<0||g>=i.$length)?($throwRuntimeError("index out of range"),undefined):i.$array[i.$offset+g])));g=g+(1)>>0;}j=0;while(true){if(!(j<d.$length)){break;}k=((j<0||j>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+j]);if(BT.nil===k||(-1===k.BattleAttr.BulletLocalId)){break;}BI(k.BlState,k.FramesInBlState,k.BattleAttr.BulletLocalId,k.BattleAttr.OriginatedRenderFrameId,k.BattleAttr.OffenderJoinIndex,k.BattleAttr.TeamId,k.Bullet,(l=f.MeleeBullets,((j<0||j>=l.$length)?($throwRuntimeError("index out of range"),undefined):l.$array[l.$offset+j])));j=j+(1)>>0;}m=0;while(true){if(!(m<e.$length)){break;}n=((m<0||m>=e.$length)?($throwRuntimeError("index out of range"),undefined):e.$array[e.$offset+m]);if(BX.nil===n||(-1===n.BattleAttr.BulletLocalId)){break;}BJ(n.BlState,n.FramesInBlState,n.VirtualGridX,n.VirtualGridY,n.DirX,n.DirY,n.VelX,n.VelY,n.Speed,n.BattleAttr.BulletLocalId,n.BattleAttr.OriginatedRenderFrameId,n.BattleAttr.OffenderJoinIndex,n.BattleAttr.TeamId,n.Bullet,(o=f.FireballBullets,((m<0||m>=o.$length)?($throwRuntimeError("index out of range"),undefined):o.$array[o.$offset+m])));m=m+(1)>>0;}};$pkg.CloneRoomDownsyncFrame=BL;BM=function(a,b,c){var a,b,c,d,e,f,g,h,i,j,k,l;d=$makeSlice(CG,a);e=0;while(true){if(!(e<a)){break;}f=BH(-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,false,false,0,0,false,0,0,0,0);((e<0||e>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+e]=f);e=e+(1)>>0;}g=$makeSlice(CH,b);h=0;while(true){if(!(h<b)){break;}i=BF(-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,false,0,0,0,0,0);((h<0||h>=g.$length)?($throwRuntimeError("index out of range"),undefined):g.$array[g.$offset+h]=i);h=h+(1)>>0;}j=$makeSlice(CI,c);k=0;while(true){if(!(k<c)){break;}l=BG(-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,false,0,0,0,0,0,0,0,0,0,0,0,0);((k<0||k>=j.$length)?($throwRuntimeError("index out of range"),undefined):j.$array[j.$offset+k]=l);k=k+(1)>>0;}return new O.ptr(-1,d,new $Int64(0,0),g,j,new $Uint64(0,0),false,-1);};$pkg.NewPreallocatedRoomDownsyncFrame=BM;BW.methods=[{prop:"GetId",name:"GetId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetJoinIndex",name:"GetJoinIndex",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVirtualGridX",name:"GetVirtualGridX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVirtualGridY",name:"GetVirtualGridY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetDirX",name:"GetDirX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetDirY",name:"GetDirY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVelX",name:"GetVelX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVelY",name:"GetVelY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetSpeed",name:"GetSpeed",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHp",name:"GetHp",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetMaxHp",name:"GetMaxHp",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetCharacterState",name:"GetCharacterState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetFramesToRecover",name:"GetFramesToRecover",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetFramesInChState",name:"GetFramesInChState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetInAir",name:"GetInAir",pkg:"",typ:$funcType([],[$Bool],false)},{prop:"GetOnWall",name:"GetOnWall",pkg:"",typ:$funcType([],[$Bool],false)},{prop:"GetOnWallNormX",name:"GetOnWallNormX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetColliderRadius",name:"GetColliderRadius",pkg:"",typ:$funcType([],[$Int32],false)}];BT.methods=[{prop:"GetBlState",name:"GetBlState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetFramesInBlState",name:"GetFramesInBlState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetBulletLocalId",name:"GetBulletLocalId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetOffenderJoinIndex",name:"GetOffenderJoinIndex",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetOriginatedRenderFrameId",name:"GetOriginatedRenderFrameId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetStartupFrames",name:"GetStartupFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetActiveFrames",name:"GetActiveFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxSizeX",name:"GetHitboxSizeX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxSizeY",name:"GetHitboxSizeY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxOffsetX",name:"GetHitboxOffsetX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxOffsetY",name:"GetHitboxOffsetY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetExplosionFrames",name:"GetExplosionFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetSpeciesId",name:"GetSpeciesId",pkg:"",typ:$funcType([],[$Int32],false)}];BX.methods=[{prop:"GetVirtualGridX",name:"GetVirtualGridX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVirtualGridY",name:"GetVirtualGridY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetDirX",name:"GetDirX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetDirY",name:"GetDirY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVelX",name:"GetVelX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetVelY",name:"GetVelY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetSpeed",name:"GetSpeed",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetBlState",name:"GetBlState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetFramesInBlState",name:"GetFramesInBlState",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetBulletLocalId",name:"GetBulletLocalId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetOffenderJoinIndex",name:"GetOffenderJoinIndex",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetOriginatedRenderFrameId",name:"GetOriginatedRenderFrameId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetStartupFrames",name:"GetStartupFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetActiveFrames",name:"GetActiveFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxSizeX",name:"GetHitboxSizeX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxSizeY",name:"GetHitboxSizeY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxOffsetX",name:"GetHitboxOffsetX",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetHitboxOffsetY",name:"GetHitboxOffsetY",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetExplosionFrames",name:"GetExplosionFrames",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetSpeciesId",name:"GetSpeciesId",pkg:"",typ:$funcType([],[$Int32],false)}];CB.methods=[{prop:"GetId",name:"GetId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetCountdownNanos",name:"GetCountdownNanos",pkg:"",typ:$funcType([],[$Int64],false)},{prop:"GetBackendUnconfirmedMask",name:"GetBackendUnconfirmedMask",pkg:"",typ:$funcType([],[$Uint64],false)},{prop:"GetBulletLocalIdCounter",name:"GetBulletLocalIdCounter",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetShouldForceResync",name:"GetShouldForceResync",pkg:"",typ:$funcType([],[$Bool],false)},{prop:"GetPlayersArr",name:"GetPlayersArr",pkg:"",typ:$funcType([],[CG],false)},{prop:"GetMeleeBullets",name:"GetMeleeBullets",pkg:"",typ:$funcType([],[CH],false)},{prop:"GetFireballBullets",name:"GetFireballBullets",pkg:"",typ:$funcType([],[CI],false)}];BZ.methods=[{prop:"GetInputFrameId",name:"GetInputFrameId",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetInputList",name:"GetInputList",pkg:"",typ:$funcType([],[CA],false)},{prop:"GetConfirmedList",name:"GetConfirmedList",pkg:"",typ:$funcType([],[$Uint64],false)}];CL.methods=[{prop:"GetSpeed",name:"GetSpeed",pkg:"",typ:$funcType([],[$Int32],false)},{prop:"GetSpeciesId",name:"GetSpeciesId",pkg:"",typ:$funcType([],[$Int],false)},{prop:"GetSpeciesName",name:"GetSpeciesName",pkg:"",typ:$funcType([],[$String],false)}];C.init([]);D.init("",[{prop:"X",name:"X",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"Y",name:"Y",embedded:false,exported:true,typ:$Float64,tag:""}]);E.init("",[{prop:"Anchor",name:"Anchor",embedded:false,exported:true,typ:CE,tag:""},{prop:"Points",name:"Points",embedded:false,exported:true,typ:CF,tag:""}]);F.init("",[{prop:"Id",name:"Id",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VirtualGridX",name:"VirtualGridX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VirtualGridY",name:"VirtualGridY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"DirX",name:"DirX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"DirY",name:"DirY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VelX",name:"VelX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VelY",name:"VelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Speed",name:"Speed",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BattleState",name:"BattleState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"JoinIndex",name:"JoinIndex",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"ColliderRadius",name:"ColliderRadius",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Removed",name:"Removed",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"Score",name:"Score",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"LastMoveGmtMillis",name:"LastMoveGmtMillis",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"FramesToRecover",name:"FramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"FramesInChState",name:"FramesInChState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Hp",name:"Hp",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"MaxHp",name:"MaxHp",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"CharacterState",name:"CharacterState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"InAir",name:"InAir",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"OnWall",name:"OnWall",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"OnWallNormX",name:"OnWallNormX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"OnWallNormY",name:"OnWallNormY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"CapturedByInertia",name:"CapturedByInertia",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"ActiveSkillId",name:"ActiveSkillId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"ActiveSkillHit",name:"ActiveSkillHit",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"FramesInvinsible",name:"FramesInvinsible",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BulletTeamId",name:"BulletTeamId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"ChCollisionTeamId",name:"ChCollisionTeamId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"RevivalVirtualGridX",name:"RevivalVirtualGridX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"RevivalVirtualGridY",name:"RevivalVirtualGridY",embedded:false,exported:true,typ:$Int32,tag:""}]);G.init("",[{prop:"Dx",name:"Dx",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Dy",name:"Dy",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BtnALevel",name:"BtnALevel",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BtnBLevel",name:"BtnBLevel",embedded:false,exported:true,typ:$Int32,tag:""}]);I.init("",[{prop:"Boundary",name:"Boundary",embedded:false,exported:true,typ:CJ,tag:""}]);J.init("",[{prop:"StartupFrames",name:"StartupFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"CancellableStFrame",name:"CancellableStFrame",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"CancellableEdFrame",name:"CancellableEdFrame",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"ActiveFrames",name:"ActiveFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"HitStunFrames",name:"HitStunFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BlockStunFrames",name:"BlockStunFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"PushbackVelX",name:"PushbackVelX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"PushbackVelY",name:"PushbackVelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Damage",name:"Damage",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"SelfLockVelX",name:"SelfLockVelX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"SelfLockVelY",name:"SelfLockVelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"HitboxOffsetX",name:"HitboxOffsetX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"HitboxOffsetY",name:"HitboxOffsetY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"HitboxSizeX",name:"HitboxSizeX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"HitboxSizeY",name:"HitboxSizeY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BlowUp",name:"BlowUp",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"ExplosionFrames",name:"ExplosionFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"SpeciesId",name:"SpeciesId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"CancelTransit",name:"CancelTransit",embedded:false,exported:true,typ:CK,tag:""}]);K.init("",[{prop:"BulletLocalId",name:"BulletLocalId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"OriginatedRenderFrameId",name:"OriginatedRenderFrameId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"OffenderJoinIndex",name:"OffenderJoinIndex",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"TeamId",name:"TeamId",embedded:false,exported:true,typ:$Int32,tag:""}]);L.init("",[{prop:"BlState",name:"BlState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"FramesInBlState",name:"FramesInBlState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BattleAttr",name:"BattleAttr",embedded:false,exported:true,typ:BQ,tag:""},{prop:"Bullet",name:"Bullet",embedded:false,exported:true,typ:BR,tag:""}]);M.init("",[{prop:"VirtualGridX",name:"VirtualGridX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VirtualGridY",name:"VirtualGridY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"DirX",name:"DirX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"DirY",name:"DirY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VelX",name:"VelX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"VelY",name:"VelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Speed",name:"Speed",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BlState",name:"BlState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"FramesInBlState",name:"FramesInBlState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BattleAttr",name:"BattleAttr",embedded:false,exported:true,typ:BQ,tag:""},{prop:"Bullet",name:"Bullet",embedded:false,exported:true,typ:BR,tag:""}]);N.init("",[{prop:"BattleLocalId",name:"BattleLocalId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"RecoveryFrames",name:"RecoveryFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"RecoveryFramesOnBlock",name:"RecoveryFramesOnBlock",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"RecoveryFramesOnHit",name:"RecoveryFramesOnHit",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"ReleaseTriggerType",name:"ReleaseTriggerType",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"BoundChState",name:"BoundChState",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Hits",name:"Hits",embedded:false,exported:true,typ:BP,tag:""}]);O.init("",[{prop:"Id",name:"Id",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"PlayersArr",name:"PlayersArr",embedded:false,exported:true,typ:CG,tag:""},{prop:"CountdownNanos",name:"CountdownNanos",embedded:false,exported:true,typ:$Int64,tag:""},{prop:"MeleeBullets",name:"MeleeBullets",embedded:false,exported:true,typ:CH,tag:""},{prop:"FireballBullets",name:"FireballBullets",embedded:false,exported:true,typ:CI,tag:""},{prop:"BackendUnconfirmedMask",name:"BackendUnconfirmedMask",embedded:false,exported:true,typ:$Uint64,tag:""},{prop:"ShouldForceResync",name:"ShouldForceResync",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"BulletLocalIdCounter",name:"BulletLocalIdCounter",embedded:false,exported:true,typ:$Int32,tag:""}]);P.init("",[{prop:"InputFrameId",name:"InputFrameId",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"InputList",name:"InputList",embedded:false,exported:true,typ:CA,tag:""},{prop:"ConfirmedList",name:"ConfirmedList",embedded:false,exported:true,typ:$Uint64,tag:""}]);Q.init("",[{prop:"FlAct",name:"FlAct",embedded:false,exported:true,typ:$Uint64,tag:""},{prop:"FrAct",name:"FrAct",embedded:false,exported:true,typ:$Uint64,tag:""},{prop:"X",name:"X",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"Y",name:"Y",embedded:false,exported:true,typ:$Float64,tag:""}]);S.init("",[{prop:"SpeciesId",name:"SpeciesId",embedded:false,exported:true,typ:$Int,tag:""},{prop:"SpeciesName",name:"SpeciesName",embedded:false,exported:true,typ:$String,tag:""},{prop:"InAirIdleFrameIdxTurningPoint",name:"InAirIdleFrameIdxTurningPoint",embedded:false,exported:true,typ:$Int,tag:""},{prop:"InAirIdleFrameIdxTurnedCycle",name:"InAirIdleFrameIdxTurnedCycle",embedded:false,exported:true,typ:$Int,tag:""},{prop:"LayDownFrames",name:"LayDownFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"LayDownFramesToRecover",name:"LayDownFramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"GetUpInvinsibleFrames",name:"GetUpInvinsibleFrames",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"GetUpFramesToRecover",name:"GetUpFramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"Speed",name:"Speed",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"JumpingInitVelY",name:"JumpingInitVelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"JumpingFramesToRecover",name:"JumpingFramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"DashingEnabled",name:"DashingEnabled",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"OnWallEnabled",name:"OnWallEnabled",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"WallJumpingFramesToRecover",name:"WallJumpingFramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"WallJumpingInitVelX",name:"WallJumpingInitVelX",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"WallJumpingInitVelY",name:"WallJumpingInitVelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"WallSlidingVelY",name:"WallSlidingVelY",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"InertiaFramesToRecover",name:"InertiaFramesToRecover",embedded:false,exported:true,typ:$Int32,tag:""},{prop:"SkillMapper",name:"SkillMapper",embedded:false,exported:true,typ:CM,tag:""}]);AH.init("",[{prop:"Overlap",name:"Overlap",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"OverlapX",name:"OverlapX",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"OverlapY",name:"OverlapY",embedded:false,exported:true,typ:$Float64,tag:""},{prop:"AContainedInB",name:"AContainedInB",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"BContainedInA",name:"BContainedInA",embedded:false,exported:true,typ:$Bool,tag:""},{prop:"Axis",name:"Axis",embedded:false,exported:true,typ:B.Vector,tag:""}]);$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:$r=A.$init();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$r=B.$init();$s=2;case 2:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$pkg.DIRECTION_DECODER=new BO([new BN([0,0]),new BN([0,2]),new BN([0,-2]),new BN([2,0]),new BN([-2,0]),new BN([1,1]),new BN([-1,-1]),new BN([1,-1]),new BN([-1,1])]);U=$makeMap($Int.keyFor,[{k:1,v:new N.ptr(0,30,30,30,1,2,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(7,13,30,22,13,9,5,0,5,1,-1,120,0,240,320,false,9,1,$makeMap($Int.keyFor,[{k:1,v:2}])))]))},{k:2,v:new N.ptr(0,36,36,36,1,11,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(18,22,36,18,18,9,5,0,5,1,-1,180,0,240,320,false,9,1,$makeMap($Int.keyFor,[{k:1,v:3}])))]))},{k:3,v:new N.ptr(0,50,50,50,1,12,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(8,0,0,30,999999999,9,20,70,10,5,50,160,80,320,320,true,9,1,false))]))},{k:4,v:new N.ptr(0,30,30,30,1,2,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(7,13,30,22,13,9,5,0,5,1,-1,120,0,240,320,false,15,2,$makeMap($Int.keyFor,[{k:1,v:5}])))]))},{k:5,v:new N.ptr(0,36,36,36,1,11,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(18,23,36,18,18,9,5,0,5,1,-1,180,0,240,320,false,15,2,$makeMap($Int.keyFor,[{k:1,v:6}])))]))},{k:6,v:new N.ptr(0,45,45,45,1,12,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(8,0,0,28,999999999,9,20,30,10,-1,-1,240,0,320,320,true,15,2,false))]))},{k:7,v:new N.ptr(0,30,30,30,1,2,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(7,13,30,22,13,9,5,0,5,-1,-1,120,0,240,320,false,9,1,$makeMap($Int.keyFor,[{k:1,v:8}])))]))},{k:8,v:new N.ptr(0,36,36,36,1,11,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(18,22,36,18,18,9,5,0,5,1,-1,180,0,240,320,false,9,1,$makeMap($Int.keyFor,[{k:1,v:9}])))]))},{k:9,v:new N.ptr(0,40,40,40,1,12,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(7,0,0,30,999999999,9,20,40,10,10,-1,100,0,320,320,true,9,1,false))]))},{k:10,v:new N.ptr(0,38,38,38,1,13,new BP([new M.ptr(0,0,0,0,0,0,60,0,0,BQ.nil,new J.ptr(10,0,0,999999999,15,9,20,0,22,-1,-1,320,100,640,480,false,30,1,false))]))},{k:11,v:new N.ptr(0,60,60,60,1,14,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(3,0,0,25,999999999,9,20,70,35,10,80,80,0,400,640,true,15,3,false))]))},{k:12,v:new N.ptr(0,10,10,10,1,15,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(3,0,0,0,0,0,-1,-1,0,60,0,0,0,0,0,false,0,0,false))]))},{k:13,v:new N.ptr(0,12,12,12,1,15,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(3,0,0,0,0,0,-1,-1,0,80,0,0,0,0,0,false,0,0,false))]))},{k:14,v:new N.ptr(0,8,8,8,1,15,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(4,0,0,0,999999999,0,-1,-1,0,50,0,0,0,0,0,false,0,0,false))]))},{k:15,v:new N.ptr(0,48,48,48,1,13,new BP([new M.ptr(0,0,0,0,0,0,40,0,0,BQ.nil,new J.ptr(12,0,0,999999999,15,9,30,0,18,-1,-1,240,80,480,320,false,30,2,false))]))},{k:16,v:new N.ptr(0,60,60,60,1,13,new BP([new M.ptr(0,0,0,0,0,0,40,0,0,BQ.nil,new J.ptr(16,0,0,999999999,999999999,9,30,70,30,-1,-1,240,80,480,320,true,30,3,false))]))},{k:255,v:new N.ptr(0,30,30,30,1,6,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(3,0,0,20,18,9,5,0,5,-1,-1,120,0,320,240,false,9,1,false))]))},{k:256,v:new N.ptr(0,20,20,20,1,6,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(3,0,0,10,15,9,5,0,5,-1,-1,120,0,320,240,false,15,2,false))]))},{k:257,v:new N.ptr(0,30,30,30,1,6,new BP([new L.ptr(0,0,BQ.nil,new J.ptr(4,0,0,20,9,5,5,0,5,-1,-1,120,0,320,240,false,9,1,false))]))}]);$pkg.Characters=$makeMap($Int.keyFor,[{k:0,v:new S.ptr(0,"MonkGirl",11,1,16,16,10,27,21,80,2,true,true,8,28,70,-10,9,T)},{k:1,v:new S.ptr(1,"KnifeGirl",9,1,16,16,10,27,22,75,2,true,true,8,28,70,-10,9,T)},{k:4096,v:new S.ptr(4096,"Monk",42,2,14,14,8,30,18,78,2,true,false,0,0,0,0,9,T)}]);V=$makeMap($Int32.keyFor,[{k:4,v:true},{k:5,v:true},{k:6,v:true},{k:7,v:true},{k:8,v:true},{k:16,v:true},{k:15,v:true}]);W=$makeMap($Int32.keyFor,[{k:3,v:true},{k:7,v:true},{k:8,v:true},{k:9,v:true},{k:18,v:true}]);X=$makeMap($Int32.keyFor,[{k:8,v:true},{k:9,v:true},{k:10,v:true},{k:18,v:true}]);Y=$makeMap($Int32.keyFor,[{k:0,v:true},{k:1,v:true},{k:4,v:true},{k:5,v:true},{k:3,v:true},{k:7,v:true},{k:8,v:true},{k:9,v:true},{k:10,v:true},{k:18,v:true}]);}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$packages["jsexport"]=(function(){var $pkg={},$init,A,B,C,AE,AF,AG,AH,AI,AJ,AK,AL,AM,AN,AO,AP,AQ,AR,AS,AT,AU,AV,AW,AX,AY,AZ,BA,BB,BC,BD,BE,BF,BG,BH,BI,BJ,BK,BL,BM,BN,BO,BP,BQ,BR,BS,BT,BU,BV,BW,BX,BY,BZ,CA,CB,CC,CD,CE,CF,CG,CH,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,AA,AB,AC,AD;A=$packages["github.com/gopherjs/gopherjs/js"];B=$packages["jsexport/battle"];C=$packages["resolv"];AE=$ptrType(A.Object);AF=$sliceType(AE);AG=$sliceType($Uint64);AH=$ptrType(B.Vec2D);AI=$sliceType(AH);AJ=$ptrType(B.Polygon2D);AK=$ptrType(B.CharacterConfig);AL=$ptrType(B.RoomDownsyncFrame);AM=$ptrType(B.InputFrameDownsync);AN=$funcType([$Float64,$Float64],[AE],false);AO=$funcType([AH,AI],[AE],false);AP=$funcType([AJ],[AE],false);AQ=$funcType([$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Bool,$Bool,$Int32,$Int32,$Bool,$Int32,$Int32,$Int32,$Int32],[AE],false);AR=$funcType([$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Bool,$Int32,$Int32,$Int32,$Int32,$Int32],[AE],false);AS=$funcType([$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Bool,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32,$Int32],[AE],false);AT=$funcType([$Uint64,$Uint64,$Float64,$Float64],[AE],false);AU=$ptrType(B.PlayerDownsync);AV=$sliceType(AU);AW=$ptrType(B.MeleeBullet);AX=$sliceType(AW);AY=$ptrType(B.FireballBullet);AZ=$sliceType(AY);BA=$funcType([$Int32,AV,$Int32,AX,AZ],[AE],false);BB=$funcType([$Int,$Int,$Int,$Int],[AE],false);BC=$funcType([],[AE],false);BD=$funcType([$Int32,AG,$Uint64],[AE],false);BE=$funcType([$Int32],[AE],false);BF=$funcType([AJ,$Float64,$Float64,$emptyInterface,$String],[AE],false);BG=$ptrType(C.Space);BH=$funcType([BG],[AF],false);BI=$funcType([$Float64,$Float64,$Float64,$Float64,$Float64,$Float64,$Float64,$Float64,$Float64,$Float64],[$Float64,$Float64],false);BJ=$funcType([$Float64,$Float64],[$Int32,$Int32],false);BK=$funcType([$Int32,$Int32],[$Float64,$Float64],false);BL=$sliceType($Int);BM=$funcType([BL],[AF],false);BN=$ptrType(C.RingBuffer);BO=$ptrType(C.Object);BP=$mapType($Int32,BO);BQ=$sliceType(AK);BR=$ptrType(C.Collision);BS=$sliceType(AI);BT=$sliceType($Bool);BU=$sliceType(BO);BV=$sliceType($Int32);BW=$funcType([BN,$Int32,BG,BP,$Float64,$Float64,BQ,BN,BR,AI,BS,BT,BU,BV,AG,$Bool,$Int32],[$Bool],false);BX=$funcType([$Int32],[$Int32],false);BY=$funcType([$Int32],[$Bool],false);BZ=$funcType([$Int32,$Int32,$Int32,$Int32,$Int32],[$Bool],false);CA=$funcType([BN,$Int32],[AE],false);CB=$funcType([AL,$Int],[AE],false);CC=$funcType([AM,$Int],[$Uint64],false);CD=$funcType([$Int],[AF],false);CE=$funcType([AM,$Int32],[$Bool],false);CF=$funcType([AM,$Int,$Uint64],[$Bool],false);CG=$funcType([AM,$Uint64],[$Bool],false);CH=$mapType($String,$emptyInterface);D=function(a){var{a,b,c,d,e,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=$makeSlice(AF,a);c=0;case 1:if(!(c<a)){$s=2;continue;}d=B.GenerateRectCollider(0,0,0,0,0,0,0,0,0,0,$ifaceNil,"");$s=3;case 3:if($c){$c=false;d=d.$blk();}if(d&&d.$blk!==undefined){break s;}e=A.MakeWrapper(d);$s=4;case 4:if($c){$c=false;e=e.$blk();}if(e&&e.$blk!==undefined){break s;}((c<0||c>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+c]=e);c=c+(1)>>0;$s=1;continue;case 2:$s=-1;return b;}return;}var $f={$blk:D,$c:true,$r,a,b,c,d,e,$s};return $f;};$pkg.NewDynamicRectangleColliders=D;E=function(){return A.MakeWrapper(C.NewCollision());};$pkg.NewCollisionHolder=E;F=function(a,b,c){var a,b,c;return A.MakeWrapper(new B.InputFrameDownsync.ptr(a,b,c));};$pkg.NewInputFrameDownsync=F;G=function(a){var a;return A.MakeWrapper(C.NewRingBuffer(a));};$pkg.NewRingBufferJs=G;H=function(a,b,c,d){var a,b,c,d;return A.MakeWrapper(C.NewSpace(a,b,c,d));};$pkg.NewCollisionSpaceJs=H;I=function(a,b){var a,b;return A.MakeWrapper(new B.Vec2D.ptr(a,b));};$pkg.NewVec2DJs=I;J=function(a,b){var a,b;return A.MakeWrapper(new B.Polygon2D.ptr(a,b));};$pkg.NewPolygon2DJs=J;K=function(a){var a;return A.MakeWrapper(new B.Barrier.ptr(a));};$pkg.NewBarrierJs=K;L=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab){var a,aa,ab,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return A.MakeWrapper(B.NewPlayerDownsync(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab));};$pkg.NewPlayerDownsyncJs=L;M=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return A.MakeWrapper(B.NewMeleeBullet(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x));};$pkg.NewMeleeBulletJs=M;N=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad,ae){var a,aa,ab,ac,ad,ae,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return A.MakeWrapper(B.NewFireballBullet(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad,ae));};$pkg.NewFireballBulletJs=N;O=function(a,b,c,d){var a,b,c,d;return A.MakeWrapper(new B.NpcPatrolCue.ptr(a,b,c,d));};$pkg.NewNpcPatrolCue=O;P=function(a,b,c,d,e){var a,b,c,d,e,f;f=B.NewPreallocatedRoomDownsyncFrame(b.$length,64,64);B.CloneRoomDownsyncFrame(a,b,c,d,e,f);return A.MakeWrapper(f);};$pkg.NewRoomDownsyncFrameJs=P;Q=function(a){var a,b,c,d,e,f,g;b=a.Objects();c=$makeSlice(AF,b.$length);d=b;e=0;while(true){if(!(e<d.$length)){break;}f=e;g=((e<0||e>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+e]);((f<0||f>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+f]=A.MakeWrapper(g));e++;}return c;};$pkg.GetCollisionSpaceObjsJs=Q;R=function(a,b,c,d,e){var{a,b,c,d,e,f,g,h,$s,$r,$c}=$restore(this,{a,b,c,d,e});$s=$s||0;s:while(true){switch($s){case 0:f=B.GenerateConvexPolygonCollider(a,b,c,d,e);$s=1;case 1:if($c){$c=false;f=f.$blk();}if(f&&f.$blk!==undefined){break s;}g=A.MakeWrapper(f);$s=2;case 2:if($c){$c=false;g=g.$blk();}if(g&&g.$blk!==undefined){break s;}h=g;$s=3;case 3:return h;}return;}var $f={$blk:R,$c:true,$r,a,b,c,d,e,f,g,h,$s};return $f;};$pkg.GenerateConvexPolygonColliderJs=R;S=function(a){var{a,b,c,d,e,f,g,h,$s,$r,$c}=$restore(this,{a});$s=$s||0;s:while(true){switch($s){case 0:b=$makeSlice(AF,a.$length,a.$length);c=a;d=0;case 1:if(!(d<c.$length)){$s=2;continue;}e=d;f=((d<0||d>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+d]);h=A.MakeFullWrapper((g=B.Characters[$Int.keyFor(f)],g!==undefined?g.v:AK.nil));$s=3;case 3:if($c){$c=false;h=h.$blk();}if(h&&h.$blk!==undefined){break s;}((e<0||e>=b.$length)?($throwRuntimeError("index out of range"),undefined):b.$array[b.$offset+e]=h);d++;$s=1;continue;case 2:$s=-1;return b;}return;}var $f={$blk:S,$c:true,$r,a,b,c,d,e,f,g,h,$s};return $f;};$pkg.GetCharacterConfigsOrderedByJoinIndex=S;T=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,$s,$r,$c}=$restore(this,{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q});$s=$s||0;s:while(true){switch($s){case 0:r=B.ApplyInputFrameDownsyncDynamicsOnSingleRenderFrame(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q);$s=1;case 1:if($c){$c=false;r=r.$blk();}if(r&&r.$blk!==undefined){break s;}s=r;$s=2;case 2:return s;}return;}var $f={$blk:T,$c:true,$r,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,$s};return $f;};$pkg.ApplyInputFrameDownsyncDynamicsOnSingleRenderFrameJs=T;U=function(a,b){var a,b,c;c=a.GetByFrameId(b);if($interfaceIsEqual($ifaceNil,c)){return null;}return A.MakeWrapper($assertType(c,AL));};$pkg.GetRoomDownsyncFrame=U;V=function(a,b){var a,b,c;c=a.GetByFrameId(b);if($interfaceIsEqual($ifaceNil,c)){return null;}return A.MakeWrapper($assertType(c,AM));};$pkg.GetInputFrameDownsync=V;W=function(a,b){var a,b,c;return(c=a.InputList,((b<0||b>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+b]));};$pkg.GetInput=W;X=function(a,b){var a,b;a.InputFrameId=b;return true;};$pkg.SetInputFrameId=X;Y=function(a,b,c){var a,b,c,d;if(b>=a.InputList.$length){return false;}(d=a.InputList,((b<0||b>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+b]=c));return true;};$pkg.SetInput=Y;Z=function(a,b){var a,b;a.ConfirmedList=b;return true;};$pkg.SetConfirmedList=Z;AA=function(a,b){var a,b,c;return A.MakeWrapper((c=a.PlayersArr,((b<0||b>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+b])));};$pkg.GetPlayer=AA;AB=function(a,b){var a,b,c,d;if(-1===(c=a.MeleeBullets,((b<0||b>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+b])).GetBulletLocalId()){return null;}return A.MakeWrapper((d=a.MeleeBullets,((b<0||b>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+b])));};$pkg.GetMeleeBullet=AB;AC=function(a,b){var a,b,c,d;if(-1===(c=a.FireballBullets,((b<0||b>=c.$length)?($throwRuntimeError("index out of range"),undefined):c.$array[c.$offset+b])).GetBulletLocalId()){return null;}return A.MakeWrapper((d=a.FireballBullets,((b<0||b>=d.$length)?($throwRuntimeError("index out of range"),undefined):d.$array[d.$offset+b])));};$pkg.GetFireballBullet=AC;AD=function(){$global.gopkgs=$externalize($makeMap($String.keyFor,[{k:"NewVec2DJs",v:new AN(I)},{k:"NewPolygon2DJs",v:new AO(J)},{k:"NewBarrierJs",v:new AP(K)},{k:"NewPlayerDownsyncJs",v:new AQ(L)},{k:"NewMeleeBulletJs",v:new AR(M)},{k:"NewFireballBulletJs",v:new AS(N)},{k:"NewNpcPatrolCue",v:new AT(O)},{k:"NewRoomDownsyncFrameJs",v:new BA(P)},{k:"NewCollisionSpaceJs",v:new BB(H)},{k:"NewCollisionHolder",v:new BC(E)},{k:"NewInputFrameDownsync",v:new BD(F)},{k:"NewRingBufferJs",v:new BE(G)},{k:"GenerateConvexPolygonColliderJs",v:new BF(R)},{k:"GetCollisionSpaceObjsJs",v:new BH(Q)},{k:"WorldToPolygonColliderBLPos",v:new BI(B.WorldToPolygonColliderBLPos)},{k:"PolygonColliderBLToWorldPos",v:new BI(B.PolygonColliderBLToWorldPos)},{k:"WorldToVirtualGridPos",v:new BJ(B.WorldToVirtualGridPos)},{k:"VirtualGridToWorldPos",v:new BK(B.VirtualGridToWorldPos)},{k:"GetCharacterConfigsOrderedByJoinIndex",v:new BM(S)},{k:"ApplyInputFrameDownsyncDynamicsOnSingleRenderFrameJs",v:new BW(T)},{k:"ConvertToDelayedInputFrameId",v:new BX(B.ConvertToDelayedInputFrameId)},{k:"ConvertToNoDelayInputFrameId",v:new BX(B.ConvertToNoDelayInputFrameId)},{k:"ConvertToFirstUsedRenderFrameId",v:new BX(B.ConvertToFirstUsedRenderFrameId)},{k:"ConvertToLastUsedRenderFrameId",v:new BX(B.ConvertToLastUsedRenderFrameId)},{k:"ShouldGenerateInputFrameUpsync",v:new BY(B.ShouldGenerateInputFrameUpsync)},{k:"IsGeneralBulletActive",v:new BZ(B.IsGeneralBulletActive)},{k:"GetRoomDownsyncFrame",v:new CA(U)},{k:"GetInputFrameDownsync",v:new CA(V)},{k:"GetPlayer",v:new CB(AA)},{k:"GetMeleeBullet",v:new CB(AB)},{k:"GetFireballBullet",v:new CB(AC)},{k:"GetInput",v:new CC(W)},{k:"NewDynamicRectangleColliders",v:new CD(D)},{k:"SetInputFrameId",v:new CE(X)},{k:"SetInput",v:new CF(Y)},{k:"SetConfirmedList",v:new CG(Z)}]),CH);};$init=function(){$pkg.$init=function(){};var $f,$c=false,$s=0,$r;if(this!==undefined&&this.$blk!==undefined){$f=this;$c=true;$s=$f.$s;$r=$f.$r;}s:while(true){switch($s){case 0:$r=A.$init();$s=1;case 1:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$r=B.$init();$s=2;case 2:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}$r=C.$init();$s=3;case 3:if($c){$c=false;$r=$r.$blk();}if($r&&$r.$blk!==undefined){break s;}if($pkg===$mainPkg){AD();$mainFinished=true;}}return;}if($f===undefined){$f={$blk:$init};}$f.$s=$s;$f.$r=$r;return $f;};$pkg.$init=$init;return $pkg;})();
$synthesizeMethods();
$initAllLinknames();
var $mainPkg = $packages["jsexport"];
$packages["runtime"].$init();
$go($mainPkg.$init, []);
$flushConsole();

}).call(this);
//# sourceMappingURL=jsexport.js.map
